<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1A3E74">

    <!-- Meta Tags SEO -->
    <meta name="description" content="Painel Administrativo do sistema Simulados de Enfermagem. Gerencie provas, conteúdos, questões e concursos para monetização.">
    <meta name="keywords" content="admin, painel administrativo, gerenciamento, simulados enfermagem, provas, conteúdos, questões, concursos">
    <meta name="author" content="Simulados de Enfermagem">
    <meta name="robots" content="noindex, nofollow">
    <meta name="language" content="Portuguese">
    <meta name="generator" content="Simulados de Enfermagem Admin Panel">

    <!-- Open Graph / Facebook / LinkedIn -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://simulados-para-enfermagem.com.br/assets/app/html/admin-panel.html">
    <meta property="og:title" content>Painel Admin | Simulados de Enfermagem</meta>
    <meta property="og:description" content="Gerenciamento centralizado do sistema de simulados para enfermagem.">
    <meta property="og:site_name" content="Simulados de Enfermagem">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Painel Admin | Simulados de Enfermagem">
    <meta name="twitter:description" content="Gerenciamento centralizado do sistema de simulados para enfermagem.">

    <!-- Mobile App -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Admin">

    <!-- Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.google-analytics.com">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">

    <!-- Canonical -->
    <link rel="canonical" href="https://simulados-para-enfermagem.com.br/assets/app/html/admin-panel.html">

    <!-- Favicon -->
    <link rel="icon" type="image/webp" sizes="32x32" href="https://simulados-para-enfermagem.com.br/assets/components/images/logotipo-simulados-para-enfermagem.webp">
    <link rel="icon" type="image/webp" sizes="16x16" href="https://simulados-para-enfermagem.com.br/assets/components/images/logotipo-simulados-para-enfermagem.webp">
    <link rel="apple-touch-icon" sizes="180x180" href="https://simulados-para-enfermagem.com.br/assets/components/images/logotipo-simulados-para-enfermagem.webp">
    <link rel="shortcut icon" type="image/webp" href="https://simulados-para-enfermagem.com.br/assets/components/images/logotipo-simulados-para-enfermagem.webp">
    <link rel="manifest" href="https://simulados-para-enfermagem.com.br/manifest.json">

    <!-- Título -->
    <title>Painel Admin | Simulados de Enfermagem - Gerenciamento Completo</title>

    <!-- Fontes Google -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Nunito+Sans:wght@600;700;800&display=swap" rel="stylesheet">

    <!-- Ícones FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- CSS Componentes -->
    <link rel="stylesheet" href="https://simulados-para-enfermagem.com.br/assets/components/css/components.css">
    <link rel="stylesheet" href="https://simulados-para-enfermagem.com.br/assets/components/css/header.css">
    <link rel="stylesheet" href="https://simulados-para-enfermagem.com.br/assets/components/css/accessibility.css">
    <link rel="stylesheet" href="https://simulados-para-enfermagem.com.br/assets/components/css/footer.css">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QLGJ0L0GZE"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-QLGJ0L0GZE');
    </script>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {"@type": "ListItem", "position": 1, "name": "Início", "item": "https://simulados-para-enfermagem.com.br/"},
            {"@type": "ListItem", "position": 2, "name": "Admin", "item": "https://simulados-para-enfermagem.com.br/assets/app/html/admin-panel.html"}
        ]
    }
    </script>

    <!-- CSS Customizado -->
    <style>
        /* Variáveis CSS */
        :root {
            --primary: #1A3E74;
            --primary-hover: #152c4f;
            --accent: #00bcd4;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --bg-body: #f3f4f6;
            --bg-card: #ffffff;
            --text-main: #111827;
            --text-secondary: #6b7280;
            --border-color: #e5e7eb;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --transition-base: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Reset e Base */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html { font-size: 100%; scroll-behavior: smooth; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-body);
            color: var(--text-main);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        h1 { font-family: 'Nunito Sans', sans-serif; color: var(--text-main); }
        h2, h3, h4, h5, h6 { font-family: 'Inter', sans-serif; color: var(--text-main); }

        /* Loader */
        #loader-global {
            position: fixed;
            inset: 0;
            background: var(--bg-card);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loader-dots { display: flex; gap: 8px; }

        .loader-dot {
            width: 12px;
            height: 12px;
            background: var(--primary);
            border-radius: 50%;
            animation: dotPulse 1.4s ease-in-out infinite;
            opacity: 0.6;
        }

        .loader-dot:nth-child(1) { animation-delay: 0s; }
        .loader-dot:nth-child(2) { animation-delay: 0.2s; }
        .loader-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes dotPulse {
            0%, 100% { transform: scale(0.8); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        #loader-global.hidden { 
            opacity: 0; 
            pointer-events: none; 
            visibility: hidden;
            z-index: -1;
        }

        /* Page Wrapper */
        .page-wrapper {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 24px 8px 24px;
            position: relative;
            z-index: 2;
        }

        /* Background SVG */
        .page-svg-bg {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .page-svg-bg svg { width: 100%; height: 100%; }

        .svg-curve { opacity: 0.3; }
        .svg-curve-1 { animation: curveMove1 8s ease-in-out infinite alternate; }
        .svg-curve-2 { animation: curveMove2 10s ease-in-out infinite alternate; }
        .svg-curve-3 { animation: curveMove3 12s ease-in-out infinite alternate; }
        .svg-curve-4 { animation: curveMove4 9s ease-in-out infinite alternate; }

        @keyframes curveMove1 {
            0% { transform: translateX(0) translateY(0); }
            100% { transform: translateX(50px) translateY(-20px); }
        }

        @keyframes curveMove2 {
            0% { transform: translateX(0) translateY(0); }
            100% { transform: translateX(-30px) translateY(15px); }
        }

        @keyframes curveMove3 {
            0% { transform: translateX(0) translateY(0); }
            100% { transform: translateX(40px) translateY(-15px); }
        }

        @keyframes curveMove4 {
            0% { transform: translateX(0) translateY(0); }
            100% { transform: translateX(-40px) translateY(10px); }
        }

        /* Admin Header */
        .admin-header {
            margin-bottom: 32px;
            position: relative;
        }

        .admin-header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 12px;
        }

        .admin-header h1 i { color: var(--primary); }

        .admin-header .subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .admin-header::after {
            content: '';
            display: block;
            width: 60px;
            height: 4px;
            background: var(--accent);
            border-radius: 2px;
            margin-top: 16px;
        }

        /* Tabs Container */
        .tabs-container {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            margin-bottom: 32px;
        }
        
        /* Allow horizontal scroll on mobile */
        @media (max-width: 768px) {
            .tabs-container {
                overflow: visible;
                border-radius: 12px;
            }
        }

        .tabs-header {
            display: flex;
            flex-wrap: wrap;
            border-bottom: 1px solid var(--border-color);
            background: #f8fafc;
        }

        .tab-btn {
            flex: 1;
            min-width: 160px;
            padding: 16px 24px;
            background: none;
            border: none;
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition-base);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            border-bottom: 3px solid transparent;
            position: relative;
            z-index: 1;
        }
        
        /* Ensure tabs are clickable */
        .tab-btn,
        .tab-btn:focus,
        .tab-btn:active {
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        .tab-btn:hover {
            background: var(--primary-light);
            color: var(--primary);
        }

        .tab-btn.active {
            background: var(--bg-card);
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-btn i { font-size: 1.1rem; }

        .tab-btn .badge {
            background: var(--error);
            color: white;
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 700;
        }

        .tab-content {
            display: none;
            padding: 32px;
        }

        .tab-content.active { display: block; }

        /* Section Header with Actions */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .section-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-header h2 i {
            color: var(--accent);
        }

        .section-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        /* Layout Integrado Provas e Questões */
        .provas-questoes-container {
            display: flex;
            gap: 24px;
            min-height: calc(100vh - 250px);
        }

        /* Sidebar de Provas */
        .provas-sidebar {
            width: 320px;
            flex-shrink: 0;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            transition: width 0.3s ease, margin-right 0.3s ease;
            max-height: calc(100vh - 250px);
            overflow: hidden;
        }

        .provas-sidebar.collapsed {
            width: 60px;
            margin-right: 0;
        }

        .provas-sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .provas-sidebar-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
            overflow: hidden;
        }

        .provas-sidebar.collapsed .provas-sidebar-title span {
            display: none;
        }

        .provas-sidebar-title i {
            color: var(--accent);
            font-size: 1.125rem;
        }

        .sidebar-toggle-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: none;
            background: var(--hover-bg);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .sidebar-toggle-btn:hover {
            background: var(--accent);
            color: white;
        }

        .provas-sidebar.collapsed .sidebar-toggle-btn {
            margin: 0 auto;
        }

        .provas-list {
            flex: 1;
            overflow-y: auto;
            padding-right: 8px;
        }

        .provas-list::-webkit-scrollbar {
            width: 6px;
        }

        .provas-list::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        .prova-item {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .prova-item:hover {
            background: var(--hover-bg);
            border-color: var(--border-color);
        }

        .prova-item.active {
            background: rgba(26, 62, 116, 0.1);
            border-color: var(--accent);
        }

        .prova-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 8px;
        }

        .prova-item-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-main);
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .provas-sidebar.collapsed .prova-item {
            padding: 12px 8px;
            justify-content: center;
        }

        .provas-sidebar.collapsed .prova-item-header {
            justify-content: center;
        }

        .provas-sidebar.collapsed .prova-item-title {
            display: none;
        }

        .provas-sidebar.collapsed .prova-item-meta {
            display: none;
        }

        .prova-item-meta {
            font-size: 0.75rem;
            color: var(--text-secondary);
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .prova-item-meta span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .prova-item-status {
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 10px;
            white-space: nowrap;
        }

        /* Área de Questões */
        .questoes-content {
            flex: 1;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            min-width: 0;
            display: flex;
            flex-direction: column;
        }

        .questoes-content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .questoes-content-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .questoes-content-title i {
            color: var(--accent);
        }

        .questoes-table-container {
            flex: 1;
            overflow: auto;
        }

        /* Empty state */
        .no-prova-selected {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-secondary);
            text-align: center;
            padding: 40px;
        }

        .no-prova-selected i {
            font-size: 3rem;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .no-prova-selected h3 {
            font-size: 1.125rem;
            margin-bottom: 8px;
            color: var(--text-main);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .provas-questoes-container {
                flex-direction: column;
            }

            .provas-sidebar {
                width: 100%;
                max-height: 300px;
            }

            .provas-sidebar.collapsed {
                width: 100%;
                max-height: 60px;
            }
        }

        /* Layout Integrado Conteúdos e Concursos (reutiliza estilos de provas) */
        .conteudos-sidebar,
        .concursos-sidebar {
            width: 320px;
            flex-shrink: 0;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            transition: width 0.3s ease, margin-right 0.3s ease;
            max-height: calc(100vh - 250px);
            overflow: hidden;
        }

        .conteudos-sidebar.collapsed,
        .concursos-sidebar.collapsed {
            width: 60px;
            margin-right: 0;
        }

        .conteudos-sidebar-header,
        .concursos-sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .conteudos-sidebar-title,
        .concursos-sidebar-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
            overflow: hidden;
        }

        .conteudos-sidebar.collapsed .conteudos-sidebar-title span,
        .concursos-sidebar.collapsed .concursos-sidebar-title span {
            display: none;
        }

        .conteudos-sidebar-title i,
        .concursos-sidebar-title i {
            color: var(--accent);
            font-size: 1.125rem;
        }

        .conteudos-list,
        .concursos-list {
            flex: 1;
            overflow-y: auto;
            padding-right: 8px;
        }

        .conteudos-list::-webkit-scrollbar,
        .concursos-list::-webkit-scrollbar {
            width: 6px;
        }

        .conteudos-list::-webkit-scrollbar-thumb,
        .concursos-list::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        .conteudo-item,
        .concurso-item {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .conteudo-item:hover,
        .concurso-item:hover {
            background: var(--hover-bg);
            border-color: var(--border-color);
        }

        .conteudo-item.active,
        .concurso-item.active {
            background: rgba(26, 62, 116, 0.1);
            border-color: var(--accent);
        }

        .conteudo-item-header,
        .concurso-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 8px;
        }

        .conteudo-item-title,
        .concurso-item-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-main);
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .conteudos-sidebar.collapsed .conteudo-item,
        .concursos-sidebar.collapsed .concurso-item {
            padding: 12px 8px;
            justify-content: center;
        }

        .conteudos-sidebar.collapsed .conteudo-item-header,
        .concursos-sidebar.collapsed .concurso-item-header {
            justify-content: center;
        }

        .conteudos-sidebar.collapsed .conteudo-item-title,
        .concursos-sidebar.collapsed .concurso-item-title {
            display: none;
        }

        .conteudos-sidebar.collapsed .conteudo-item-meta,
        .concursos-sidebar.collapsed .concurso-item-meta {
            display: none;
        }

        .conteudo-item-meta,
        .concurso-item-meta {
            font-size: 0.75rem;
            color: var(--text-secondary);
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }

        .conteudo-item-meta span,
        .concurso-item-meta span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .conteudo-type-badge {
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 10px;
            white-space: nowrap;
        }

        .conteudo-type-badge.type-conteudo {
            background: rgba(59, 130, 246, 0.15);
            color: #3b82f6;
        }

        .conteudo-type-badge.type-quiz {
            background: rgba(139, 92, 246, 0.15);
            color: #8b5cf6;
        }

        .conteudo-type-badge.type-biblioteca {
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;
        }

        /* Área de detalhe para conteúdos e concursos */
        .conteudo-content,
        .concurso-content {
            flex: 1;
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            min-width: 0;
            display: flex;
            flex-direction: column;
        }

        .conteudo-content-header,
        .concurso-content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .conteudo-content-title,
        .concurso-content-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .conteudo-content-title i,
        .concurso-content-title i {
            color: var(--accent);
        }

        .conteudo-detail-body,
        .concurso-detail-body {
            flex: 1;
            overflow: auto;
        }

        .detail-meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .detail-meta-item {
            background: var(--hover-bg);
            padding: 12px;
            border-radius: 8px;
        }

        .detail-meta-item label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            display: block;
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detail-meta-item span {
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--text-main);
        }

        .detail-description {
            background: var(--hover-bg);
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .detail-description h4 {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-main);
            margin-bottom: 8px;
        }

        .detail-description p {
            font-size: 0.95rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin: 0;
        }

        .detail-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        /* Empty state reutilizável */
        .no-item-selected {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-secondary);
            text-align: center;
            padding: 40px;
        }

        .no-item-selected i {
            font-size: 3rem;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .no-item-selected h3 {
            font-size: 1.125rem;
            margin-bottom: 8px;
            color: var(--text-main);
        }

        /* Responsive para conteúdos e concursos */
        @media (max-width: 1024px) {
            .provas-questoes-container,
            .conteudos-questoes-container,
            .concursos-questoes-container {
                flex-direction: column;
            }

            .conteudos-sidebar,
            .concursos-sidebar {
                width: 100%;
                max-height: 300px;
            }

            .conteudos-sidebar.collapsed,
            .concursos-sidebar.collapsed {
                width: 100%;
                max-height: 60px;
            }
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            height: 42px;
            min-width: 100px;
            padding: 0 20px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: var(--transition-base);
            text-decoration: none;
            white-space: nowrap;
        }

        .btn-sm {
            height: 32px;
            min-width: 80px;
            padding: 0 16px;
            font-size: 0.875rem;
        }

        .btn-block {
            width: 100%;
        }

        .btn-icon {
            min-width: 42px;
            width: 42px;
            padding: 0;
        }

        .btn-icon.btn-sm {
            min-width: 32px;
            width: 32px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: 0 2px 4px rgba(26, 62, 116, 0.2);
        }

        .btn-primary:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(26, 62, 116, 0.3);
        }

        .btn-secondary {
            background: var(--accent);
            color: white;
        }

        .btn-secondary:hover {
            background: #0097a7;
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-warning:hover {
            background: #d97706;
            transform: translateY(-2px);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary-light);
        }

        .btn-danger {
            background: var(--error);
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
        }

        .resource-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
            transition: var(--transition-base);
        }

        .resource-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary-light);
        }

        .resource-card h3 {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .resource-card h3 i {
            color: var(--accent);
        }

        .resource-card .meta {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 12px;
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
        }

        .resource-card .meta span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .resource-card p {
            font-size: 0.95rem;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        .resource-card .actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .resource-card .status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8125rem;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .status-published {
            background: #ecfdf5;
            color: #059669;
        }

        .status-draft {
            background: #fef3c7;
            color: #d97706;
        }

        .status-pending {
            background: #fee2e2;
            color: #dc2626;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-main);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            transition: var(--transition-base);
            background: var(--bg-card);
            color: var(--text-main);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        /* Import Section */
        .import-section {
            background: #f8fafc;
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            transition: var(--transition-base);
        }

        .import-section:hover {
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .import-section i {
            font-size: 3rem;
            color: var(--accent);
            margin-bottom: 16px;
        }

        .import-section h3 {
            font-size: 1.25rem;
            margin-bottom: 8px;
        }

        .import-section p {
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-base);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--bg-card);
            border-radius: 16px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(-20px);
            transition: var(--transition-base);
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition-base);
        }

        .modal-close:hover {
            color: var(--error);
        }

        .modal-body {
            padding: 24px;
        }

        .modal-footer {
            padding: 16px 24px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .stat-card i {
            font-size: 2rem;
            color: var(--accent);
            margin-bottom: 12px;
        }

        .stat-card .value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
        }

        .stat-card .label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        /* Table */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background: #f8fafc;
            font-weight: 600;
            color: var(--text-main);
        }

        tr:hover {
            background: var(--primary-light);
        }

        /* Component Error */
        .component-error {
            padding: 16px;
            background: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 8px;
            color: #856404;
            margin-bottom: 16px;
        }

        /* Dark Mode */
        body.dark-mode {
            --bg-body: #111827;
            --bg-card: #1f2937;
            --text-main: #f9fafb;
            --text-secondary: #9ca3af;
            --border-color: #374151;
            --primary-light: rgba(59, 130, 246, 0.2);
        }

        body.dark-mode .tabs-header { background: #1f2937; }
        body.dark-mode .import-section { background: #1f2937; }
        body.dark-mode th { background: #1f2937; }

        /* Responsive */
        @media (max-width: 768px) {
            /* Page Wrapper */
            .page-wrapper { 
                padding: 16px; 
            }
            
            /* Admin Header */
            .admin-header { margin-bottom: 24px; }
            .admin-header h1 { 
                font-size: 1.5rem; 
                gap: 12px;
            }
            .admin-header .subtitle { font-size: 1rem; }
            
            /* Tabs */
            .tabs-container { border-radius: 12px; }
            .tabs-header { 
                flex-direction: row;
                flex-wrap: nowrap;
                overflow-x: auto;
                overflow-y: hidden;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
                -ms-overflow-style: none;
                touch-action: pan-x;
            }
            .tabs-header::-webkit-scrollbar { 
                display: none; 
            }
            .tab-btn {
                flex: 0 0 auto;
                min-width: 120px;
                padding: 14px 16px;
                border-bottom: none;
                border-right: 1px solid var(--border-color);
                cursor: pointer;
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }
            .tab-btn:last-child { border-right: none; }
            .tab-btn:active {
                background: rgba(26, 62, 116, 0.1);
            }
            .tab-content { padding: 20px 16px; }
            
            /* Section Header */
            .section-header { 
                flex-direction: column; 
                align-items: flex-start;
                gap: 12px;
                margin-bottom: 20px;
            }
            .section-header h2 { font-size: 1.25rem; }
            
            /* Cards Grid */
            .cards-grid { 
                grid-template-columns: 1fr; 
                gap: 16px;
            }
            
            /* Resource Card */
            .resource-card { 
                padding: 16px; 
                border-radius: 10px;
            }
            .resource-card .actions {
                flex-direction: column;
            }
            .resource-card .actions .btn { width: 100%; }
            
            /* Stats Grid */
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
                margin-bottom: 24px;
            }
            .stat-card { padding: 16px 12px; }
            .stat-card .value { font-size: 1.5rem; }
            .stat-card .label { font-size: 0.8125rem; }
            
            /* Modal */
            .modal-overlay { 
                padding: 16px;
                align-items: flex-end;
            }
            .modal {
                width: 100%;
                max-width: 100%;
                max-height: 90vh;
                border-radius: 16px 16px 0 0;
                margin: 0;
            }
            .modal-header { padding: 16px; }
            .modal-header h2 { font-size: 1.125rem; }
            .modal-body { 
                padding: 16px; 
                max-height: 60vh;
                overflow-y: auto;
            }
            .modal-footer { 
                padding: 12px 16px;
                flex-direction: column;
                gap: 8px;
            }
            .modal-footer .btn { width: 100%; }
            
            /* Form Styles */
            .form-group { margin-bottom: 16px; }
            .form-group label { font-size: 0.9375rem; }
            .form-row {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 12px 14px;
                font-size: 1rem;
            }
            
            /* Table */
            .table-container { margin: 0 -16px; }
            table { font-size: 0.875rem; }
            th, td {
                padding: 10px 12px;
                white-space: nowrap;
            }
            
            /* Import Section */
            .import-section { padding: 24px 16px; }
            .import-section i { font-size: 2rem; }
            .import-section h3 { font-size: 1.125rem; }
            
            /* Integration Info */
            .integration-info { padding: 12px; }
            .integration-info-content p { font-size: 0.8125rem; }
            
            /* Import Options */
            .import-options { grid-template-columns: 1fr; }
            
            /* Buttons Mobile */
            .btn {
                height: 48px;
                min-width: 100%;
                padding: 0 20px;
            }
            .btn-sm {
                height: 40px;
                min-width: 100%;
                padding: 0 16px;
            }
            .section-actions { width: 100%; }
            .section-actions .btn { width: 100%; }
            
            /* Dados Mestres */
            .id-patterns-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            .id-pattern-card { padding: 16px; }
            
            /* Filters */
            .filtros-container { padding: 12px; }
            .filtros-container .form-row {
                grid-template-columns: 1fr 1fr;
                gap: 12px;
            }
            
            /* Form Actions in Modals */
            .form-actions {
                flex-direction: column;
                gap: 12px;
            }
            .form-actions .btn { width: 100%; }
        }

        /* Tablet Responsive */
        @media (min-width: 769px) and (max-width: 1024px) {
            .cards-grid { 
                grid-template-columns: repeat(2, 1fr); 
            }
            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .tab-btn { min-width: 130px; padding: 14px 18px; }
        }

        /* Skip Link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary);
            color: white;
            padding: 8px;
            z-index: 100000;
            transition: top 0.3s;
        }

        .skip-link:focus { top: 0; }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 99px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 99px;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Integration Info */
        .integration-info {
            background: #e0f2fe;
            border: 1px solid #7dd3fc;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .integration-info i {
            color: #0284c7;
            font-size: 1.25rem;
            margin-top: 2px;
        }

        .integration-info-content h4 {
            font-size: 0.95rem;
            font-weight: 700;
            color: #0369a1;
            margin-bottom: 4px;
        }

        .integration-info-content p {
            font-size: 0.875rem;
            color: #0c4a6e;
            margin: 0;
        }

        .integration-info-content a {
            color: #0284c7;
            text-decoration: underline;
        }

        /* Import Options */
        .import-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .import-option-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: var(--transition-base);
        }

        .import-option-card:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-md);
        }

        .import-option-card i {
            font-size: 1.5rem;
            color: var(--accent);
            margin-bottom: 12px;
        }

        .import-option-card h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .import-option-card p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin: 0;
        }

        /* Dados Mestres */
        .mestre-categoria {
            margin-bottom: 32px;
        }

        .mestre-categoria .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .mestre-categoria .section-header h3 {
            margin: 0;
            font-size: 1.125rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .mestre-categoria .section-header h3 i {
            color: var(--primary);
        }

        .mestre-items {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .mestre-item {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px 16px;
            transition: var(--transition-base);
        }

        .mestre-item:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .mestre-valor {
            font-weight: 500;
            color: var(--text-primary);
            font-size: 0.9375rem;
        }

        .mestre-actions {
            display: flex;
            gap: 8px;
        }

        .mestre-actions .btn-sm {
            padding: 6px 10px;
            font-size: 0.8125rem;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 24px;
            height: 24px;
            padding: 0 8px;
            background: var(--primary);
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 12px;
        }

        /* Filtros */
        .filtros-container {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 16px 20px;
        }

        .filtros-container .form-group {
            margin-bottom: 0;
        }

        .filtros-container select,
        .filtros-container input {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px 14px;
            font-size: 0.9375rem;
            color: var(--text-primary);
            transition: var(--transition-base);
        }

        .filtros-container select:focus,
        .filtros-container input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.1);
        }

        /* ID Patterns */
        .id-patterns-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .id-pattern-card {
            display: flex;
            align-items: center;
            gap: 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            transition: var(--transition-base);
        }

        .id-pattern-card:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-md);
        }

        .id-pattern-icon {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(var(--primary-rgb), 0.1);
            border-radius: 10px;
            font-size: 1.25rem;
            color: var(--primary);
        }

        .id-pattern-info {
            flex: 1;
        }

        .id-pattern-info h4 {
            margin: 0 0 4px 0;
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .id-pattern {
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.8125rem;
            color: var(--text-secondary);
            background: var(--bg-secondary);
            padding: 2px 8px;
            border-radius: 4px;
        }

        .id-pattern-count {
            min-width: 60px;
            text-align: center;
        }

        .id-pattern-count .counter {
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--accent);
        }
    </style>
</head>
<body>
    <!-- Loader Global -->
    <div id="loader-global">
        <div class="loader-dots">
            <div class="loader-dot"></div>
            <div class="loader-dot"></div>
            <div class="loader-dot"></div>
        </div>
    </div>

    <!-- Skip Link -->
    <a href="#main-content" class="skip-link">Pular para o conteúdo principal</a>

    <!-- Componentes -->
    <div id="accessibility-container"></div>
    <div id="header-container"></div>

    <div class="page-wrapper">
        <div class="page-svg-bg">
            <svg width="100%" height="100%" viewBox="0 0 1440 900" preserveAspectRatio="none">
                <path class="svg-curve svg-curve-1" d="M-100,200 C300,100 600,300 1500,200" fill="none" stroke="#1A3E74" stroke-width="1" />
                <path class="svg-curve svg-curve-2" d="M-100,400 C400,300 800,500 1600,350" fill="none" stroke="#00bcd4" stroke-width="1" />
                <path class="svg-curve svg-curve-3" d="M-100,600 C350,500 700,700 1500,550" fill="none" stroke="#1A3E74" stroke-width="1" />
                <path class="svg-curve svg-curve-4" d="M-100,750 C300,650 900,850 1600,700" fill="none" stroke="#00bcd4" stroke-width="1" />
            </svg>
        </div>

        <main id="main-content">
            <div class="admin-header">
                <h1><i class="fas fa-cogs"></i> Painel Administrativo</h1>
                <p class="subtitle">Gerenciamento completo de provas, conteúdos, questões e concursos</p>
            </div>

            <!-- Stats Overview -->
            <div class="stats-grid">
                <div class="stat-card">
                    <i class="fas fa-file-alt"></i>
                    <div class="value" id="total-provas">24</div>
                    <div class="label">Provas</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-book"></i>
                    <div class="value" id="total-conteudos">156</div>
                    <div class="label">Conteúdos</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-question-circle"></i>
                    <div class="value" id="total-questoes">5,678</div>
                    <div class="label">Questões</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-trophy"></i>
                    <div class="value" id="total-concursos">18</div>
                    <div class="label">Concursos</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-envelope"></i>
                    <div class="value" id="total-enviados">12</div>
                    <div class="label">Enviados</div>
                </div>
            </div>

            <!-- Tabs Container -->
            <div class="tabs-container">
                <div class="tabs-header">
                    <button class="tab-btn active" data-tab="provas" onclick="window.switchTab('provas');">
                        <i class="fas fa-file-alt"></i> Provas
                    </button>
                    <button class="tab-btn" data-tab="conteudos" onclick="window.switchTab('conteudos');">
                        <i class="fas fa-book"></i> Conteúdos
                    </button>
                    <!-- Botão ocultado - integrado na aba Provas -->
                    <button class="tab-btn" data-tab="questoes" onclick="window.switchTab('questoes');" style="display: none;">
                        <i class="fas fa-question-circle"></i> Questões
                    </button>
                    <button class="tab-btn" data-tab="concursos" onclick="window.switchTab('concursos');">
                        <i class="fas fa-trophy"></i> Concursos
                    </button>
                    <button class="tab-btn" data-tab="enviados" onclick="window.switchTab('enviados');">
                        <i class="fas fa-user-clock"></i> Conteúdo Enviados
                    </button>
                    <button class="tab-btn" data-tab="mestres" onclick="window.switchTab('mestres');">
                        <i class="fas fa-database"></i> Dados Mestres
                    </button>
                </div>

                <!-- Tab: Provas e Questões Integradas -->
                <div class="tab-content active" id="tab-provas">
                    <div class="section-header">
                        <h2><i class="fas fa-file-alt"></i> Provas e Questões</h2>
                        <div class="section-actions">
                            <button class="btn btn-outline" onclick="openModal('exportProva')">
                                <i class="fas fa-file-export"></i> Exportar
                            </button>
                            <button class="btn btn-primary" onclick="openModal('novaProva')">
                                <i class="fas fa-plus"></i> Nova Prova
                            </button>
                        </div>
                    </div>

                    <div class="provas-questoes-container">
                        <!-- Sidebar de Provas -->
                        <div class="provas-sidebar" id="provas-sidebar">
                            <div class="provas-sidebar-header">
                                <div class="provas-sidebar-title">
                                    <i class="fas fa-list"></i>
                                    <span>Lista de Provas</span>
                                </div>
                                <button class="sidebar-toggle-btn" onclick="toggleProvasSidebar()" title="Recuar/Expandir menu">
                                    <i class="fas fa-chevron-left" id="sidebar-toggle-icon"></i>
                                </button>
                            </div>
                            <div class="provas-list" id="provas-list">
                                <!-- Provas serão carregadas aqui via JavaScript -->
                                <div class="no-prova-selected" style="padding: 20px;">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <p>Carregando provas...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Área de Questões -->
                        <div class="questoes-content">
                            <div class="questoes-content-header">
                                <div class="questoes-content-title" id="questoes-content-title">
                                    <i class="fas fa-question-circle"></i>
                                    <span>Selecione uma prova para ver as questões</span>
                                </div>
                                <div class="section-actions">
                                    <button class="btn btn-outline" id="btn-add-questao-sidebar" onclick="openModal('novaQuestao')" style="display: none;">
                                        <i class="fas fa-plus"></i> Nova Questão
                                    </button>
                                </div>
                            </div>
                            <div class="questoes-table-container">
                                <div class="no-prova-selected" id="no-prova-message">
                                    <i class="fas fa-hand-pointer"></i>
                                    <h3>Nenhuma prova selecionada</h3>
                                    <p>Selecione uma prova no menu lateral para visualizar suas questões vinculadas.</p>
                                </div>
                                <table id="questoes-sidebar-table" style="display: none;">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Questão</th>
                                            <th>Área</th>
                                            <th>Dificuldade</th>
                                            <th>Status</th>
                                            <th>Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody id="questoes-sidebar-table-body">
                                        <!-- Questões serão carregadas aqui -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Dados Mestres -->
                <div class="tab-content" id="tab-mestres">
                    <div class="section-header">
                        <h2><i class="fas fa-database"></i> Dados Mestres</h2>
                        <div class="section-actions">
                            <button class="btn btn-primary" onclick="openModal('novoMestre')">
                                <i class="fas fa-plus"></i> Novo Item
                            </button>
                        </div>
                    </div>

                    <div class="integration-info">
                        <i class="fas fa-info-circle"></i>
                        <div class="integration-info-content">
                            <h4>Gerenciamento de Dados de Referência</h4>
                            <p>Os dados mestres são utilizados para alimentar os campos de seleção (dropdowns) nas abas de Provas, Conteúdos, Questões e Concursos. 
                               Mantenha estes dados atualizados para garantir consistência em todo o sistema.</p>
                        </div>
                    </div>

                    <!-- Categorias -->
                    <div class="section-header" style="margin-top: 24px;">
                        <h3><i class="fas fa-tag"></i> Categorias</h3>
                    </div>
                    <div class="cards-grid" id="categorias-grid">
                        <div class="resource-card">
                            <h3><i class="fas fa-tag"></i> Saúde Pública</h3>
                            <p>Questões relacionadas à saúde coletiva e políticas públicas.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-tag"></i> Farmacologia</h3>
                            <p>Medicamentos, interações e administração.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-tag"></i> Semiologia</h3>
                            <p>Sinais, sintomas e avaliação clínica.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-tag"></i> Urgência e Emergência</h3>
                            <p>Atendimento de emergência e cuidados críticos.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Tipos de Quiz -->
                    <div class="section-header" style="margin-top: 32px;">
                        <h3><i class="fas fa-gamepad"></i> Tipos de Quiz</h3>
                    </div>
                    <div class="cards-grid" id="tipos-quiz-grid">
                        <div class="resource-card">
                            <h3><i class="fas fa-list-alt"></i> prova_completa</h3>
                            <p>Simulado completo com todas as questões da prova original.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-bolt"></i> rapid_fire</h3>
                            <p>Questões rápidas com tempo limitado para cada resposta.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-trophy"></i> desafio</h3>
                            <p>Modo competição com ranking e pontuação.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-clock"></i> memoria_rapida</h3>
                            <p>Revisão rápida com foco em memorização.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Órgãos e Bancas -->
                    <div class="section-header" style="margin-top: 32px;">
                        <h3><i class="fas fa-building"></i> Órgãos</h3>
                    </div>
                    <div class="cards-grid" id="orgaos-grid">
                        <div class="resource-card">
                            <h3><i class="fas fa-hospital"></i> Ministério da Saúde</h3>
                            <p>Órgão federal responsável pela política nacional de saúde.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-university"></i> INEP</h3>
                            <p>Instituto Nacional de Estudos e Pesquisas Educacionais.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-balance-scale"></i> COREN</h3>
                            <p>Conselho Regional de Enfermagem.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>

                    <div class="section-header" style="margin-top: 32px;">
                        <h3><i class="fas fa-gavel"></i> Bancas Examinadoras</h3>
                    </div>
                    <div class="cards-grid" id="bancas-grid">
                        <div class="resource-card">
                            <h3><i class="fas fa-gavel"></i> Fundação Getúlio Vargas</h3>
                            <p>FGV - Concursos públicos e processos seletivos.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-gavel"></i> IBFC</h3>
                            <p>Instituto Brasileiro de Formação e Capacitação.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-gavel"></i> Instituto Consulplan</h3>
                            <p>Consultoria e Planejamento em Concursos.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Cargos/Áreas -->
                    <div class="section-header" style="margin-top: 32px;">
                        <h3><i class="fas fa-briefcase"></i> Cargos/Áreas</h3>
                    </div>
                    <div class="cards-grid" id="cargos-grid">
                        <div class="resource-card">
                            <h3><i class="fas fa-user-nurse"></i> Enfermeiro</h3>
                            <p>Profissional de nível superior responsável pelo cuidado integral.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-user-md"></i> Enfermeiro Auditor</h3>
                            <p>Análise e auditoria de procedimentos e contas hospitalares.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-ambulance"></i> Enfermeiro Emergência</h3>
                            <p>Atendimento em prontos-socorros e UTIs.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Estados -->
                    <div class="section-header" style="margin-top: 32px;">
                        <h3><i class="fas fa-map-marker-alt"></i> Estados</h3>
                    </div>
                    <div class="cards-grid" id="estados-grid">
                        <div class="resource-card">
                            <h3><i class="fas fa-map"></i> São Paulo</h3>
                            <p>SP - Estado com maior número de concursos.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-map"></i> Rio de Janeiro</h3>
                            <p>RJ - Concursos estaduais e municipais.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-map"></i> Minas Gerais</h3>
                            <p>MG - Concursos para saúde pública estadual.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Dificuldades -->
                    <div class="section-header" style="margin-top: 32px;">
                        <h3><i class="fas fa-signal"></i> Níveis de Dificuldade</h3>
                    </div>
                    <div class="cards-grid" id="dificuldades-grid">
                        <div class="resource-card">
                            <h3><i class="fas fa-star"></i> Fácil</h3>
                            <p>Questões básicas com conceitos fundamentais.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-star"></i><i class="fas fa-star"></i> Médio</h3>
                            <p>Questões que requerem conhecimento intermediário.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i> Difícil</h3>
                            <p>Questões avançadas e específicas.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Anos -->
                    <div class="section-header" style="margin-top: 32px;">
                        <h3><i class="fas fa-calendar-alt"></i> Anos Disponíveis</h3>
                    </div>
                    <div class="cards-grid" id="anos-grid">
                        <div class="resource-card">
                            <h3><i class="fas fa-calendar"></i> 2024</h3>
                            <p>Concursos e provas do ano corrente.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-calendar"></i> 2023</h3>
                            <p>Arquivo de provas do ano anterior.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Tempos Limite -->
                    <div class="section-header" style="margin-top: 32px;">
                        <h3><i class="fas fa-clock"></i> Tempos Limite</h3>
                    </div>
                    <div class="cards-grid" id="tempos-grid">
                        <div class="resource-card">
                            <h3><i class="fas fa-hourglass-half"></i> 30 minutos</h3>
                            <p>Tempo padrão para quizzes rápidos.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-hourglass-half"></i> 60 minutos</h3>
                            <p>Tempo para simulados médios.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-hourglass-half"></i> 120 minutos</h3>
                            <p>Tempo para provas completas.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Estilos de Numeração -->
                    <div class="section-header" style="margin-top: 32px;">
                        <h3><i class="fas fa-list-ol"></i> Estilos de Numeração</h3>
                    </div>
                    <div class="cards-grid" id="numeracao-grid">
                        <div class="resource-card">
                            <h3><i class="fas fa-hashtag"></i> letters</h3>
                            <p>A, B, C, D, E... (Alternativas)</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-hashtag"></i> numbers</h3>
                            <p>1, 2, 3, 4, 5... (Numeração)</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- Tags -->
                    <div class="section-header" style="margin-top: 32px;">
                        <h3><i class="fas fa-bookmark"></i> Tags</h3>
                    </div>
                    <div class="cards-grid" id="tags-grid">
                        <div class="resource-card">
                            <h3><i class="fas fa-tag"></i> enfermagem</h3>
                            <p>Tag principal para área de enfermagem.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-tag"></i> saude-publica</h3>
                            <p>Tag para conteúdo de saúde pública.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-tag"></i> farmacia</h3>
                            <p>Tag para conteúdos de farmacologia.</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Conteúdos -->
                <div class="tab-content" id="tab-conteudos">
                    <div class="section-header">
                        <h2><i class="fas fa-book"></i> Gerenciamento de Conteúdos</h2>
                        <div class="section-actions">
                            <button class="btn btn-outline" onclick="openModal('exportRecurso')">
                                <i class="fas fa-file-export"></i> Exportar
                            </button>
                            <button class="btn btn-primary" onclick="openModal('novoConteudo')">
                                <i class="fas fa-plus"></i> Novo Conteúdo
                            </button>
                        </div>
                    </div>

                    <div class="provas-questoes-container">
                        <!-- Sidebar de Conteúdos -->
                        <div class="conteudos-sidebar" id="conteudos-sidebar">
                            <div class="conteudos-sidebar-header">
                                <div class="conteudos-sidebar-title">
                                    <i class="fas fa-list"></i>
                                    <span>Lista de Conteúdos</span>
                                </div>
                                <button class="sidebar-toggle-btn" onclick="toggleConteudosSidebar()" title="Recuar/Expandir menu">
                                    <i class="fas fa-chevron-left" id="conteudos-sidebar-toggle-icon"></i>
                                </button>
                            </div>
                            <div class="conteudos-list" id="conteudos-list">
                                <!-- Conteúdos serão carregados aqui via JavaScript -->
                                <div class="no-item-selected" style="padding: 20px;">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <p>Carregando conteúdos...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Área de Detalhe do Conteúdo -->
                        <div class="conteudo-content">
                            <div class="conteudo-content-header">
                                <div class="conteudo-content-title" id="conteudo-content-title">
                                    <i class="fas fa-book"></i>
                                    <span>Selecione um conteúdo para visualizar</span>
                                </div>
                                <div class="section-actions">
                                    <button class="btn btn-outline" id="btn-new-conteudo-sidebar" onclick="openModal('novoConteudo')" style="display: none;">
                                        <i class="fas fa-plus"></i> Novo Conteúdo
                                    </button>
                                </div>
                            </div>
                            <div class="conteudo-detail-body">
                                <div class="no-item-selected" id="no-conteudo-message">
                                    <i class="fas fa-hand-pointer"></i>
                                    <h3>Nenhum conteúdo selecionado</h3>
                                    <p>Selecione um conteúdo no menu lateral para visualizar seus detalhes.</p>
                                </div>
                                <div id="conteudo-detail-view" style="display: none;">
                                    <div class="detail-meta-grid" id="conteudo-meta-grid">
                                        <!-- Metadados serão inseridos aqui -->
                                    </div>
                                    <div class="detail-description">
                                        <h4>Descrição</h4>
                                        <p id="conteudo-description-text"></p>
                                    </div>
                                    <div class="detail-actions" id="conteudo-actions">
                                        <!-- Botões de ação serão inseridos aqui -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Questões (Integrada na aba Provas) -->
                <div class="tab-content" id="tab-questoes" style="display: none;">
                    <div class="section-header">
                        <h2><i class="fas fa-question-circle"></i> Banco de Questões</h2>
                        <div class="section-actions">
                            <button class="btn btn-outline" onclick="openModal('exportQuestoes')">
                                <i class="fas fa-file-export"></i> Exportar
                            </button>
                            <button class="btn btn-outline" onclick="openModal('importQuestoes')">
                                <i class="fas fa-file-import"></i> Importar
                            </button>
                            <button class="btn btn-primary" onclick="openModal('novaQuestao')">
                                <i class="fas fa-plus"></i> Nova Questão
                            </button>
                        </div>
                    </div>

                    <div class="integration-info">
                        <i class="fas fa-link"></i>
                        <div class="integration-info-content">
                            <h4>Integração com Páginas do Usuário</h4>
                            <p>As questões cadastradas alimentam automaticamente as seguintes páginas: 
                                <a href="https://simulados-para-enfermagem.com.br/assets/app/html/estudopersonalizado.html" target="_blank">Estudo Personalizado</a>, 
                                <a href="https://simulados-para-enfermagem.com.br/assets/app/html/provascompletas.html" target="_blank">Provas Completas</a>, 
                                <a href="https://simulados-para-enfermagem.com.br/assets/app/html/simuladoreal.html" target="_blank">Simulado Real</a>, 
                                <a href="https://simulados-para-enfermagem.com.br/assets/app/html/memoriarapida.html" target="_blank">Memória Rápida</a>, 
                                <a href="https://simulados-para-enfermagem.com.br/assets/app/html/desafioinverso.html" target="_blank">Desafio Inverso</a> e 
                                <a href="https://simulados-para-enfermagem.com.br/assets/app/html/estudooffline.html" target="_blank">Estudo Offline</a>.
                            </p>
                        </div>
                    </div>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Questão</th>
                                    <th>Área</th>
                                    <th>Dificuldade</th>
                                    <th>Prova Vinculada</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="questoes-table">
                                <tr>
                                    <td>#1024</td>
                                    <td>Qual é a principal função da bomba de infusão...</td>
                                    <td>Enfermagem</td>
                                    <td><span class="status status-published">Fácil</span></td>
                                    <td><span class="status status-published">Ativo</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>#1023</td>
                                    <td>Em relação aos sinais vitais...</td>
                                    <td>Clínica</td>
                                    <td><span class="status status-draft">Média</span></td>
                                    <td><span class="status status-published">Ativo</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>#1022</td>
                                    <td>O que é e como procede a asepsia...</td>
                                    <td>Cirúrgica</td>
                                    <td><span class="status status-pending">Difícil</span></td>
                                    <td><span class="status status-draft">Inativo</span></td>
                                    <td>
                                        <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i></button>
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Tab: Concursos -->
                <div class="tab-content" id="tab-concursos">
                    <div class="section-header">
                        <h2><i class="fas fa-trophy"></i> Gerenciamento de Concursos</h2>
                        <div class="section-actions">
                            <button class="btn btn-outline" onclick="openModal('exportConcurso')">
                                <i class="fas fa-file-export"></i> Exportar
                            </button>
                            <button class="btn btn-primary" onclick="openModal('novoConcurso')">
                                <i class="fas fa-plus"></i> Novo Concurso
                            </button>
                        </div>
                    </div>

                    <div class="provas-questoes-container">
                        <!-- Sidebar de Concursos -->
                        <div class="concursos-sidebar" id="concursos-sidebar">
                            <div class="concursos-sidebar-header">
                                <div class="concursos-sidebar-title">
                                    <i class="fas fa-list"></i>
                                    <span>Lista de Concursos</span>
                                </div>
                                <button class="sidebar-toggle-btn" onclick="toggleConcursosSidebar()" title="Recuar/Expandir menu">
                                    <i class="fas fa-chevron-left" id="concursos-sidebar-toggle-icon"></i>
                                </button>
                            </div>
                            <div class="concursos-list" id="concursos-list">
                                <!-- Concursos serão carregados aqui via JavaScript -->
                                <div class="no-item-selected" style="padding: 20px;">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <p>Carregando concursos...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Área de Detalhe do Concurso -->
                        <div class="concurso-content">
                            <div class="concurso-content-header">
                                <div class="concurso-content-title" id="concurso-content-title">
                                    <i class="fas fa-trophy"></i>
                                    <span>Selecione um concurso para visualizar</span>
                                </div>
                                <div class="section-actions">
                                    <button class="btn btn-outline" id="btn-new-concurso-sidebar" onclick="openModal('novoConcurso')" style="display: none;">
                                        <i class="fas fa-plus"></i> Novo Concurso
                                    </button>
                                </div>
                            </div>
                            <div class="concurso-detail-body">
                                <div class="no-item-selected" id="no-concurso-message">
                                    <i class="fas fa-hand-pointer"></i>
                                    <h3>Nenhum concurso selecionado</h3>
                                    <p>Selecione um concurso no menu lateral para visualizar seus detalhes.</p>
                                </div>
                                <div id="concurso-detail-view" style="display: none;">
                                    <div class="detail-meta-grid" id="concurso-meta-grid">
                                        <!-- Metadados serão inseridos aqui -->
                                    </div>
                                    <div class="detail-description">
                                        <h4>Descrição</h4>
                                        <p id="concurso-description-text"></p>
                                    </div>
                                    <div class="detail-actions" id="concurso-actions">
                                        <!-- Botões de ação serão inseridos aqui -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Dados Enviados -->
                <div class="tab-content" id="tab-enviados">
                    <div class="section-header">
                        <h2><i class="fas fa-user-clock"></i> Conteúdo Enviado por Usuários</h2>
                        <div class="section-actions">
                            <button class="btn btn-outline" onclick="exportarQuestoesUsuario('csv')">
                                <i class="fas fa-file-export"></i> Exportar
                            </button>
                            <button class="btn btn-danger" onclick="rejeitarTodasQuestoes()">
                                <i class="fas fa-times-circle"></i> Rejeitar Todas
                            </button>
                            <button class="btn btn-primary" onclick="aprovarTodasQuestoes()">
                                <i class="fas fa-check-double"></i> Aprovar Todas
                            </button>
                        </div>
                    </div>

                    <!-- Filtros -->
                    <div class="filtros-container" style="margin-bottom: 24px; display: flex; gap: 16px; flex-wrap: wrap;">
                        <div class="form-group" style="margin-bottom: 0;">
                            <select id="filtro-status" onchange="filtrarQuestoesUsuario()" style="min-width: 150px;">
                                <option value="">Todos os Status</option>
                                <option value="pendente">Pendente</option>
                                <option value="aprovado">Aprovado</option>
                                <option value="rejeitado">Rejeitado</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <select id="filtro-topico" onchange="filtrarQuestoesUsuario()" style="min-width: 200px;">
                                <option value="">Todos os Tópicos</option>
                                <option value="anatomia">Anatomia e Fisiologia</option>
                                <option value="farmacologia">Farmacologia</option>
                                <option value="semiologia">Semiologia</option>
                                <option value="saude-publica">Saúde Pública</option>
                                <option value="urgencia-emergencia">Urgência e Emergência</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <input type="text" id="filtro-busca" onkeyup="filtrarQuestoesUsuario()" placeholder="Buscar por palavra-chave..." style="min-width: 250px;">
                        </div>
                    </div>

                    <div class="integration-info">
                        <i class="fas fa-info-circle"></i>
                        <div class="integration-info-content">
                            <h4>Gerenciamento de Submissões</h4>
                            <p>Os dados enviados pelos usuários através das páginas 
                                <a href="https://simulados-para-enfermagem.com.br/assets/app/html/meusconcursos.html" target="_blank">Meus Concursos</a> e 
                                <a href="https://simulados-para-enfermagem.com.br/assets/app/html/minhasquestoes.html" target="_blank">Minhas Questões</a> 
                                aparecem aqui para revisão. Questões aprovadas são incorporadas ao banco de dados principal da aba Questões, e concursos aprovados são incorporados à aba Concursos.
                            </p>
                        </div>
                    </div>

                    <div class="section-header" style="margin-top: 24px;">
                        <h3><i class="fas fa-question-circle"></i> Questões Enviadas</h3>
                    </div>

                    <div class="cards-grid" id="questoes-enviadas-grid">
                        <div class="resource-card" data-status="pendente" data-topico="farmacologia">
                            <h3><i class="fas fa-question-circle"></i> Questão #5001</h3>
                            <div class="meta">
                                <span><i class="fas fa-user"></i> Maria Santos</span>
                                <span><i class="fas fa-calendar"></i> 20/01/2024</span>
                            </div>
                            <p>Enviada em: 20/01/2024 - Questão sobre administração de medicamentos...</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-success"><i class="fas fa-check"></i> Aprovar</button>
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i> Editar</button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-times"></i> Rejeitar</button>
                            </div>
                        </div>
                        <div class="resource-card" data-status="pendente" data-topico="semiologia">
                            <h3><i class="fas fa-question-circle"></i> Questão #5002</h3>
                            <div class="meta">
                                <span><i class="fas fa-user"></i> Pedro Oliveira</span>
                                <span><i class="fas fa-calendar"></i> 19/01/2024</span>
                            </div>
                            <p>Questão sobre sinais vitais e suas variações...</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-success"><i class="fas fa-check"></i> Aprovar</button>
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i> Editar</button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-times"></i> Rejeitar</button>
                            </div>
                        </div>
                        <div class="resource-card" data-status="aprovado" data-topico="urgencia-emergencia">
                            <h3><i class="fas fa-question-circle"></i> Questão #5003</h3>
                            <div class="meta">
                                <span><i class="fas fa-user"></i> Ana Costa</span>
                                <span><i class="fas fa-calendar"></i> 18/01/2024</span>
                            </div>
                            <p>Dúvida sobre procedimentos de curativo...</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-success"><i class="fas fa-check"></i> Aprovar</button>
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i> Editar</button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-times"></i> Rejeitar</button>
                            </div>
                        </div>
                    </div>

                    <div class="section-header" style="margin-top: 32px;">
                        <h3><i class="fas fa-trophy"></i> Concursos Enviados</h3>
                    </div>

                    <div class="cards-grid" id="concursos-enviados-grid">
                        <div class="resource-card" data-status="pendente">
                            <h3><i class="fas fa-trophy"></i> Concurso #2001</h3>
                            <div class="meta">
                                <span><i class="fas fa-user"></i> Carlos Mendes</span>
                                <span><i class="fas fa-calendar"></i> 19/01/2024</span>
                            </div>
                            <p>Concurso da SMS de Belo Horizonte 2024...</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-success"><i class="fas fa-check"></i> Aprovar</button>
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i> Editar</button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-times"></i> Rejeitar</button>
                            </div>
                        </div>
                        <div class="resource-card">
                            <h3><i class="fas fa-trophy"></i> Concurso #2002</h3>
                            <div class="meta">
                                <span><i class="fas fa-user"></i> Fernanda Lima</span>
                                <span><i class="fas fa-calendar"></i> 17/01/2024</span>
                            </div>
                            <p>Concurso do HU de Brasília - Área de Urgência...</p>
                            <div class="actions">
                                <button class="btn btn-sm btn-success"><i class="fas fa-check"></i> Aprovar</button>
                                <button class="btn btn-sm btn-primary"><i class="fas fa-edit"></i> Editar</button>
                                <button class="btn btn-sm btn-danger"><i class="fas fa-times"></i> Rejeitar</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab: Dados Mestres -->
                <div class="tab-content" id="tab-mestres">
                    <div class="section-header">
                        <h2><i class="fas fa-database"></i> Dados Mestres</h2>
                        <div class="section-actions">
                            <button class="btn btn-outline" onclick="exportarDadosMestres()">
                                <i class="fas fa-file-export"></i> Exportar
                            </button>
                            <button class="btn btn-primary" onclick="openModal('novoDadoMestre')">
                                <i class="fas fa-plus"></i> Novo Item
                            </button>
                        </div>
                    </div>

                    <div class="integration-info">
                        <i class="fas fa-info-circle"></i>
                        <div class="integration-info-content">
                            <h4>Central de Configurações</h4>
                            <p>Gerencie aqui os dados mestres que alimentam os dropdowns e campos de seleção em todo o sistema.
                               Alterações feitas aqui afetam automaticamente os formulários de provas, conteúdos, questões e concursos.
                            </p>
                        </div>
                    </div>

                    <!-- Padrões de ID -->
                    <div class="section-header" style="margin-top: 32px; margin-bottom: 16px; border-bottom: 2px solid var(--accent); padding-bottom: 8px;">
                        <h3><i class="fas fa-barcode"></i> Padrões de Identificação</h3>
                    </div>
                    <div class="id-patterns-grid" id="id-patterns-grid">
                        <div class="id-pattern-card" data-prefix="PR">
                            <div class="id-pattern-icon"><i class="fas fa-file-alt"></i></div>
                            <div class="id-pattern-info">
                                <h4>Provas</h4>
                                <span class="id-pattern">PR0000/YYYY</span>
                            </div>
                            <div class="id-pattern-count">
                                <span class="counter" id="counter-PR">0000</span>
                            </div>
                        </div>
                        <div class="id-pattern-card" data-prefix="QZ">
                            <div class="id-pattern-icon"><i class="fas fa-gamepad"></i></div>
                            <div class="id-pattern-info">
                                <h4>Quiz/Simulados</h4>
                                <span class="id-pattern">QZ0000/YYYY</span>
                            </div>
                            <div class="id-pattern-count">
                                <span class="counter" id="counter-QZ">0000</span>
                            </div>
                        </div>
                        <div class="id-pattern-card" data-prefix="CO">
                            <div class="id-pattern-icon"><i class="fas fa-trophy"></i></div>
                            <div class="id-pattern-info">
                                <h4>Concursos</h4>
                                <span class="id-pattern">CO0000/YYYY</span>
                            </div>
                            <div class="id-pattern-count">
                                <span class="counter" id="counter-CO">0000</span>
                            </div>
                        </div>
                        <div class="id-pattern-card" data-prefix="CT">
                            <div class="id-pattern-icon"><i class="fas fa-book"></i></div>
                            <div class="id-pattern-info">
                                <h4>Conteúdos</h4>
                                <span class="id-pattern">CT0000/YYYY</span>
                            </div>
                            <div class="id-pattern-count">
                                <span class="counter" id="counter-CT">0000</span>
                            </div>
                        </div>
                        <div class="id-pattern-card" data-prefix="QS">
                            <div class="id-pattern-icon"><i class="fas fa-question-circle"></i></div>
                            <div class="id-pattern-info">
                                <h4>Questões</h4>
                                <span class="id-pattern">QS0000/YYYY</span>
                            </div>
                            <div class="id-pattern-count">
                                <span class="counter" id="counter-QS">0000</span>
                            </div>
                        </div>
                        <div class="id-pattern-card" data-prefix="CE">
                            <div class="id-pattern-icon"><i class="fas fa-user-clock"></i></div>
                            <div class="id-pattern-info">
                                <h4>Conteúdo Enviado</h4>
                                <span class="id-pattern">CE0000/YYYY</span>
                            </div>
                            <div class="id-pattern-count">
                                <span class="counter" id="counter-CE">0000</span>
                            </div>
                        </div>
                        <div class="id-pattern-card" data-prefix="DM">
                            <div class="id-pattern-icon"><i class="fas fa-database"></i></div>
                            <div class="id-pattern-info">
                                <h4>Dados Mestres</h4>
                                <span class="id-pattern">DM0000/YYYY</span>
                            </div>
                            <div class="id-pattern-count">
                                <span class="counter" id="counter-DM">0000</span>
                            </div>
                        </div>
                    </div>

                    <!-- Filtros -->
                    <div class="filtros-container" style="margin-bottom: 24px; display: flex; gap: 16px; flex-wrap: wrap;">
                        <div class="form-group" style="margin-bottom: 0;">
                            <select id="filtro-dadosMestres-tipo" onchange="filtrarDadosMestres()" style="min-width: 200px;">
                                <option value="">Todos os Tipos</option>
                                <option value="categoria">Categoria</option>
                                <option value="tipoRecurso">Tipo de Recurso</option>
                                <option value="tags">Tags</option>
                                <option value="tipoQuiz">Tipo de Quiz</option>
                                <option value="cargoArea">Cargo/Área</option>
                                <option value="orgao">Órgão</option>
                                <option value="banca">Banca</option>
                                <option value="ano">Ano</option>
                                <option value="tempoLimite">Tempo Limite</option>
                                <option value="numeroQuestoes">Número de Questões</option>
                                <option value="estiloNumeracao">Estilo de Numeração</option>
                                <option value="dificuldade">Dificuldade</option>
                                <option value="estado">Estado</option>
                                <option value="cidade">Cidade</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <input type="text" id="filtro-dadosMestres-busca" onkeyup="filtrarDadosMestres()" placeholder="Buscar por valor..." style="min-width: 250px;">
                        </div>
                    </div>

                    <!-- Grid de Dados Mestres por Categoria -->
                    <div id="dados-mestres-grid">
                        <!-- Categoria -->
                        <div class="mestre-categoria" data-tipo="categoria">
                            <div class="section-header" style="margin-top: 24px; border-bottom: 2px solid var(--primary); padding-bottom: 8px;">
                                <h3><i class="fas fa-folder"></i> Categoria</h3>
                                <span class="badge" id="count-categoria">0 itens</span>
                            </div>
                            <div class="mestre-items" id="mestre-categoria">
                                <div class="mestre-item">
                                    <span class="mestre-valor">Saúde</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">Concursos</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">Saúde Pública</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tipo de Recurso -->
                        <div class="mestre-categoria" data-tipo="tipoRecurso">
                            <div class="section-header" style="margin-top: 24px; border-bottom: 2px solid var(--primary); padding-bottom: 8px;">
                                <h3><i class="fas fa-file-alt"></i> Tipo de Recurso</h3>
                                <span class="badge" id="count-tipoRecurso">0 itens</span>
                            </div>
                            <div class="mestre-items" id="mestre-tipoRecurso">
                                <div class="mestre-item">
                                    <span class="mestre-valor">mapa_mental</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">video_aula</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">pdf</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">artigo</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Banca -->
                        <div class="mestre-categoria" data-tipo="banca">
                            <div class="section-header" style="margin-top: 24px; border-bottom: 2px solid var(--primary); padding-bottom: 8px;">
                                <h3><i class="fas fa-gavel"></i> Banca</h3>
                                <span class="badge" id="count-banca">0 itens</span>
                            </div>
                            <div class="mestre-items" id="mestre-banca">
                                <div class="mestre-item">
                                    <span class="mestre-valor">INEP</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">FUNDACAO GETULIO VARGAS</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">INSTITUTO CONSULPLAN</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">IBFC</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Dificuldade -->
                        <div class="mestre-categoria" data-tipo="dificuldade">
                            <div class="section-header" style="margin-top: 24px; border-bottom: 2px solid var(--primary); padding-bottom: 8px;">
                                <h3><i class="fas fa-signal"></i> Dificuldade</h3>
                                <span class="badge" id="count-dificuldade">0 itens</span>
                            </div>
                            <div class="mestre-items" id="mestre-dificuldade">
                                <div class="mestre-item">
                                    <span class="mestre-valor">fácil</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">médio</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">difícil</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tipo de Quiz -->
                        <div class="mestre-categoria" data-tipo="tipoQuiz">
                            <div class="section-header" style="margin-top: 24px; border-bottom: 2px solid var(--primary); padding-bottom: 8px;">
                                <h3><i class="fas fa-gamepad"></i> Tipo de Quiz</h3>
                                <span class="badge" id="count-tipoQuiz">0 itens</span>
                            </div>
                            <div class="mestre-items" id="mestre-tipoQuiz">
                                <div class="mestre-item">
                                    <span class="mestre-valor">custom - Personalizado</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">rapid_fire - Rapid Fire</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">desafio - Desafio</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">prova_completa - Prova Completa</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Estado -->
                        <div class="mestre-categoria" data-tipo="estado">
                            <div class="section-header" style="margin-top: 24px; border-bottom: 2px solid var(--primary); padding-bottom: 8px;">
                                <h3><i class="fas fa-map-marker-alt"></i> Estado</h3>
                                <span class="badge" id="count-estado">0 itens</span>
                            </div>
                            <div class="mestre-items" id="mestre-estado">
                                <div class="mestre-item">
                                    <span class="mestre-valor">SP</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">RJ</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">MG</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">RS</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">PR</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tags (exemplo de dados agrupados) -->
                        <div class="mestre-categoria" data-tipo="tags">
                            <div class="section-header" style="margin-top: 24px; border-bottom: 2px solid var(--primary); padding-bottom: 8px;">
                                <h3><i class="fas fa-tags"></i> Tags</h3>
                                <span class="badge" id="count-tags">0 itens</span>
                            </div>
                            <div class="mestre-items" id="mestre-tags">
                                <div class="mestre-item">
                                    <span class="mestre-valor">enfermagem</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">saúde</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="mestre-item">
                                    <span class="mestre-valor">concurseiro</span>
                                    <div class="mestre-actions">
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <div id="footer-container"></div>

    <!-- Modais -->
    <!-- Modal Nova Prova -->
    <div class="modal-overlay" id="modal-novaProva">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> Nova Prova Manual</h2>
                <button class="modal-close" onclick="closeModal('novaProva')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-novaProva">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="prova-titulo">Título da Prova</label>
                            <input type="text" id="prova-titulo" placeholder="Ex: ENEM 2023" required>
                        </div>
                        <div class="form-group">
                            <label for="prova-banca">Banca</label>
                            <input type="text" id="prova-banca" placeholder="Ex: INEP" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="prova-data">Data da Prova</label>
                            <input type="date" id="prova-data" required>
                        </div>
                        <div class="form-group">
                            <label for="prova-questoes">Número de Questões</label>
                            <input type="number" id="prova-questoes" placeholder="90" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="prova-descricao">Descrição</label>
                        <textarea id="prova-descricao" placeholder="Descrição da prova..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="prova-tags">Tags (separadas por vírgula)</label>
                        <input type="text" id="prova-tags" placeholder="enfermagem, saúde, concurseiro">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('novaProva')">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarProva()"><i class="fas fa-save"></i> Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal Novo Conteúdo -->
    <div class="modal-overlay" id="modal-novoConteudo">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> Novo Conteúdo</h2>
                <button class="modal-close" onclick="closeModal('novoConteudo')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-novoConteudo">
                    <div class="form-group">
                        <label for="conteudo-titulo">Título do Conteúdo</label>
                        <input type="text" id="conteudo-titulo" placeholder="Ex: Semiologia em Enfermagem" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="conteudo-tipo">Tipo</label>
                            <select id="conteudo-tipo">
                                <option value="conteudo">Conteúdo</option>
                                <option value="quiz">Quiz</option>
                                <option value="biblioteca">Biblioteca</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="conteudo-categoria">Categoria</label>
                            <select id="conteudo-categoria">
                                <option value="saude">Saúde</option>
                                <option value="clinica">Clínica</option>
                                <option value="cirurgica">Cirúrgica</option>
                                <option value="farmacia">Farmacologia</option>
                                <option value="gestao">Gestão</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="conteudo-descricao">Descrição</label>
                        <textarea id="conteudo-descricao" placeholder="Breve descrição do conteúdo..." style="min-height: 80px;"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="conteudo-url">URL do Conteúdo</label>
                            <input type="text" id="conteudo-url" placeholder="Link para o conteúdo completo">
                        </div>
                        <div class="form-group">
                            <label for="conteudo-thumbnail">Thumbnail URL</label>
                            <input type="text" id="conteudo-thumbnail" placeholder="Link da imagem de capa">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="conteudo-tags">Tags (separadas por vírgula)</label>
                        <input type="text" id="conteudo-tags" placeholder="Ex: enfermagem, semiologia, saúde">
                    </div>
                    <div class="form-group">
                        <label for="conteudo-conteudo">Conteúdo</label>
                        <textarea id="conteudo-conteudo" placeholder="Digite o conteúdo aqui..." style="min-height: 200px;"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('novoConteudo')">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarConteudo()"><i class="fas fa-save"></i> Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal Novo Concurso -->
    <div class="modal-overlay" id="modal-novoConcurso">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> Novo Concurso Manual</h2>
                <button class="modal-close" onclick="closeModal('novoConcurso')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-novoConcurso">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="concurso-titulo">Nome do Concurso</label>
                            <input type="text" id="concurso-titulo" placeholder="Ex: COREN-SP 2024" required>
                        </div>
                        <div class="form-group">
                            <label for="concurso-orgao">Órgão</label>
                            <input type="text" id="concurso-orgao" placeholder="Ex: COREN-SP" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="concurso-data">Data da Prova</label>
                            <input type="date" id="concurso-data" required>
                        </div>
                        <div class="form-group">
                            <label for="concurso-questoes">Número de Questões</label>
                            <input type="number" id="concurso-questoes" placeholder="50" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="concurso-descricao">Descrição</label>
                        <textarea id="concurso-descricao" placeholder="Descrição do concurso..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="concurso-tags">Tags (separadas por vírgula)</label>
                        <input type="text" id="concurso-tags" placeholder="enfermagem, concurso, concurseiro">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('novoConcurso')">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarConcurso()"><i class="fas fa-save"></i> Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal Nova Questão -->
    <div class="modal-overlay" id="modal-novaQuestao">
        <div class="modal" style="max-width: 700px;">
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> Nova Questão</h2>
                <button class="modal-close" onclick="closeModal('novaQuestao')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-novaQuestao">
                    <div class="form-group">
                        <label for="questao-texto">Enunciado da Questão</label>
                        <textarea id="questao-texto" placeholder="Digite o enunciado da questão..." required style="min-height: 100px;"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="questao-topico">Tópico/Área</label>
                            <input type="text" id="questao-topico" placeholder="Ex: Farmacologia" required>
                        </div>
                        <div class="form-group">
                            <label for="questao-dificuldade">Dificuldade</label>
                            <select id="questao-dificuldade" required>
                                <option value="">Selecione...</option>
                                <option value="fácil">Fácil</option>
                                <option value="médio">Médio</option>
                                <option value="difícil">Difícil</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="questao-tipo-prova">Tipo de Prova</label>
                            <input type="text" id="questao-tipo-prova" placeholder="Ex: Enem, Concursos">
                        </div>
                        <div class="form-group">
                            <label for="questao-ano">Ano</label>
                            <input type="text" id="questao-ano" placeholder="Ex: 2024">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="questao-banca">Banca</label>
                            <input type="text" id="questao-banca" placeholder="Ex: FGV, CESPE">
                        </div>
                        <div class="form-group">
                            <label for="questao-estado">Estado</label>
                            <input type="text" id="questao-estado" placeholder="Ex: SP, MG">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Alternativas</label>
                        <div id="alternativas-container">
                            <div class="alternativa-item" style="display: flex; gap: 8px; margin-bottom: 8px;">
                                <input type="radio" name="alternativa-correta" value="0" checked>
                                <input type="text" class="alternativa-texto" placeholder="Alternativa A" style="flex: 1;">
                            </div>
                            <div class="alternativa-item" style="display: flex; gap: 8px; margin-bottom: 8px;">
                                <input type="radio" name="alternativa-correta" value="1">
                                <input type="text" class="alternativa-texto" placeholder="Alternativa B" style="flex: 1;">
                            </div>
                            <div class="alternativa-item" style="display: flex; gap: 8px; margin-bottom: 8px;">
                                <input type="radio" name="alternativa-correta" value="2">
                                <input type="text" class="alternativa-texto" placeholder="Alternativa C" style="flex: 1;">
                            </div>
                            <div class="alternativa-item" style="display: flex; gap: 8px; margin-bottom: 8px;">
                                <input type="radio" name="alternativa-correta" value="3">
                                <input type="text" class="alternativa-texto" placeholder="Alternativa D" style="flex: 1;">
                            </div>
                        </div>
                        <button type="button" class="btn btn-outline btn-sm" onclick="adicionarAlternativa()" style="margin-top: 8px;">
                            <i class="fas fa-plus"></i> Adicionar Alternativa
                        </button>
                    </div>
                    <div class="form-group">
                        <label for="questao-explicacao">Explicação/Justificativa</label>
                        <textarea id="questao-explicacao" placeholder="Explique por que a alternativa correta é a resposta..." style="min-height: 80px;"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="questao-imagem">URL da Imagem (opcional)</label>
                            <input type="url" id="questao-imagem" placeholder="https://exemplo.com/imagem.jpg">
                        </div>
                        <div class="form-group">
                            <label for="questao-tags">Tags</label>
                            <input type="text" id="questao-tags" placeholder="enfermagem, medicação">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('novaQuestao')">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarQuestao()"><i class="fas fa-save"></i> Salvar Questão</button>
            </div>
        </div>
    </div>

    <!-- Modal Novo Quiz -->
    <div class="modal-overlay" id="modal-novoQuiz">
        <div class="modal" style="max-width: 700px;">
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> Novo Quiz/Simulado</h2>
                <button class="modal-close" onclick="closeModal('novoQuiz')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-novoQuiz">
                    <div class="form-group">
                        <label for="quiz-titulo">Título do Quiz</label>
                        <input type="text" id="quiz-titulo" placeholder="Ex: Simulado Enem 2024 - Área de Saúde" required>
                    </div>
                    <div class="form-group">
                        <label for="quiz-descricao">Descrição</label>
                        <textarea id="quiz-descricao" placeholder="Descrição do quiz..." style="min-height: 80px;"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="quiz-categoria">Categoria</label>
                            <select id="quiz-categoria">
                                <option value="">Selecione...</option>
                                <option value="enfermagem">Enfermagem</option>
                                <option value="saude">Saúde</option>
                                <option value="medicina">Medicina</option>
                                <option value="biomedicina">Biomedicina</option>
                                <option value="outros">Outros</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="quiz-tipo">Tipo de Quiz</label>
                            <select id="quiz-tipo" required>
                                <option value="">Selecione...</option>
                                <option value="prova_completa">Prova Completa</option>
                                <option value="simulado">Simulado</option>
                                <option value="quiz_rapido">Quiz Rápido</option>
                                <option value="desafio">Desafio</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="quiz-tipo-prova">Cargo/Área</label>
                            <input type="text" id="quiz-tipo-prova" placeholder="Ex: Enfermeiro, Técnico em Enfermagem">
                        </div>
                        <div class="form-group">
                            <label for="quiz-orgao">Órgão</label>
                            <input type="text" id="quiz-orgao" placeholder="Ex: COREN, Prefeitura">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="quiz-banca">Banca</label>
                            <input type="text" id="quiz-banca" placeholder="Ex: FGV, IBADE">
                        </div>
                        <div class="form-group">
                            <label for="quiz-ano">Ano</label>
                            <input type="text" id="quiz-ano" placeholder="Ex: 2024">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="quiz-tempo">Tempo Limite (minutos)</label>
                            <input type="number" id="quiz-tempo" placeholder="0 = sem limite" min="0">
                        </div>
                        <div class="form-group">
                            <label for="quiz-questoes">Número de Questões</label>
                            <input type="number" id="quiz-questoes" placeholder="Ex: 50" min="1">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="quiz-numeracao">Estilo de Numeração</label>
                        <select id="quiz-numeracao">
                            <option value="letters">A, B, C, D...</option>
                            <option value="numbers">1, 2, 3, 4...</option>
                            <option value="roman">I, II, III, IV...</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('novoQuiz')">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarQuiz()"><i class="fas fa-save"></i> Salvar Quiz</button>
            </div>
        </div>
    </div>

    <!-- Modal Novo Recurso de Biblioteca -->
    <div class="modal-overlay" id="modal-novoRecurso">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> Novo Recurso de Biblioteca</h2>
                <button class="modal-close" onclick="closeModal('novoRecurso')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-novoRecurso">
                    <div class="form-group">
                        <label for="recurso-titulo">Título do Recurso</label>
                        <input type="text" id="recurso-titulo" placeholder="Ex: Apostila de Farmacologia" required>
                    </div>
                    <div class="form-group">
                        <label for="recurso-descricao">Descrição</label>
                        <textarea id="recurso-descricao" placeholder="Descrição do recurso..." style="min-height: 100px;"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="recurso-categoria">Categoria</label>
                            <select id="recurso-categoria" required>
                                <option value="">Selecione...</option>
                                <option value="anatomia">Anatomia</option>
                                <option value="farmacologia">Farmacologia</option>
                                <option value="semiologia">Semiologia</option>
                                <option value="cirurgia">Cirurgia</option>
                                <option value="urgencia">Urgência e Emergência</option>
                                <option value="saude_publica">Saúde Pública</option>
                                <option value="administracao">Administração</option>
                                <option value="outros">Outros</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="recurso-tipo">Tipo de Recurso</label>
                            <select id="recurso-tipo" required>
                                <option value="">Selecione...</option>
                                <option value="pdf">PDF</option>
                                <option value="video">Vídeo</option>
                                <option value="mapa_mental">Mapa Mental</option>
                                <option value="resumo">Resumo</option>
                                <option value="infografico">Infográfico</option>
                                <option value="audio">Áudio</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="recurso-url">URL do Recurso</label>
                            <input type="url" id="recurso-url" placeholder="https://exemplo.com/arquivo.pdf" required>
                        </div>
                        <div class="form-group">
                            <label for="recurso-thumbnail">URL da Miniatura</label>
                            <input type="url" id="recurso-thumbnail" placeholder="https://exemplo.com/imagem.jpg">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="recurso-tags">Tags (separadas por vírgula)</label>
                        <input type="text" id="recurso-tags" placeholder="farmacologia, medicamentos, cálculo">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('novoRecurso')">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarRecurso()"><i class="fas fa-save"></i> Salvar Recurso</button>
            </div>
        </div>
    </div>

    <!-- Modal Adicionar Questão à Prova -->
    <div class="modal-overlay" id="modal-adicionarQuestaoProva">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-link"></i> Vincular Questão à Prova</h2>
                <button class="modal-close" onclick="closeModal('adicionarQuestaoProva')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-adicionarQuestaoProva">
                    <div class="form-group">
                        <label for="adicionar-prova-id">Selecionar Prova</label>
                        <select id="adicionar-prova-id" required>
                            <option value="">Selecione uma prova...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="adicionar-questao-id">Selecionar Questão</label>
                        <select id="adicionar-questao-id" required>
                            <option value="">Selecione uma questão...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="adicionar-questao-ordem">Ordem na Prova</label>
                        <input type="number" id="adicionar-questao-ordem" placeholder="Ordem de aparição" min="1" value="1">
                    </div>
                    <div class="integration-info">
                        <i class="fas fa-info-circle"></i>
                        <div class="integration-info-content">
                            <h4>Vinculação de Questões</h4>
                            <p>Esta ação vincula uma questão existente à prova selecionada. A questão poderá ser visualizada quando os usuários iniciarem esta prova.</p>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('adicionarQuestaoProva')">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarVinculoQuestaoProva()"><i class="fas fa-link"></i> Vincular Questão</button>
            </div>
        </div>
    </div>

    <!-- Modal Nova Questão de Usuário -->
    <div class="modal-overlay" id="modal-novaQuestaoUsuario">
        <div class="modal" style="max-width: 700px;">
            <div class="modal-header">
                <h2><i class="fas fa-user-plus"></i> Inserir Questão de Usuário</h2>
                <button class="modal-close" onclick="closeModal('novaQuestaoUsuario')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-novaQuestaoUsuario">
                    <div class="form-group">
                        <label for="questao-usuario-email">E-mail do Usuário</label>
                        <input type="email" id="questao-usuario-email" placeholder="usuario@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="questao-usuario-texto">Enunciado da Questão</label>
                        <textarea id="questao-usuario-texto" placeholder="Digite o enunciado da questão..." required style="min-height: 100px;"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="questao-usuario-topico">Tópico/Área</label>
                            <input type="text" id="questao-usuario-topico" placeholder="Ex: Farmacologia" required>
                        </div>
                        <div class="form-group">
                            <label for="questao-usuario-dificuldade">Dificuldade</label>
                            <select id="questao-usuario-dificuldade" required>
                                <option value="">Selecione...</option>
                                <option value="fácil">Fácil</option>
                                <option value="médio">Médio</option>
                                <option value="difícil">Difícil</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Alternativas</label>
                        <div id="alternativas-usuario-container">
                            <div class="alternativa-item" style="display: flex; gap: 8px; margin-bottom: 8px;">
                                <input type="radio" name="alternativa-usuario-correta" value="0" checked>
                                <input type="text" class="alternativa-usuario-texto" placeholder="Alternativa A" style="flex: 1;">
                            </div>
                            <div class="alternativa-item" style="display: flex; gap: 8px; margin-bottom: 8px;">
                                <input type="radio" name="alternativa-usuario-correta" value="1">
                                <input type="text" class="alternativa-usuario-texto" placeholder="Alternativa B" style="flex: 1;">
                            </div>
                            <div class="alternativa-item" style="display: flex; gap: 8px; margin-bottom: 8px;">
                                <input type="radio" name="alternativa-usuario-correta" value="2">
                                <input type="text" class="alternativa-usuario-texto" placeholder="Alternativa C" style="flex: 1;">
                            </div>
                            <div class="alternativa-item" style="display: flex; gap: 8px; margin-bottom: 8px;">
                                <input type="radio" name="alternativa-usuario-correta" value="3">
                                <input type="text" class="alternativa-usuario-texto" placeholder="Alternativa D" style="flex: 1;">
                            </div>
                        </div>
                        <button type="button" class="btn btn-outline btn-sm" onclick="adicionarAlternativaUsuario()" style="margin-top: 8px;">
                            <i class="fas fa-plus"></i> Adicionar Alternativa
                        </button>
                    </div>
                    <div class="form-group">
                        <label for="questao-usuario-explicacao">Explicação/Justificativa</label>
                        <textarea id="questao-usuario-explicacao" placeholder="Explique por que a alternativa correta é a resposta..." style="min-height: 80px;"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="questao-usuario-imagem">URL da Imagem (opcional)</label>
                            <input type="url" id="questao-usuario-imagem" placeholder="https://exemplo.com/imagem.jpg">
                        </div>
                        <div class="form-group">
                            <label for="questao-usuario-status">Status Admin</label>
                            <select id="questao-usuario-status">
                                <option value="pendente">Pendente</option>
                                <option value="aprovado">Aprovado</option>
                                <option value="rejeitado">Rejeitado</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="questao-usuario-tags">Tags</label>
                        <input type="text" id="questao-usuario-tags" placeholder="enfermagem, medicação">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="questao-usuario-publica"> Tornar pública após aprovação
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('novaQuestaoUsuario')">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarQuestaoUsuario()"><i class="fas fa-save"></i> Salvar Questão</button>
            </div>
        </div>
    </div>

    <!-- Modal Novo Tópico de Estudo -->
    <div class="modal-overlay" id="modal-novoTopicoEstudo">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> Novo Tópico de Estudo</h2>
                <button class="modal-close" onclick="closeModal('novoTopicoEstudo')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-novoTopicoEstudo">
                    <div class="form-group">
                        <label for="topico-concurso-id">ID do Concurso</label>
                        <input type="text" id="topico-concurso-id" placeholder="ID do concurso relacionado">
                    </div>
                    <div class="form-group">
                        <label for="topico-usuario-email">E-mail do Usuário</label>
                        <input type="email" id="topico-usuario-email" placeholder="usuario@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="topico-nome">Nome do Tópico</label>
                        <input type="text" id="topico-nome" placeholder="Ex: NOÇÕES DE SAÚDE PÚBLICA" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="topico-peso">Peso (%)</label>
                            <input type="number" id="topico-peso" placeholder="Ex: 12.5" step="0.1" min="0" max="100">
                        </div>
                        <div class="form-group">
                            <label for="topico-nivel-progresso">Nível de Progresso (%)</label>
                            <input type="number" id="topico-nivel-progresso" placeholder="Ex: 50" min="0" max="100">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="topico-questoes-praticadas">Questões Praticadas</label>
                            <input type="number" id="topico-questoes-praticadas" placeholder="0" min="0">
                        </div>
                        <div class="form-group">
                            <label for="topico-nivel-dominio">Nível de Domínio</label>
                            <select id="topico-nivel-dominio">
                                <option value="">Selecione...</option>
                                <option value="iniciante">Iniciante</option>
                                <option value="intermediário">Intermediário</option>
                                <option value="avançado">Avançado</option>
                                <option value="especialista">Especialista</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="topico-estudado">
                            <input type="checkbox" id="topico-estudado"> Já Estudado
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="topico-ultimo-estudo">Último Estudo</label>
                        <input type="datetime-local" id="topico-ultimo-estudo">
                    </div>
                    <div class="form-group">
                        <label for="topico-notas">Notas</label>
                        <textarea id="topico-notas" placeholder="Notas sobre o progresso..." style="min-height: 80px;"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('novoTopicoEstudo')">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarTopicoEstudo()"><i class="fas fa-save"></i> Salvar Tópico</button>
            </div>
        </div>
    </div>

    <!-- Modal Novo Desempenho de Usuário -->
    <div class="modal-overlay" id="modal-novoDesempenho">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> Novo Registro de Desempenho</h2>
                <button class="modal-close" onclick="closeModal('novoDesempenho')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-novoDesempenho">
                    <div class="form-group">
                        <label for="desempenho-usuario-email">E-mail do Usuário</label>
                        <input type="email" id="desempenho-usuario-email" placeholder="usuario@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="desempenho-topico">Tópico</label>
                        <input type="text" id="desempenho-topico" placeholder="Ex: Farmacologia" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="desempenho-corretas">Respostas Corretas</label>
                            <input type="number" id="desempenho-corretas" placeholder="0" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="desempenho-total">Total de Respostas</label>
                            <input type="number" id="desempenho-total" placeholder="0" min="0" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="desempenho-ultimo">Último Estudo</label>
                        <input type="datetime-local" id="desempenho-ultimo">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('novoDesempenho')">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarDesempenho()"><i class="fas fa-save"></i> Salvar Desempenho</button>
            </div>
        </div>
    </div>

    <!-- Modal Nova Tentativa de Quiz -->
    <div class="modal-overlay" id="modal-novaTentativaQuiz">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> Nova Tentativa de Quiz</h2>
                <button class="modal-close" onclick="closeModal('novaTentativaQuiz')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-novaTentativaQuiz">
                    <div class="form-group">
                        <label for="tentativa-usuario-email">E-mail do Usuário</label>
                        <input type="email" id="tentativa-usuario-email" placeholder="usuario@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="tentativa-titulo">Título do Quiz</label>
                        <input type="text" id="tentativa-titulo" placeholder="Ex: Simulado Enem 2024" required>
                    </div>
                    <div class="form-group">
                        <label for="tentativa-tipo">Tipo de Quiz</label>
                        <select id="tentativa-tipo" required>
                            <option value="">Selecione...</option>
                            <option value="custom">Personalizado</option>
                            <option value="rapid_fire">Rapid Fire</option>
                            <option value="desafio">Desafio</option>
                            <option value="prova_completa">Prova Completa</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tentativa-questoes">Total de Questões</label>
                            <input type="number" id="tentativa-questoes" placeholder="0" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="tentativa-tempo">Tempo Gasto (segundos)</label>
                            <input type="number" id="tentativa-tempo" placeholder="0" min="0">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tentativa-corretas">Corretas</label>
                            <input type="number" id="tentativa-corretas" placeholder="0" min="0">
                        </div>
                        <div class="form-group">
                            <label for="tentativa-erradas">Erradas</label>
                            <input type="number" id="tentativa-erradas" placeholder="0" min="0">
                        </div>
                        <div class="form-group">
                            <label for="tentativa-puladas">Puladas</label>
                            <input type="number" id="tentativa-puladas" placeholder="0" min="0">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="tentativa-concluida">Data de Conclusão</label>
                        <input type="datetime-local" id="tentativa-concluida">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('novaTentativaQuiz')">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarTentativaQuiz()"><i class="fas fa-save"></i> Salvar Tentativa</button>
            </div>
        </div>
    </div>

    <!-- Modal Importar Prova -->
    <div class="modal-overlay" id="modal-importProva">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-file-import"></i> Importar Provas</h2>
                <button class="modal-close" onclick="closeModal('importProva')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-options">
                    <div class="import-option-card" onclick="alert('Funcionalidade de importação CSV em desenvolvimento')">
                        <i class="fas fa-file-csv"></i>
                        <h4>Importar CSV</h4>
                        <p>Importe provas usando arquivo CSV estruturado.</p>
                    </div>
                    <div class="import-option-card" onclick="alert('Funcionalidade de importação JSON em desenvolvimento')">
                        <i class="fas fa-file-code"></i>
                        <h4>Importar JSON</h4>
                        <p>Importe provas usando arquivo JSON estruturado.</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="prova-file">Selecionar Arquivo</label>
                    <input type="file" id="prova-file" accept=".csv,.json">
                </div>
                <p style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 16px;">
                    <i class="fas fa-download"></i> 
                    <a href="#" onclick="alert('Template será baixado')">Baixe o modelo de template</a> para garantir a estrutura correta dos dados.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('importProva')">Cancelar</button>
                <button class="btn btn-primary" onclick="importarProva()"><i class="fas fa-upload"></i> Importar</button>
            </div>
        </div>
    </div>

    <!-- Modal Importar Conteúdo -->
    <div class="modal-overlay" id="modal-importConteudo">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-file-import"></i> Importar Conteúdos</h2>
                <button class="modal-close" onclick="closeModal('importConteudo')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-options">
                    <div class="import-option-card" onclick="alert('Funcionalidade de importação CSV em desenvolvimento')">
                        <i class="fas fa-file-csv"></i>
                        <h4>Importar CSV</h4>
                        <p>Importe conteúdos usando arquivo CSV estruturado.</p>
                    </div>
                    <div class="import-option-card" onclick="alert('Funcionalidade de importação JSON em desenvolvimento')">
                        <i class="fas fa-file-code"></i>
                        <h4>Importar JSON</h4>
                        <p>Importe conteúdos usando arquivo JSON estruturado.</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="conteudo-file">Selecionar Arquivo</label>
                    <input type="file" id="conteudo-file" accept=".csv,.json">
                </div>
                <p style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 16px;">
                    <i class="fas fa-download"></i> 
                    <a href="#" onclick="alert('Template será baixado')">Baixe o modelo de template</a> para garantir a estrutura correta dos dados.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('importConteudo')">Cancelar</button>
                <button class="btn btn-primary" onclick="importarConteudo()"><i class="fas fa-upload"></i> Importar</button>
            </div>
        </div>
    </div>

    <!-- Modal Importar Questões -->
    <div class="modal-overlay" id="modal-importQuestoes">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-file-import"></i> Importar Questões</h2>
                <button class="modal-close" onclick="closeModal('importQuestoes')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-options">
                    <div class="import-option-card" onclick="alert('Funcionalidade de importação CSV em desenvolvimento')">
                        <i class="fas fa-file-csv"></i>
                        <h4>Importar CSV</h4>
                        <p>Importe questões usando arquivo CSV estruturado.</p>
                    </div>
                    <div class="import-option-card" onclick="alert('Funcionalidade de importação JSON em desenvolvimento')">
                        <i class="fas fa-file-code"></i>
                        <h4>Importar JSON</h4>
                        <p>Importe questões usando arquivo JSON estruturado.</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="questoes-file">Selecionar Arquivo</label>
                    <input type="file" id="questoes-file" accept=".csv,.json">
                </div>
                <p style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 16px;">
                    <i class="fas fa-download"></i> 
                    <a href="#" onclick="alert('Template será baixado')">Baixe o modelo de template</a> para garantir a estrutura correta dos dados.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('importQuestoes')">Cancelar</button>
                <button class="btn btn-primary" onclick="importarQuestoes()"><i class="fas fa-upload"></i> Importar</button>
            </div>
        </div>
    </div>

    <!-- Modal Importar Concurso -->
    <div class="modal-overlay" id="modal-importConcurso">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-file-import"></i> Importar Concursos</h2>
                <button class="modal-close" onclick="closeModal('importConcurso')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="import-options">
                    <div class="import-option-card" onclick="alert('Funcionalidade de importação CSV em desenvolvimento')">
                        <i class="fas fa-file-csv"></i>
                        <h4>Importar CSV</h4>
                        <p>Importe concursos usando arquivo CSV estruturado.</p>
                    </div>
                    <div class="import-option-card" onclick="alert('Funcionalidade de importação JSON em desenvolvimento')">
                        <i class="fas fa-file-code"></i>
                        <h4>Importar JSON</h4>
                        <p>Importe concursos usando arquivo JSON estruturado.</p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="concurso-file">Selecionar Arquivo</label>
                    <input type="file" id="concurso-file" accept=".csv,.json">
                </div>
                <p style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 16px;">
                    <i class="fas fa-download"></i> 
                    <a href="#" onclick="alert('Template será baixado')">Baixe o modelo de template</a> para garantir a estrutura correta dos dados.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('importConcurso')">Cancelar</button>
                <button class="btn btn-primary" onclick="importarConcurso()"><i class="fas fa-upload"></i> Importar</button>
            </div>
        </div>
    </div>

    <!-- Modal Exportar Provas -->
    <div class="modal-overlay" id="modal-exportProva">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-file-export"></i> Exportar Provas</h2>
                <button class="modal-close" onclick="closeModal('exportProva')">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 20px; color: var(--text-secondary);">Selecione o formato de exportação para as provas:</p>
                <div class="import-options">
                    <div class="import-option-card" onclick="exportarProvas('csv'); closeModal('exportProva');">
                        <i class="fas fa-file-csv"></i>
                        <h4>Exportar CSV</h4>
                        <p>Formato ideal para planilhas e análise de dados.</p>
                    </div>
                    <div class="import-option-card" onclick="exportarProvas('json'); closeModal('exportProva');">
                        <i class="fas fa-file-code"></i>
                        <h4>Exportar JSON</h4>
                        <p>Formato ideal para integrações e sistemas.</p>
                    </div>
                </div>
                <p style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 16px;">
                    <i class="fas fa-info-circle"></i> 
                    O arquivo será baixado automaticamente após a seleção.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('exportProva')">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal Exportar Recursos/Biblioteca -->
    <div class="modal-overlay" id="modal-exportRecurso">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-file-export"></i> Exportar Conteúdos</h2>
                <button class="modal-close" onclick="closeModal('exportRecurso')">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 20px; color: var(--text-secondary);">Selecione o formato de exportação para os conteúdos:</p>
                <div class="import-options">
                    <div class="import-option-card" onclick="exportarRecursos('csv'); closeModal('exportRecurso');">
                        <i class="fas fa-file-csv"></i>
                        <h4>Exportar CSV</h4>
                        <p>Formato ideal para planilhas e análise de dados.</p>
                    </div>
                    <div class="import-option-card" onclick="exportarRecursos('json'); closeModal('exportRecurso');">
                        <i class="fas fa-file-code"></i>
                        <h4>Exportar JSON</h4>
                        <p>Formato ideal para integrações e sistemas.</p>
                    </div>
                </div>
                <p style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 16px;">
                    <i class="fas fa-info-circle"></i> 
                    O arquivo será baixado automaticamente após a seleção.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('exportRecurso')">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal Exportar Questões -->
    <div class="modal-overlay" id="modal-exportQuestoes">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-file-export"></i> Exportar Questões</h2>
                <button class="modal-close" onclick="closeModal('exportQuestoes')">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 20px; color: var(--text-secondary);">Selecione o formato de exportação para as questões:</p>
                <div class="import-options">
                    <div class="import-option-card" onclick="exportarQuestoes('csv'); closeModal('exportQuestoes');">
                        <i class="fas fa-file-csv"></i>
                        <h4>Exportar CSV</h4>
                        <p>Formato ideal para planilhas e análise de dados.</p>
                    </div>
                    <div class="import-option-card" onclick="exportarQuestoes('json'); closeModal('exportQuestoes');">
                        <i class="fas fa-file-code"></i>
                        <h4>Exportar JSON</h4>
                        <p>Formato ideal para integrações e sistemas.</p>
                    </div>
                </div>
                <p style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 16px;">
                    <i class="fas fa-info-circle"></i> 
                    O arquivo será baixado automaticamente após a seleção.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('exportQuestoes')">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal Exportar Concursos -->
    <div class="modal-overlay" id="modal-exportConcurso">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-file-export"></i> Exportar Concursos</h2>
                <button class="modal-close" onclick="closeModal('exportConcurso')">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 20px; color: var(--text-secondary);">Selecione o formato de exportação para os concursos:</p>
                <div class="import-options">
                    <div class="import-option-card" onclick="exportarConcursos('csv'); closeModal('exportConcurso');">
                        <i class="fas fa-file-csv"></i>
                        <h4>Exportar CSV</h4>
                        <p>Formato ideal para planilhas e análise de dados.</p>
                    </div>
                    <div class="import-option-card" onclick="exportarConcursos('json'); closeModal('exportConcurso');">
                        <i class="fas fa-file-code"></i>
                        <h4>Exportar JSON</h4>
                        <p>Formato ideal para integrações e sistemas.</p>
                    </div>
                </div>
                <p style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 16px;">
                    <i class="fas fa-info-circle"></i>
                    O arquivo será baixado automaticamente após a seleção.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('exportConcurso')">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal Novo Dado Mestre -->
    <div class="modal-overlay" id="modal-novoDadoMestre">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h2><i class="fas fa-database"></i> Novo Dado Mestre</h2>
                <button class="modal-close" onclick="closeModal('novoDadoMestre')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-novoDadoMestre">
                    <div class="form-group">
                        <label for="dadoMestre-tipo">Tipo de Dado Mestre</label>
                        <select id="dadoMestre-tipo" onchange="mostrarCamposDadoMestre()" required>
                            <option value="">Selecione o tipo...</option>
                            <option value="categoria">Categoria</option>
                            <option value="tipoRecurso">Tipo de Recurso</option>
                            <option value="tags">Tags</option>
                            <option value="tipoQuiz">Tipo de Quiz</option>
                            <option value="cargoArea">Cargo/Área</option>
                            <option value="orgao">Órgão</option>
                            <option value="banca">Banca</option>
                            <option value="ano">Ano</option>
                            <option value="tempoLimite">Tempo Limite</option>
                            <option value="numeroQuestoes">Número de Questões</option>
                            <option value="estiloNumeracao">Estilo de Numeração</option>
                            <option value="dificuldade">Dificuldade</option>
                            <option value="estado">Estado</option>
                            <option value="cidade">Cidade</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="dadoMestre-valor">Valor</label>
                        <input type="text" id="dadoMestre-valor" placeholder="Digite o valor do dado mestre" required>
                    </div>
                    <div class="form-group" id="grupo-dadoMestre-descricao" style="display: none;">
                        <label for="dadoMestre-descricao">Descrição</label>
                        <textarea id="dadoMestre-descricao" rows="3" placeholder="Digite uma descrição opcional"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('novoDadoMestre')">Cancelar</button>
                <button class="btn btn-primary" onclick="salvarDadoMestre()"><i class="fas fa-save"></i> Salvar Dado Mestre</button>
            </div>
        </div>
    </div>

    <!-- Scripts dos Componentes -->
    <script src="https://simulados-para-enfermagem.com.br/assets/components/js/header.js"></script>
    <script src="https://simulados-para-enfermagem.com.br/assets/components/js/accessibility.js"></script>
    <script src="https://simulados-para-enfermagem.com.br/assets/components/js/footer.js"></script>

    <!-- Script Principal -->
    <script>
    (function() {
        'use strict';

        // Configuração
        var Config = {
            htmlPath: 'https://simulados-para-enfermagem.com.br/assets/components/html/',
            components: [
                { id: 'accessibility-container', file: 'accessibility.html', name: 'Painel de Acessibilidade' },
                { id: 'header-container', file: 'header.html', name: 'Cabeçalho' },
                { id: 'footer-container', file: 'footer.html', name: 'Rodapé' }
            ]
        };

        // Carregador de Componentes
        var ComponentLoader = {
            loadComponent: function(comp) {
                var container = document.getElementById(comp.id);
                if (!container) return Promise.resolve(false);

                return fetch(Config.htmlPath + comp.file)
                    .then(function(response) {
                        if (!response.ok) throw new Error('HTTP ' + response.status);
                        return response.text();
                    })
                    .then(function(html) {
                        if (!html || html.trim() === '') throw new Error('Vazio');
                        container.innerHTML = html;
                        return true;
                    })
                    .catch(function(error) {
                        console.error('[ERRO] ' + comp.name + ':', error.message);
                        container.innerHTML = '<div class="component-error">Erro ao carregar componente</div>';
                        return false;
                    });
            },
            init: function() {
                var self = this;
                var promises = Config.components.map(function(comp) {
                    return self.loadComponent(comp);
                }, this);

                // Promise.allSettled garante que todas as promises terminam (mesmo com erros)
                Promise.allSettled(promises).then(function(results) {
                    document.dispatchEvent(new CustomEvent('headerComponentsLoaded'));
                    AdminPanel.init();
                });
            }
        };

        // Gerenciador do Admin Panel
        var AdminPanel = {
            init: function() {
                this.initTabs();
                this.initModais();
                this.hideLoader();
                inicializarContadoresID();
                
                // Carregar dados automaticamente
                this.carregarDadosIniciais();
            },
            
            carregarDadosIniciais: function() {
                // Carregar dados mestres e popular dropdowns
                if (typeof window.popularDropdowns === 'function') {
                    window.popularDropdowns();
                }
                
                // Carregar dados das abas
                if (typeof window.carregarProvas === 'function') {
                    window.carregarProvas();
                }
                if (typeof window.carregarConcursos === 'function') {
                    window.carregarConcursos();
                }
                if (typeof window.carregarQuestoes === 'function') {
                    window.carregarQuestoes();
                }
                if (typeof window.carregarConteudos === 'function') {
                    window.carregarConteudos();
                }
                if (typeof window.carregarQuestoesUsuario === 'function') {
                    window.carregarQuestoesUsuario();
                }
                
                console.log('Dados iniciais carregados.');
            },

            initTabs: function() {
                var tabBtns = document.querySelectorAll('.tab-btn');
                tabBtns.forEach(function(btn) {
                    btn.addEventListener('click', function() {
                        var tabId = this.getAttribute('data-tab');
                        AdminPanel.switchTab(tabId);
                    });
                });
            },

            switchTab: function(tabId) {
                var tabBtns = document.querySelectorAll('.tab-btn');
                var tabContents = document.querySelectorAll('.tab-content');

                tabBtns.forEach(function(btn) {
                    btn.classList.remove('active');
                    if (btn.getAttribute('data-tab') === tabId) {
                        btn.classList.add('active');
                    }
                });

                tabContents.forEach(function(content) {
                    content.classList.remove('active');
                    if (content.id === 'tab-' + tabId) {
                        content.classList.add('active');
                    }
                });

                // Carregar dados quando a aba for ativada
                if (tabId === 'provas') {
                    if (typeof window.carregarProvas === 'function') {
                        window.carregarProvas();
                    }
                } else if (tabId === 'conteudos') {
                    if (typeof window.carregarConteudos === 'function') {
                        window.carregarConteudos();
                    }
                } else if (tabId === 'concursos') {
                    if (typeof window.carregarConcursos === 'function') {
                        window.carregarConcursos();
                    }
                } else if (tabId === 'questoes') {
                    if (typeof window.carregarQuestoes === 'function') {
                        window.carregarQuestoes();
                    }
                }
            },

            initModals: function() {
                var overlay = document.querySelectorAll('.modal-overlay');
                overlay.forEach(function(el) {
                    el.addEventListener('click', function(e) {
                        if (e.target === this) {
                            var modalId = this.id.replace('modal-', '');
                            AdminPanel.closeModal(modalId);
                        }
                    });
                });
            },

            hideLoader: function() {
                setTimeout(function() {
                    var loader = document.getElementById('loader-global');
                    if (loader) {
                        loader.classList.add('hidden');
                        setTimeout(function() { loader.style.display = 'none'; }, 500);
                    }
                }, 800);
            },

            closeModal: function(modalId) {
                var modal = document.getElementById('modal-' + modalId);
                if (modal) {
                    modal.classList.remove('active');
                }
            },

            openModal: function(modalId) {
                var modal = document.getElementById('modal-' + modalId);
                if (modal) {
                    modal.classList.add('active');
                }
            }
        };

        // Funções Globais de Tab (Fallback)
        window.switchTab = function(tabId) {
            if (typeof AdminPanel !== 'undefined' && AdminPanel.switchTab) {
                AdminPanel.switchTab(tabId);
            } else {
                // Fallback se AdminPanel não estiver disponível
                var tabBtns = document.querySelectorAll('.tab-btn');
                var tabContents = document.querySelectorAll('.tab-content');
                
                tabBtns.forEach(function(btn) {
                    btn.classList.remove('active');
                    if (btn.getAttribute('data-tab') === tabId) {
                        btn.classList.add('active');
                    }
                });
                
                tabContents.forEach(function(content) {
                    content.classList.remove('active');
                    if (content.id === 'tab-' + tabId) {
                        content.classList.add('active');
                    }
                });
            }
        };

        // Funções Globais
        window.openModal = function(modalId) {
            AdminPanel.openModal(modalId);
        };

        window.closeModal = function(modalId) {
            AdminPanel.closeModal(modalId);
        };

        // ==================== SISTEMA DE GERAÇÃO DE ID ====================

        // Prefixos por tipo de conteúdo
        var ID_PREFIXES = {
            prova: 'PR',
            quiz: 'QZ',
            concurso: 'CO',
            conteudo: 'CT',
            questao: 'QS',
            envio: 'CE',
            mestre: 'DM'
        };

        // Obter contador do localStorage
        function getIDCounter(prefix) {
            var key = 'id_counter_' + prefix + '_' + new Date().getFullYear();
            var counter = localStorage.getItem(key);
            return counter ? parseInt(counter, 10) : 0;
        }

        // Salvar contador no localStorage
        function setIDCounter(prefix, value) {
            var key = 'id_counter_' + prefix + '_' + new Date().getFullYear();
            localStorage.setItem(key, value);
        }

        // Gerar próximo ID
        window.gerarID = function(tipo) {
            var prefix = ID_PREFIXES[tipo];
            if (!prefix) {
                console.error('Tipo de ID desconhecido:', tipo);
                return null;
            }

            var currentCounter = getIDCounter(prefix);
            var nextCounter = currentCounter + 1;
            setIDCounter(prefix, nextCounter);

            var year = new Date().getFullYear();
            var formattedCounter = String(nextCounter).padStart(4, '0');
            return prefix + formattedCounter + '/' + year;
        };

        // Atualizar contador na UI
        window.atualizarContadorID = function(prefix) {
            var counter = getIDCounter(prefix);
            var counterElement = document.getElementById('counter-' + prefix);
            if (counterElement) {
                counterElement.textContent = String(counter).padStart(4, '0');
            }
        };

        // Inicializar contadores na carga da página
        function inicializarContadoresID() {
            Object.values(ID_PREFIXES).forEach(function(prefix) {
                window.atualizarContadorID(prefix);
            });
        }

        window.salvarProva = async function() {
            // Coleta os dados do formulário
            const provaData = {
                title: document.getElementById('prova-titulo').value,
                examBoard: document.getElementById('prova-banca').value,
                date: document.getElementById('prova-data').value,
                questionCount: parseInt(document.getElementById('prova-questoes').value) || 0,
                // Campos adicionais
                url: generateSlug(document.getElementById('prova-titulo').value),
                viewCount: 0,
                status: 'rascunho',
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            // Validação básica
            if (!provaData.title) {
                alert('Por favor, preencha o título da prova.');
                return;
            }

            try {
                // Faz requisição POST para a API
                const response = await fetch('/api/provas', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(provaData)
                });

                // Log da resposta do servidor
                const result = await response.json();
                console.log('Resposta do servidor:', result);

                if (response.ok) {
                    alert('Prova "' + (result.id || provaData.title) + '" salva com sucesso!');
                    AdminPanel.closeModal('novaProva');
                    
                    // Recarrega a lista de provas se existir função
                    if (typeof carregarProvas === 'function') {
                        carregarProvas();
                    }
                } else {
                    alert('Erro ao salvar prova: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao salvar prova: ' + error.message);
            }
        };

        window.salvarConteudo = async function() {
            // Coleta os dados do formulário
            const conteudoData = {
                title: document.getElementById('conteudo-titulo').value,
                type: document.getElementById('conteudo-tipo').value,
                category: document.getElementById('conteudo-categoria').value,
                description: document.getElementById('conteudo-descricao').value,
                url: document.getElementById('conteudo-url').value,
                thumbnail: document.getElementById('conteudo-thumbnail').value,
                tags: document.getElementById('conteudo-tags').value,
                // Campos adicionais
                slug: generateSlug(document.getElementById('conteudo-titulo').value),
                viewCount: 0,
                status: 'rascunho',
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            // Validação básica
            if (!conteudoData.title) {
                alert('Por favor, preencha o título do conteúdo.');
                return;
            }

            try {
                const response = await fetch('/api/conteudos', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(conteudoData)
                });

                const result = await response.json();
                console.log('Resposta do servidor:', result);

                if (response.ok) {
                    alert('Conteúdo "' + (result.id || conteudoData.title) + '" salvo com sucesso!');
                    AdminPanel.closeModal('novoConteudo');
                    if (typeof carregarConteudos === 'function') {
                        carregarConteudos();
                    }
                } else {
                    alert('Erro ao salvar conteúdo: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao salvar conteúdo: ' + error.message);
            }
        };

        // Editar Conteúdo
        window.editarConteudo = async function(id) {
            if (!id) return;

            // Buscar dados atuais do conteúdo
            try {
                const response = await fetch('/api/conteudos/' + encodeURIComponent(id));
                if (!response.ok) {
                    alert('Erro ao carregar dados do conteúdo.');
                    return;
                }

                const conteudo = await response.json();

                // Preencher formulário com dados existentes
                document.getElementById('conteudo-titulo').value = conteudo.title || '';
                document.getElementById('conteudo-categoria').value = conteudo.category || 'saude';

                // Tentar encontrar campos adicionais (podem não existir no HTML atual)
                const tipoEl = document.getElementById('conteudo-tipo');
                if (tipoEl) tipoEl.value = conteudo.type || 'conteudo';

                const descricaoEl = document.getElementById('conteudo-descricao');
                if (descricaoEl) descricaoEl.value = conteudo.description || '';

                const urlEl = document.getElementById('conteudo-url');
                if (urlEl) urlEl.value = conteudo.url || '';

                const thumbnailEl = document.getElementById('conteudo-thumbnail');
                if (thumbnailEl) thumbnailEl.value = conteudo.thumbnail || '';

                const tagsEl = document.getElementById('conteudo-tags');
                if (tagsEl) tagsEl.value = conteudo.tags || '';

                // Abrir modal em modo de edição
                openModal('novoConteudo');

                // Modificar botão de salvar para atualizar
                const saveBtn = document.querySelector('#modal-novoConteudo .modal-footer .btn-primary');
                if (saveBtn) {
                    saveBtn.innerHTML = '<i class="fas fa-save"></i> Atualizar Conteúdo';
                    saveBtn.onclick = function() {
                        window.atualizarConteudo(id);
                    };
                }
            } catch (error) {
                console.error('Erro ao carregar conteúdo:', error);
                alert('Erro ao carregar conteúdo para edição.');
            }
        };

        // Atualizar Conteúdo (PUT)
        window.atualizarConteudo = async function(id) {
            if (!id) return;

            const conteudoData = {
                title: document.getElementById('conteudo-titulo').value,
                category: document.getElementById('conteudo-categoria').value,
                updatedAt: new Date().toISOString()
            };

            // Campos adicionais se existirem
            const tipoEl = document.getElementById('conteudo-tipo');
            if (tipoEl) conteudoData.type = tipoEl.value;

            const descricaoEl = document.getElementById('conteudo-descricao');
            if (descricaoEl) conteudoData.description = descricaoEl.value;

            const urlEl = document.getElementById('conteudo-url');
            if (urlEl) conteudoData.url = urlEl.value;

            const thumbnailEl = document.getElementById('conteudo-thumbnail');
            if (thumbnailEl) conteudoData.thumbnail = thumbnailEl.value;

            const tagsEl = document.getElementById('conteudo-tags');
            if (tagsEl) conteudoData.tags = tagsEl.value;

            // Validação básica
            if (!conteudoData.title) {
                alert('Por favor, preencha o título do conteúdo.');
                return;
            }

            try {
                const response = await fetch('/api/conteudos/' + encodeURIComponent(id), {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(conteudoData)
                });

                const result = await response.json();

                if (response.ok) {
                    alert('Conteúdo atualizado com sucesso!');
                    AdminPanel.closeModal('novoConteudo');

                    // Restaurar botão original
                    const saveBtn = document.querySelector('#modal-novoConteudo .modal-footer .btn-primary');
                    if (saveBtn) {
                        saveBtn.innerHTML = '<i class="fas fa-save"></i> Salvar';
                        saveBtn.onclick = window.salvarConteudo;
                    }

                    if (typeof carregarConteudos === 'function') {
                        carregarConteudos();
                    }
                } else {
                    alert('Erro ao atualizar conteúdo: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao atualizar conteúdo: ' + error.message);
            }
        };

        // Excluir Conteúdo
        window.excluirConteudo = async function(id) {
            if (!id) return;

            var confirmacao = confirm('Tem certeza que deseja excluir este conteúdo?\n\nEsta ação não pode ser desfeita.');
            if (!confirmacao) return;

            try {
                const response = await fetch('/api/conteudos/' + encodeURIComponent(id), {
                    method: 'DELETE'
                });

                const result = await response.json();
                console.log('Resposta do servidor:', result);

                if (response.ok) {
                    alert('Conteúdo excluído com sucesso!');
                    if (typeof carregarConteudos === 'function') {
                        carregarConteudos();
                    }
                } else {
                    alert('Erro ao excluir conteúdo: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao excluir conteúdo: ' + error.message);
            }
        };

        window.salvarConcurso = async function() {
            const concursoData = {
                name: document.getElementById('concurso-titulo').value,
                institution: document.getElementById('concurso-orgao').value,
                state: document.getElementById('concurso-estado').value,
                city: document.getElementById('concurso-cidade').value,
                examBoard: document.getElementById('concurso-banca').value,
                examDate: document.getElementById('concurso-data-prova').value,
                registrationStart: document.getElementById('concurso-inscricao-inicio').value,
                registrationEnd: document.getElementById('concurso-inscricao-fim').value,
                positions: document.getElementById('concurso-cargos').value,
                salary: document.getElementById('concurso-salario').value,
                examType: document.getElementById('concurso-tipo').value,
                status: document.getElementById('concurso-status').value,
                // Campos adicionais
                slug: generateSlug(document.getElementById('concurso-titulo').value),
                viewCount: 0,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            if (!concursoData.name || !concursoData.institution) {
                alert('Por favor, preencha o nome e o órgão do concurso.');
                return;
            }

            try {
                const response = await fetch('/api/concursos', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(concursoData)
                });

                const result = await response.json();
                console.log('Resposta do servidor:', result);

                if (response.ok) {
                    alert('Concurso "' + (result.id || concursoData.name) + '" salvo com sucesso!');
                    AdminPanel.closeModal('novoConcurso');
                    if (typeof carregarConcursos === 'function') {
                        carregarConcursos();
                    }
                } else {
                    alert('Erro ao salvar concurso: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao salvar concurso: ' + error.message);
            }
        };

        window.salvarQuestao = async function() {
            // Coletar alternativas
            const alternativas = [];
            const alternativaInputs = document.querySelectorAll('#alternativas-container .alternativa-item');
            alternativaInputs.forEach(function(item, index) {
                const texto = item.querySelector('.alternativa-texto').value;
                const correta = item.querySelector('input[type="radio"]').checked;
                alternativas.push({
                    text: texto,
                    correct: correta
                });
            });

            const questaoData = {
                question: document.getElementById('questao-texto').value,
                topic: document.getElementById('questao-topico').value,
                difficulty: document.getElementById('questao-dificuldade').value,
                answers: alternativas,
                explanation: document.getElementById('questao-explicacao').value,
                examType: document.getElementById('questao-tipo-prova').value,
                institution: document.getElementById('questao-orgao').value,
                year: document.getElementById('questao-ano').value,
                tags: document.getElementById('questao-tags').value,
                // Campos adicionais
                status: 'ativa',
                viewCount: 0,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            if (!questaoData.question || alternativas.length < 2) {
                alert('Por favor, preencha o texto da questão e pelo menos 2 alternativas.');
                return;
            }

            try {
                const response = await fetch('/api/questoes', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(questaoData)
                });

                const result = await response.json();
                console.log('Resposta do servidor:', result);

                if (response.ok) {
                    alert('Questão "' + (result.id || 'Nova Questão') + '" salva com sucesso!');
                    AdminPanel.closeModal('novaQuestao');
                    if (typeof carregarQuestoes === 'function') {
                        carregarQuestoes();
                    }
                } else {
                    alert('Erro ao salvar questão: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao salvar questão: ' + error.message);
            }
        };

        window.salvarQuiz = async function() {
            const quizData = {
                title: document.getElementById('quiz-titulo').value,
                description: document.getElementById('quiz-descricao').value,
                category: document.getElementById('quiz-categoria').value,
                type: document.getElementById('quiz-tipo').value,
                examType: document.getElementById('quiz-tipo-prova').value,
                institution: document.getElementById('quiz-orgao').value,
                examBoard: document.getElementById('quiz-banca').value,
                year: document.getElementById('quiz-ano').value,
                timeLimit: parseInt(document.getElementById('quiz-tempo').value) || 0,
                questionCount: parseInt(document.getElementById('quiz-questoes').value) || 0,
                answerNumberingStyle: document.getElementById('quiz-numeracao').value,
                // Campos adicionais
                slug: generateSlug(document.getElementById('quiz-titulo').value),
                status: 'rascunho',
                viewCount: 0,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            if (!quizData.title) {
                alert('Por favor, preencha o título do quiz.');
                return;
            }

            try {
                const response = await fetch('/api/quiz', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(quizData)
                });

                const result = await response.json();
                console.log('Resposta do servidor:', result);

                if (response.ok) {
                    alert('Quiz "' + (result.id || quizData.title) + '" salvo com sucesso!');
                    AdminPanel.closeModal('novoQuiz');
                    if (typeof carregarQuiz === 'function') {
                        carregarQuiz();
                    }
                } else {
                    alert('Erro ao salvar quiz: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao salvar quiz: ' + error.message);
            }
        };

        window.salvarRecurso = async function() {
            const recursoData = {
                title: document.getElementById('recurso-titulo').value,
                description: document.getElementById('recurso-descricao').value,
                category: document.getElementById('recurso-categoria').value,
                type: document.getElementById('recurso-tipo').value,
                url: document.getElementById('recurso-url').value,
                thumbnail: document.getElementById('recurso-thumbnail').value,
                tags: document.getElementById('recurso-tags').value,
                // Campos adicionais
                slug: generateSlug(document.getElementById('recurso-titulo').value),
                viewCount: 0,
                status: 'ativo',
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            if (!recursoData.title) {
                alert('Por favor, preencha o título do recurso.');
                return;
            }

            try {
                const response = await fetch('/api/conteudos', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(recursoData)
                });

                const result = await response.json();
                console.log('Resposta do servidor:', result);

                if (response.ok) {
                    alert('Recurso "' + (result.id || recursoData.title) + '" salvo com sucesso!');
                    AdminPanel.closeModal('novoRecurso');
                    if (typeof carregarRecursos === 'function') {
                        carregarRecursos();
                    }
                } else {
                    alert('Erro ao salvar recurso: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao salvar recurso: ' + error.message);
            }
        };

        // Vincular Questão à Prova
        window.salvarVinculoQuestaoProva = async function() {
            const provaId = document.getElementById('adicionar-prova-id').value;
            const questaoId = document.getElementById('adicionar-questao-id').value;
            const ordem = document.getElementById('adicionar-questao-ordem').value || 1;

            if (!provaId || !questaoId) {
                alert('Por favor, selecione uma prova e uma questão.');
                return;
            }

            const vinculoData = {
                provaId: provaId,
                questaoId: questaoId,
                ordem: parseInt(ordem) || 1,
                createdAt: new Date().toISOString()
            };

            try {
                const response = await fetch('/api/provas-questoes', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(vinculoData)
                });

                const result = await response.json();

                if (response.ok) {
                    alert('Questão vinculada à prova com sucesso!');
                    AdminPanel.closeModal('adicionarQuestaoProva');

                    // Recarregar provas para atualizar contagem de questões
                    if (typeof carregarProvas === 'function') {
                        carregarProvas();
                    }

                    // Recarregar questões para atualizar informação de vínculo na tabela
                    if (typeof carregarQuestoes === 'function') {
                        carregarQuestoes();
                    }
                } else {
                    alert('Erro ao vincular questão: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao vincular questão: ' + error.message);
            }
        };

        // Carregar provas e questões para o modal de vínculo
        window.carregarOpcoesVinculo = async function() {
            return new Promise(function(resolve) {
                Promise.all([
                    fetch('/api/provas').then(function(r) { return r.json(); }),
                    fetch('/api/questoes').then(function(r) { return r.json(); })
                ]).then(function(results) {
                    const provas = results[0];
                    const questoes = results[1];
                    
                    const provaSelect = document.getElementById('adicionar-prova-id');
                    if (provaSelect) {
                        const currentValue = provaSelect.value;
                        while (provaSelect.options.length > 1) {
                            provaSelect.remove(1);
                        }
                        provas.forEach(function(prova) {
                            const option = document.createElement('option');
                            option.value = prova.id;
                            option.textContent = prova.title || prova.id;
                            provaSelect.appendChild(option);
                        });
                        provaSelect.value = currentValue;
                    }
                    
                    const questaoSelect = document.getElementById('adicionar-questao-id');
                    if (questaoSelect) {
                        const currentValue = questaoSelect.value;
                        while (questaoSelect.options.length > 1) {
                            questaoSelect.remove(1);
                        }
                        questoes.forEach(function(questao) {
                            const option = document.createElement('option');
                            option.value = questao.id;
                            option.textContent = (questao.question ? questao.question.substring(0, 50) + '...' : 'Questão ' + questao.id);
                            questaoSelect.appendChild(option);
                        });
                        questaoSelect.value = currentValue;
                    }
                    
                    resolve();
                }).catch(function(error) {
                    console.error('Erro ao carregar opções:', error);
                    resolve();
                });
            });
        };

        window.salvarQuestaoUsuario = function() {
            // Coletar alternativas
            var alternativas = [];
            var alternativaInputs = document.querySelectorAll('#alternativas-usuario-container .alternativa-item');
            alternativaInputs.forEach(function(item, index) {
                var texto = item.querySelector('.alternativa-usuario-texto').value;
                var correta = item.querySelector('input[type="radio"]').checked;
                alternativas.push({
                    text: texto,
                    correct: correta
                });
            });
            console.log('Salvando questão de usuário:', {
                email: document.getElementById('questao-usuario-email').value,
                texto: document.getElementById('questao-usuario-texto').value,
                topico: document.getElementById('questao-usuario-topico').value,
                dificuldade: document.getElementById('questao-usuario-dificuldade').value,
                alternativas: alternativas,
                explicacao: document.getElementById('questao-usuario-explicacao').value,
                status: document.getElementById('questao-usuario-status').value,
                publica: document.getElementById('questao-usuario-publica').checked
            });
            alert('Questão de usuário salva com sucesso!');
            AdminPanel.closeModal('novaQuestaoUsuario');
        };

        window.salvarTopicoEstudo = function() {
            console.log('Salvando tópico de estudo:', {
                concursoId: document.getElementById('topico-concurso-id').value,
                email: document.getElementById('topico-usuario-email').value,
                nome: document.getElementById('topico-nome').value,
                peso: document.getElementById('topico-peso').value,
                progresso: document.getElementById('topico-nivel-progresso').value,
                praticadas: document.getElementById('topico-questoes-praticadas').value,
                dominio: document.getElementById('topico-nivel-dominio').value,
                estudado: document.getElementById('topico-estudado').checked,
                ultimoEstudo: document.getElementById('topico-ultimo-estudo').value,
                notas: document.getElementById('topico-notas').value
            });
            alert('Tópico de estudo salvo com sucesso!');
            AdminPanel.closeModal('novoTopicoEstudo');
        };

        window.salvarDesempenho = function() {
            console.log('Salvando registro de desempenho:', {
                email: document.getElementById('desempenho-usuario-email').value,
                topico: document.getElementById('desempenho-topico').value,
                corretas: document.getElementById('desempenho-corretas').value,
                total: document.getElementById('desempenho-total').value,
                ultimoEstudo: document.getElementById('desempenho-ultimo').value
            });
            alert('Registro de desempenho salvo com sucesso!');
            AdminPanel.closeModal('novoDesempenho');
        };

        window.salvarTentativaQuiz = function() {
            console.log('Salvando tentativa de quiz:', {
                email: document.getElementById('tentativa-usuario-email').value,
                titulo: document.getElementById('tentativa-titulo').value,
                tipo: document.getElementById('tentativa-tipo').value,
                questoes: document.getElementById('tentativa-questoes').value,
                tempo: document.getElementById('tentativa-tempo').value,
                corretas: document.getElementById('tentativa-corretas').value,
                erradas: document.getElementById('tentativa-erradas').value,
                puladas: document.getElementById('tentativa-puladas').value,
                conclusao: document.getElementById('tentativa-concluida').value
            });
            alert('Tentativa de quiz salva com sucesso!');
            AdminPanel.closeModal('novaTentativaQuiz');
        };

        // Funções para gerenciar alternativas dinâmicas
        window.adicionarAlternativa = function() {
            var container = document.getElementById('alternativas-container');
            var count = container.children.length;
            var letters = ['E', 'F', 'G', 'H', 'I', 'J'];
            var newItem = document.createElement('div');
            newItem.className = 'alternativa-item';
            newItem.style.cssText = 'display: flex; gap: 8px; margin-bottom: 8px;';
            newItem.innerHTML = '<input type="radio" name="alternativa-correta" value="' + count + '">' +
                '<input type="text" class="alternativa-texto" placeholder="Alternativa ' + (letters[count - 4] || String.fromCharCode(65 + count)) + '" style="flex: 1;">' +
                '<button type="button" class="btn btn-sm btn-danger" onclick="this.parentElement.remove()" style="padding: 8px 12px;"><i class="fas fa-times"></i></button>';
            container.appendChild(newItem);
        };

        window.adicionarAlternativaUsuario = function() {
            var container = document.getElementById('alternativas-usuario-container');
            var count = container.children.length;
            var letters = ['E', 'F', 'G', 'H', 'I', 'J'];
            var newItem = document.createElement('div');
            newItem.className = 'alternativa-item';
            newItem.style.cssText = 'display: flex; gap: 8px; margin-bottom: 8px;';
            newItem.innerHTML = '<input type="radio" name="alternativa-usuario-correta" value="' + count + '">' +
                '<input type="text" class="alternativa-usuario-texto" placeholder="Alternativa ' + (letters[count - 4] || String.fromCharCode(65 + count)) + '" style="flex: 1;">' +
                '<button type="button" class="btn btn-sm btn-danger" onclick="this.parentElement.remove()" style="padding: 8px 12px;"><i class="fas fa-times"></i></button>';
            container.appendChild(newItem);
        };

        window.importarProva = function() {
            alert('Importação de provas em desenvolvimento!');
            AdminPanel.closeModal('importProva');
        };

        window.importarConteudo = function() {
            alert('Importação de conteúdos em desenvolvimento!');
            AdminPanel.closeModal('importConteudo');
        };

        window.importarQuestoes = function() {
            alert('Importação de questões em desenvolvimento!');
            AdminPanel.closeModal('importQuestoes');
        };

        window.importarConcurso = function() {
            alert('Importação de concursos em desenvolvimento!');
            AdminPanel.closeModal('importConcurso');
        };

        // ==================== FUNÇÕES DE EXPORTAÇÃO ====================

        // Utilitário para download de arquivos
        function downloadFile(content, filename, mimeType) {
            var blob = new Blob([content], { type: mimeType });
            var url = URL.createObjectURL(blob);
            var a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Converter objeto para CSV
        function objectToCSV(items) {
            if (items.length === 0) return '';
            var headers = Object.keys(items[0]);
            var csvRows = [];
            csvRows.push(headers.join(','));
            for (var i = 0; i < items.length; i++) {
                var values = [];
                for (var j = 0; j < headers.length; j++) {
                    var value = items[i][headers[j]];
                    if (value === null || value === undefined) {
                        value = '';
                    } else if (typeof value === 'object') {
                        value = JSON.stringify(value).replace(/"/g, '""');
                        value = '"' + value + '"';
                    } else {
                        value = String(value).replace(/"/g, '""');
                        value = '"' + value + '"';
                    }
                    values.push(value);
                }
                csvRows.push(values.join(','));
            }
            return csvRows.join('\n');
        }

        // Exportar Questões
        window.exportarQuestoes = function(format) {
            format = format || 'csv';
            var dados = [
                {
                    question: "Qual é o tempo mínimo recomendado para lavagem das mãos com água e sabão?",
                    topic: "Prevenção e Controle de Infecções",
                    answers: JSON.stringify([
                        {"text": "10 segundos", "correct": false},
                        {"text": "20 segundos", "correct": false},
                        {"text": "40-60 segundos", "correct": true},
                        {"text": "2 minutos", "correct": false}
                    ]),
                    explanation: "A OMS recomenda 40-60 segundos para lavagem adequada das mãos.",
                    difficulty: "fácil",
                    exam_type: "enfermeiro",
                    institution: "Prefeitura",
                    year: "2024",
                    tags: "higiene,lavagem maos"
                },
                {
                    question: "Qual sinal vital deve ser prioritariamente monitorado em choque hipovolêmico?",
                    topic: "Semiologia e Semiotécnica",
                    answers: JSON.stringify([
                        {"text": "Temperatura", "correct": false},
                        {"text": "Pressão arterial", "correct": true},
                        {"text": "Frequência respiratória", "correct": false},
                        {"text": "Saturação de oxigênio", "correct": false}
                    ]),
                    explanation: "A pressão arterial é o sinal vital mais crítico no choque hipovolêmico.",
                    difficulty: "médio",
                    exam_type: "enfermeiro",
                    institution: "COREN",
                    year: "2024",
                    tags: "choque,sinais vitais"
                }
            ];
            if (format === 'csv') {
                downloadFile(objectToCSV(dados), 'questoes_export.csv', 'text/csv;charset=utf-8;');
                alert('Questões exportadas para CSV com sucesso!');
            } else if (format === 'json') {
                downloadFile(JSON.stringify(dados, null, 2), 'questoes_export.json', 'application/json;charset=utf-8;');
                alert('Questões exportadas para JSON com sucesso!');
            }
        };

        // Exportar Concursos
        window.exportarConcursos = function(format) {
            format = format || 'csv';
            var dados = [
                {
                    name: "XI CONCURSO PÚBLICO - TJMS",
                    institution: "Tribunal de Justiça do Mato Grosso do Sul",
                    exam_board: "FUNDAÇÃO GETÚLIO VARGAS",
                    state: "MS",
                    city: "CAMPO GRANDE",
                    exam_type: "enfermeiro",
                    positions: "10",
                    salary: "7960,97",
                    registration_start: "2025-10-29",
                    registration_end: "2025-11-27",
                    exam_date: "2026-01-25",
                    status: "inscricoes_abertas"
                }
            ];
            if (format === 'csv') {
                downloadFile(objectToCSV(dados), 'concursos_export.csv', 'text/csv;charset=utf-8;');
                alert('Concursos exportados para CSV com sucesso!');
            } else if (format === 'json') {
                downloadFile(JSON.stringify(dados, null, 2), 'concursos_export.json', 'application/json;charset=utf-8;');
                alert('Concursos exportados para JSON com sucesso!');
            }
        };

        // Exportar Provas
        window.exportarProvas = function(format) {
            format = format || 'csv';
            var dados = [
                {
                    title: "ENEM 2023 - Saúde",
                    category: "Saúde",
                    subcategory: "Enfermagem",
                    status: "publicado",
                    view_count: "1234",
                    question_count: "90",
                    exam_type: "enfermeiro",
                    institution: "INEP",
                    year: "2023",
                    description: "Prova do ENEM 2023 com questões de saúde e enfermagem."
                },
                {
                    title: "Concursos Públicos 2024",
                    category: "Concursos",
                    subcategory: "Enfermagem",
                    status: "publicado",
                    view_count: "892",
                    question_count: "45",
                    exam_type: "enfermeiro",
                    institution: "Diversos",
                    year: "2024",
                    description: "Simulado com questões de concursos públicos de enfermagem."
                },
                {
                    title: "Prova SUS 2024",
                    category: "Saúde Pública",
                    subcategory: "SUS",
                    status: "rascunho",
                    view_count: "0",
                    question_count: "60",
                    exam_type: "enfermeiro",
                    institution: "Ministério da Saúde",
                    year: "2024",
                    description: "Questões relacionadas ao Sistema Único de Saúde."
                }
            ];
            if (format === 'csv') {
                downloadFile(objectToCSV(dados), 'provas_export.csv', 'text/csv;charset=utf-8;');
                alert('Provas exportadas para CSV com sucesso!');
            } else if (format === 'json') {
                downloadFile(JSON.stringify(dados, null, 2), 'provas_export.json', 'application/json;charset=utf-8;');
                alert('Provas exportadas para JSON com sucesso!');
            }
        };

        // Exportar Quiz/Simulados
        window.exportarQuiz = function(format) {
            format = format || 'csv';
            var dados = [
                {
                    title: "ENFERMEIRO EM CUIDADOS INTENSIVOS - PMRN 2022",
                    description: "Prova de ensino superior em enfermagem",
                    category: "",
                    type: "prova_completa",
                    exam_type: "enfermeiro",
                    institution: "POLÍCIA MILITAR",
                    exam_board: "INSTITUTO CONSULPLAN",
                    state: "RN",
                    year: "2022",
                    time_limit: "0",
                    question_count: "0",
                    answer_numbering_style: "letters"
                }
            ];
            if (format === 'csv') {
                downloadFile(objectToCSV(dados), 'quiz_export.csv', 'text/csv;charset=utf-8;');
                alert('Quiz exportados para CSV com sucesso!');
            } else if (format === 'json') {
                downloadFile(JSON.stringify(dados, null, 2), 'quiz_export.json', 'application/json;charset=utf-8;');
                alert('Quiz exportados para JSON com sucesso!');
            }
        };

        // Exportar Recursos de Biblioteca
        window.exportarRecursos = function(format) {
            format = format || 'csv';
            var dados = [
                {
                    title: "Mapa Mental: Sistema Cardiovascular",
                    description: "Resumo visual completo do sistema cardiovascular",
                    category: "anatomia",
                    type: "mapa_mental",
                    url: "https://exemplo.com/cardiovascular-map",
                    tags: "cardiovascular,anatomia,fisiologia"
                },
                {
                    title: "Guia Prático de Administração de Medicamentos",
                    description: "Manual completo sobre vias de administração",
                    category: "farmacologia",
                    type: "pdf",
                    url: "https://exemplo.com/admin-medicamentos.pdf",
                    tags: "farmacologia,medicamentos"
                }
            ];
            if (format === 'csv') {
                downloadFile(objectToCSV(dados), 'recursos_biblioteca_export.csv', 'text/csv;charset=utf-8;');
                alert('Recursos exportados para CSV com sucesso!');
            } else if (format === 'json') {
                downloadFile(JSON.stringify(dados, null, 2), 'recursos_biblioteca_export.json', 'application/json;charset=utf-8;');
                alert('Recursos exportados para JSON com sucesso!');
            }
        };

        // Exportar Questões de Usuário
        window.exportarQuestoesUsuario = function(format) {
            format = format || 'csv';
            var dados = [
                {
                    user_email: "usuario@email.com",
                    question: "Qual é a principal função do sistema nervoso central?",
                    topic: "Anatomia e Fisiologia",
                    answers: JSON.stringify([
                        {"text": "Processar e integrar informações sensoriais", "correct": true},
                        {"text": "Produzir hormônios", "correct": false},
                        {"text": "Transportar oxigênio", "correct": false},
                        {"text": "Filtrar toxinas", "correct": false}
                    ]),
                    difficulty: "médio",
                    admin_status: "pendente",
                    is_public: "true"
                }
            ];
            if (format === 'csv') {
                downloadFile(objectToCSV(dados), 'questoes_usuario_export.csv', 'text/csv;charset=utf-8;');
                alert('Questões de usuário exportadas para CSV com sucesso!');
            } else if (format === 'json') {
                downloadFile(JSON.stringify(dados, null, 2), 'questoes_usuario_export.json', 'application/json;charset=utf-8;');
                alert('Questões de usuário exportadas para JSON com sucesso!');
            }
        };

        // ==================== FUNÇÕES DE DADOS MESTRES ====================

        // Mostrar campos específicos conforme o tipo de dado mestre
        window.mostrarCamposDadoMestre = function() {
            var tipo = document.getElementById('dadoMestre-tipo').value;
            var descricaoGrupo = document.getElementById('grupo-dadoMestre-descricao');

            if (tipo) {
                descricaoGrupo.style.display = 'block';
            } else {
                descricaoGrupo.style.display = 'none';
            }
        };

        // Salvar novo dado mestre
        window.salvarDadoMestre = function() {
            var tipo = document.getElementById('dadoMestre-tipo').value;
            var valor = document.getElementById('dadoMestre-valor').value;
            var descricao = document.getElementById('dadoMestre-descricao').value;

            if (!tipo || !valor) {
                alert('Por favor, preencha o tipo e o valor do dado mestre.');
                return;
            }

            var idDadoMestre = window.gerarID('mestre');

            // Aqui você implementaria a lógica para salvar no banco de dados
            var dadosMestre = {
                id: idDadoMestre,
                tipo: tipo,
                valor: valor,
                descricao: descricao,
                dataCriacao: new Date().toISOString()
            };

            console.log('Novo Dado Mestre:', dadosMestre);
            alert('Dado Mestre "' + idDadoMestre + '" salvo com sucesso!\n\nTipo: ' + tipo + '\nValor: ' + valor);

            // Limpar formulário
            document.getElementById('dadoMestre-tipo').value = '';
            document.getElementById('dadoMestre-valor').value = '';
            document.getElementById('dadoMestre-descricao').value = '';
            document.getElementById('grupo-dadoMestre-descricao').style.display = 'none';

            // Atualizar contador
            window.atualizarContadorID('DM');

            // Fechar modal
            AdminPanel.closeModal('novoDadoMestre');

            // Atualizar lista de dados mestres (se a aba estiver visível)
            if (typeof carregarDadosMestres === 'function') {
                carregarDadosMestres();
            }
        };

        // Carregar dados mestres (será implementado quando a aba for populada)
        window.carregarDadosMestres = function() {
            console.log('Carregando dados mestres...');
            // Esta função será populada quando a aba Dados Mestres for implementada
        };

        // Filtrar Dados Mestres
        window.filtrarDadosMestres = function() {
            var tipo = document.getElementById('filtro-dadosMestres-tipo').value;
            var busca = document.getElementById('filtro-dadosMestres-busca').value.toLowerCase();

            // Filtrar categorias de dados mestres
            var categorias = document.querySelectorAll('.mestre-categoria');
            categorias.forEach(function(cat) {
                var catTipo = cat.getAttribute('data-tipo');
                var itens = cat.querySelectorAll('.mestre-item');
                var itensVisiveis = 0;

                var mostrarCat = true;
                if (tipo && catTipo !== tipo) {
                    mostrarCat = false;
                }

                itens.forEach(function(item) {
                    var valor = item.querySelector('.mestre-valor').textContent.toLowerCase();
                    var mostrarItem = true;

                    if (!mostrarCat) {
                        mostrarItem = false;
                    }

                    if (busca && !valor.includes(busca)) {
                        mostrarItem = false;
                    }

                    item.style.display = mostrarItem ? '' : 'none';
                    if (mostrarItem) {
                        itensVisiveis++;
                    }
                });

                cat.style.display = mostrarCat ? '' : 'none';

                // Atualizar contador
                var badge = cat.querySelector('.badge');
                if (badge) {
                    badge.textContent = itensVisiveis + ' itens';
                }
            });
        };

        // Exportar Dados Mestres
        window.exportarDadosMestres = function(format) {
            format = format || 'json';

            // Coletar todos os dados mestres
            var dadosMestres = [];
            var categorias = document.querySelectorAll('.mestre-categoria');

            categorias.forEach(function(cat) {
                var tipo = cat.getAttribute('data-tipo');
                var itens = cat.querySelectorAll('.mestre-item');

                itens.forEach(function(item) {
                    var valor = item.querySelector('.mestre-valor').textContent.trim();
                    dadosMestres.push({
                        tipo: tipo,
                        valor: valor
                    });
                });
            });

            if (format === 'csv') {
                downloadFile(objectToCSV(dadosMestres), 'dados_mestres_export.csv', 'text/csv;charset=utf-8;');
                alert('Dados mestres exportados para CSV com sucesso!');
            } else if (format === 'json') {
                downloadFile(JSON.stringify(dadosMestres, null, 2), 'dados_mestres_export.json', 'application/json;charset=utf-8;');
                alert('Dados mestres exportados para JSON com sucesso!');
            }
        };

        // Aprovar Todas as Questões de Usuário
        window.aprovarTodasQuestoes = function() {
            var confirmacao = confirm('Tem certeza que deseja APROVAR todas as questões pendentes?\n\nEsta ação não pode ser desfeita.');
            if (confirmacao) {
                // Aqui você implementaria a lógica para aprovar todas as questões
                alert('Funcionalidade de aprovar todas em desenvolvimento.\n\nTodas as questões pendentes serão aprovadas após implementação.');
            }
        };

        // Rejeitar Todas as Questões de Usuário
        window.rejeitarTodasQuestoes = function() {
            var confirmacao = confirm('Tem certeza que deseja REJEITAR todas as questões pendentes?\n\nEsta ação não pode ser desfeita.');
            if (confirmacao) {
                // Aqui você implementaria a lógica para rejeitar todas as questões
                alert('Funcionalidade de rejeitar todas em desenvolvimento.\n\nTodas as questões serão rejeitadas após implementação.');
            }
        };

        // Filtrar Questões de Usuário
        window.filtrarQuestoesUsuario = function() {
            var status = document.getElementById('filtro-status').value;
            var topico = document.getElementById('filtro-topico').value;
            var busca = document.getElementById('filtro-busca').value.toLowerCase();
            
            // Filtrar questões enviadas
            var questoesCards = document.querySelectorAll('#questoes-enviados-grid .resource-card');
            questoesCards.forEach(function(card) {
                var cardStatus = card.getAttribute('data-status');
                var cardTopico = card.getAttribute('data-topico');
                var cardTexto = card.textContent.toLowerCase();
                
                var mostrar = true;
                
                if (status && cardStatus !== status) {
                    mostrar = false;
                }
                
                if (topico && cardTopico !== topico) {
                    mostrar = false;
                }
                
                if (busca && !cardTexto.includes(busca)) {
                    mostrar = false;
                }
                
                card.style.display = mostrar ? '' : 'none';
            });
            
            // Filtrar concursos enviados
            var concursosCards = document.querySelectorAll('#concursos-enviados-grid .resource-card');
            concursosCards.forEach(function(card) {
                var cardStatus = card.getAttribute('data-status');
                var cardTexto = card.textContent.toLowerCase();
                
                var mostrar = true;
                
                if (status && cardStatus !== status) {
                    mostrar = false;
                }
                
                if (busca && !cardTexto.includes(busca)) {
                    mostrar = false;
                }
                
                card.style.display = mostrar ? '' : 'none';
            });
            
            // Atualizar contador
            var questoesVisiveis = document.querySelectorAll('#questoes-enviados-grid .resource-card:not([style*="display: none"])').length;
            var concursosVisiveis = document.querySelectorAll('#concursos-enviados-grid .resource-card:not([style*="display: none"])').length;
            alert('Filtrado: ' + questoesVisiveis + ' questões e ' + concursosVisiveis + ' concursos encontrados.');
        };

        // Exportar Tópicos de Estudo
        window.exportarTopicosEstudo = function(format) {
            format = format || 'csv';
            var dados = [
                {
                    contest_id: "68f7e85148690de91079d56c",
                    user_email: "usuario@email.com",
                    topic_name: "NOÇÕES DE SAÚDE PÚBLICA",
                    weight: "12.5",
                    studied: "false",
                    progress_level: "50",
                    questions_practiced: "0",
                    mastery_level: "intermediário"
                }
            ];
            if (format === 'csv') {
                downloadFile(objectToCSV(dados), 'topicos_estudo_export.csv', 'text/csv;charset=utf-8;');
                alert('Tópicos de estudo exportados para CSV com sucesso!');
            } else if (format === 'json') {
                downloadFile(JSON.stringify(dados, null, 2), 'topicos_estudo_export.json', 'application/json;charset=utf-8;');
                alert('Tópicos de estudo exportados para JSON com sucesso!');
            }
        };

        // Exportar Desempenho de Usuário
        window.exportarDesempenho = function(format) {
            format = format || 'csv';
            var dados = [
                {
                    user_email: "usuario@email.com",
                    topic: "Urgência e Emergência",
                    correct_answers: "15",
                    total_answers: "20",
                    last_study: "2026-01-20T22:23:40.708Z"
                },
                {
                    user_email: "usuario@email.com",
                    topic: "Anatomia e Fisiologia",
                    correct_answers: "18",
                    total_answers: "25",
                    last_study: "2026-01-20T22:23:41.617Z"
                }
            ];
            if (format === 'csv') {
                downloadFile(objectToCSV(dados), 'desempenho_export.csv', 'text/csv;charset=utf-8;');
                alert('Desempenho exportado para CSV com sucesso!');
            } else if (format === 'json') {
                downloadFile(JSON.stringify(dados, null, 2), 'desempenho_export.json', 'application/json;charset=utf-8;');
                alert('Desempenho exportado para JSON com sucesso!');
            }
        };

        // Exportar Tentativas de Quiz
        window.exportarTentativasQuiz = function(format) {
            format = format || 'csv';
            var dados = [
                {
                    user_email: "usuario@email.com",
                    quiz_title: "Estudo Personalizado",
                    quiz_type: "custom",
                    score: "0",
                    total_questions: "7",
                    correct_count: "0",
                    incorrect_count: "7",
                    skipped_count: "0",
                    time_spent: "39",
                    completed_at: "2026-01-20T22:23:39.441Z"
                }
            ];
            if (format === 'csv') {
                downloadFile(objectToCSV(dados), 'tentativas_quiz_export.csv', 'text/csv;charset=utf-8;');
                alert('Tentativas de quiz exportadas para CSV com sucesso!');
            } else if (format === 'json') {
                downloadFile(JSON.stringify(dados, null, 2), 'tentativas_quiz_export.json', 'application/json;charset=utf-8;');
                alert('Tentativas de quiz exportadas para JSON com sucesso!');
            }
        };

        // Exportar Tudo (Backup Completo)
        window.exportarTudo = function(format) {
            format = format || 'json';
            var backup = {
                export_date: new Date().toISOString(),
                version: "1.0",
                questions: [
                    {
                        question: "Qual é o tempo mínimo recomendado para lavagem das mãos?",
                        topic: "Prevenção e Controle de Infecções",
                        answers: JSON.stringify([
                            {"text": "10 segundos", "correct": false},
                            {"text": "20 segundos", "correct": false},
                            {"text": "40-60 segundos", "correct": true},
                            {"text": "2 minutos", "correct": false}
                        ]),
                        difficulty: "fácil"
                    }
                ],
                contests: [
                    {
                        name: "XI CONCURSO PÚBLICO - TJMS",
                        institution: "Tribunal de Justiça do Mato Grosso do Sul",
                        exam_type: "enfermeiro",
                        state: "MS"
                    }
                ],
                quiz: [
                    {
                        title: "ENFERMEIRO EM CUIDADOS INTENSIVOS",
                        type: "prova_completa",
                        exam_type: "enfermeiro"
                    }
                ],
                library_resources: [
                    {
                        title: "Mapa Mental: Sistema Cardiovascular",
                        category: "anatomia",
                        type: "mapa_mental"
                    }
                ]
            };
            if (format === 'json') {
                downloadFile(JSON.stringify(backup, null, 2), 'backup_completo_' + new Date().toISOString().split('T')[0] + '.json', 'application/json;charset=utf-8;');
                alert('Backup completo exportado com sucesso!');
            }
        };

        // ==================== FIM FUNÇÕES DE EXPORTAÇÃO ====================

        // ==================== FUNÇÕES DE GERAÇÃO DE HTML E GITHUB ====================

        // Configuração do GitHub (substituir com valores reais em produção)
        var GitHubConfig = {
            owner: 'SEU_USUARIO_OU_ORGANIZACAO',
            repo: 'simulados-para-enfermagem',
            branch: 'main',
            token: 'SEU_GITHUB_TOKEN_AQUI',
            basePath: 'assets/app/html/'
        };

        // Gerar slug para URL
        function generateSlug(text) {
            if (!text) return 'untitled';
            return text.toLowerCase()
                .replace(/[áàãâä]/g, 'a')
                .replace(/[éèêë]/g, 'e')
                .replace(/[íìîï]/g, 'i')
                .replace(/[óòõôö]/g, 'o')
                .replace(/[úùûü]/g, 'u')
                .replace(/[ç]/g, 'c')
                .replace(/[^a-z0-9]+/g, '-')
                .replace(/^-|-$/g, '');
        }

        // Codificar conteúdo para Base64
        function encodeBase64(content) {
            return btoa(unescape(encodeURIComponent(content)));
        }

        // Gerar mensagem de commit
        function generateCommitMessage(type, title) {
            var typeLabels = {
                'prova': 'Prova',
                'conteudo': 'Conteúdo',
                'concurso': 'Concurso',
                'questao': 'Questão'
            };
            var label = typeLabels[type] || 'Item';
            var safeTitle = title || 'Sem título';
            var date = new Date().toISOString().split('T')[0];
            return 'Update: ' + label + ' - ' + safeTitle + ' (' + date + ')';
        }

        // Obter SHA de arquivo existente
        function getFileSHA(filepath) {
            var url = 'https://api.github.com/repos/' + GitHubConfig.owner + '/' + GitHubConfig.repo +
                      '/contents/' + filepath + '?ref=' + GitHubConfig.branch;
            
            return fetch(url, {
                method: 'GET',
                headers: {
                    'Authorization': 'token ' + GitHubConfig.token,
                    'Accept': 'application/vnd.github.v3+json'
                }
            })
            .then(function(response) {
                if (response.status === 404) return null;
                if (!response.ok) throw new Error('Erro ao obter arquivo: ' + response.status);
                return response.json();
            });
        }

        // Commitar arquivo no GitHub
        function commitFile(filepath, content, message, sha) {
            var url = 'https://api.github.com/repos/' + GitHubConfig.owner + '/' + GitHubConfig.repo +
                      '/contents/' + filepath;
            
            var payload = {
                message: message,
                content: encodeBase64(content),
                branch: GitHubConfig.branch
            };
            
            if (sha) {
                payload.sha = sha;
            }
            
            return fetch(url, {
                method: 'PUT',
                headers: {
                    'Authorization': 'token ' + GitHubConfig.token,
                    'Accept': 'application/vnd.github.v3+json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            })
            .then(function(response) {
                if (!response.ok) {
                    return response.json().then(function(data) {
                        throw new Error(data.message || 'Erro ao commitar arquivo');
                    });
                }
                return response.json();
            });
        }

        // Gerar HTML para prova
        function generateHTMLProva(prova) {
            var html = '<!DOCTYPE html>\n';
            html += '<html lang="pt-BR">\n<head>\n';
            html += '<meta charset="UTF-8">\n';
            html += '<meta name="viewport" content="width=device-width, initial-scale=1.0">\n';
            html += '<title>' + (prova.titulo || prova.title) + ' | Simulados de Enfermagem</title>\n';
            html += '<meta name="description" content="' + (prova.descricao || prova.description || '') + '">\n';
            html += '<meta name="keywords" content="enfermagem,prova,simulado,' + generateSlug(prova.titulo || prova.title) + '">\n';
            html += '<link rel="stylesheet" href="../../../components/css/components.css">\n';
            html += '<link rel="stylesheet" href="../../../components/css/quiz.css">\n';
            html += '</head>\n<body>\n';
            html += '<div class="quiz-container">\n';
            html += '<header class="quiz-header">\n';
            html += '<h1>' + (prova.titulo || prova.title) + '</h1>\n';
            html += '<p class="quiz-description">' + (prova.descricao || prova.description || '') + '</p>\n';
            if (prova.ano || prova.year) {
                html += '<span class="quiz-badge">Ano: ' + (prova.ano || prova.year) + '</span>\n';
            }
            if (prova.orgao || prova.institution) {
                html += '<span class="quiz-badge">Órgão: ' + (prova.orgao || prova.institution) + '</span>\n';
            }
            html += '</header>\n';
            html += '<div class="quiz-content">\n';
            html += '<p>Esta prova contém ' + (prova.questoes || prova.question_count || '0') + ' questões.</p>\n';
            html += '<a href="iniciar-prova.html?id=' + generateSlug(prova.titulo || prova.title) + '" class="btn btn-primary btn-lg">Iniciar Prova</a>\n';
            html += '</div>\n';
            html += '</div>\n';
            html += '</body>\n</html>';
            return html;
        }

        // Gerar HTML para conteúdo
        function generateHTMLConteudo(conteudo) {
            var html = '<!DOCTYPE html>\n';
            html += '<html lang="pt-BR">\n<head>\n';
            html += '<meta charset="UTF-8">\n';
            html += '<meta name="viewport" content="width=device-width, initial-scale=1.0">\n';
            html += '<title>' + (conteudo.titulo || conteudo.title) + ' | Simulados de Enfermagem</title>\n';
            html += '<meta name="description" content="' + (conteudo.descricao || conteudo.description || '') + '">\n';
            html += '<meta name="keywords" content="enfermagem,' + generateSlug(conteudo.titulo || conteudo.title) + '">\n';
            html += '<link rel="stylesheet" href="../../../components/css/components.css">\n';
            html += '<link rel="stylesheet" href="../../../components/css/biblioteca.css">\n';
            html += '</head>\n<body>\n';
            html += '<div class="content-container">\n';
            html += '<header class="content-header">\n';
            html += '<h1>' + (conteudo.titulo || conteudo.title) + '</h1>\n';
            html += '<div class="content-meta">\n';
            if (conteudo.categoria || conteudo.category) {
                html += '<span class="badge badge-primary">' + (conteudo.categoria || conteudo.category) + '</span>\n';
            }
            if (conteudo.tipo || conteudo.type) {
                html += '<span class="badge badge-secondary">' + (conteudo.tipo || conteudo.type) + '</span>\n';
            }
            html += '</div>\n';
            html += '</header>\n';
            html += '<article class="content-body">\n';
            html += '<p>' + (conteudo.descricao || conteudo.description || '') + '</p>\n';
            if (conteudo.url) {
                html += '<a href="' + conteudo.url + '" target="_blank" class="btn btn-primary">Acessar Recurso</a>\n';
            }
            html += '</article>\n';
            html += '</div>\n';
            html += '</body>\n</html>';
            return html;
        }

        // Gerar HTML para concurso
        function generateHTMLConcurso(concurso) {
            var html = '<!DOCTYPE html>\n';
            html += '<html lang="pt-BR">\n<head>\n';
            html += '<meta charset="UTF-8">\n';
            html += '<meta name="viewport" content="width=device-width, initial-scale=1.0">\n';
            html += '<title>' + (concurso.nome || concurso.name) + ' | Simulados de Enfermagem</title>\n';
            html += '<meta name="description" content="' + (concurso.descricao || '') + '">\n';
            html += '<meta name="keywords" content="enfermagem,concurso,' + generateSlug(concurso.nome || concurso.name) + '">\n';
            html += '<link rel="stylesheet" href="../../../components/css/components.css">\n';
            html += '<link rel="stylesheet" href="../../../components/css/concursos.css">\n';
            html += '</head>\n<body>\n';
            html += '<div class="concurso-container">\n';
            html += '<header class="concurso-header">\n';
            html += '<h1>' + (concurso.nome || concurso.name) + '</h1>\n';
            html += '<p class="concurso-orgao">' + (concurso.orgao || concurso.institution || '') + '</p>\n';
            html += '</header>\n';
            html += '<div class="concurso-info">\n';
            html += '<div class="info-item"><strong>Estado:</strong> ' + (concurso.estado || concurso.state || 'N/A') + '</div>\n';
            html += '<div class="info-item"><strong>Cidade:</strong> ' + (concurso.cidade || concurso.city || 'N/A') + '</div>\n';
            html += '<div class="info-item"><strong>Cargo:</strong> ' + (concurso.cargo || concurso.positions || 'Enfermeiro') + '</div>\n';
            html += '<div class="info-item"><strong>Salário:</strong> R$ ' + (concurso.salario || concurso.salary || '0,00') + '</div>\n';
            html += '<div class="info-item"><strong>Banca:</strong> ' + (concurso.banca || concurso.exam_board || 'A definir') + '</div>\n';
            html += '<div class="info-item"><strong>Data da Prova:</strong> ' + (concurso.data_prova || concurso.exam_date || 'A definir') + '</div>\n';
            html += '</div>\n';
            html += '<div class="concurso-actions">\n';
            html += '<a href="inscricao.html?id=' + generateSlug(concurso.nome || concurso.name) + '" class="btn btn-primary">Ir para Inscrição</a>\n';
            html += '</div>\n';
            html += '</div>\n';
            html += '</body>\n</html>';
            return html;
        }

        // Função principal para gerar e commitar HTML
        window.gerarHTML = function(type, id, data) {
            var title = data.titulo || data.title || data.nome || data.name || 'Sem título';
            var filename = generateSlug(title) + '.html';
            var filepath = GitHubConfig.basePath + filename;
            var htmlContent;
            
            switch(type) {
                case 'prova':
                    htmlContent = generateHTMLProva(data);
                    break;
                case 'conteudo':
                    htmlContent = generateHTMLConteudo(data);
                    break;
                case 'concurso':
                    htmlContent = generateHTMLConcurso(data);
                    break;
                default:
                    alert('Tipo de conteúdo não suportado: ' + type);
                    return;
            }
            
            var message = generateCommitMessage(type, title);
            
            // Mostrar indicador de progresso
            alert('Iniciando geração de HTML para: ' + title);
            
            // Obter SHA do arquivo existente
            getFileSHA(filepath)
                .then(function(existingFile) {
                    return commitFile(filepath, htmlContent, message, existingFile ? existingFile.sha : null);
                })
                .then(function(response) {
                    var msg = 'HTML gerado e commitado com sucesso!\n\n';
                    msg += 'Arquivo: ' + filename + '\n';
                    msg += 'URL: ' + (response.content ? response.content.html_url : 'N/A');
                    alert(msg);
                })
                .catch(function(error) {
                    console.error('Erro ao gerar HTML:', error);
                    alert('Erro ao gerar HTML: ' + error.message + '\n\nVerifique a configuração do GitHub no código.');
                });
        };

        // Funções wrapper para botões de exemplo
        window.gerarHTMLProvaExemplo = function() {
            var dadosExemplo = {
                titulo: "ENEM 2023 - Saúde",
                descricao: "Prova do ENEM 2023 com questões de saúde e enfermagem",
                ano: "2023",
                orgao: "INEP",
                questoes: "90"
            };
            gerarHTML('prova', null, dadosExemplo);
        };

        window.gerarHTMLConteudoExemplo = function() {
            var dadosExemplo = {
                titulo: "Semiologia em Enfermagem",
                descricao: "Material completo sobre semiologia e semiotécnica",
                categoria: "Saúde",
                tipo: "pdf",
                url: "https://exemplo.com/semiologia.pdf"
            };
            gerarHTML('conteudo', null, dadosExemplo);
        };

        window.gerarHTMLConcursoExemplo = function() {
            var dadosExemplo = {
                nome: "COREN-SP 2024",
                orgao: "Conselho Regional de Enfermagem de São Paulo",
                estado: "SP",
                cidade: "São Paulo",
                cargo: "Enfermeiro",
                salario: "7.500,00",
                banca: "Própria",
                data_prova: "2024-06-15"
            };
            gerarHTML('concurso', null, dadosExemplo);
        };

        // Visualizar Questões de uma Prova
        window.visualizarQuestoesProva = function(provaId) {
            var tableRows = document.querySelectorAll('#questoes-table tr');
            var found = false;
            
            tableRows.forEach(function(row) {
                var rowProvaId = row.getAttribute('data-prova');
                if (rowProvaId === provaId) {
                    row.style.display = '';
                    found = true;
                } else {
                    row.style.display = 'none';
                }
            });
            
            if (found) {
                alert('Exibindo questões da prova: ' + provaId + '\n\nAs questões não correspondentes foram ocultadas.');
            } else {
                alert('Nenhuma questão encontrada para a prova: ' + provaId);
            }
        };

        // Salvar Novo Item de Dados Mestres
        window.salvarMestre = async function() {
            const tipo = document.getElementById('mestre-tipo').value;
            const nome = document.getElementById('mestre-nome').value;
            const descricao = document.getElementById('mestre-descricao').value;
            
            if (!tipo || !nome) {
                alert('Por favor, preencha o tipo e o nome do dado mestre.');
                return;
            }
            
            const dadoMestreData = {
                type: tipo,
                name: nome,
                description: descricao,
                active: true,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            try {
                const response = await fetch('/api/dados-mestres', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(dadoMestreData)
                });
                
                const result = await response.json();
                console.log('Resposta do servidor:', result);
                
                if (response.ok) {
                    alert('Item de dados mestres salvo com sucesso!');
                    AdminPanel.closeModal('novoMestre');
                    
                    // Recarregar dados mestres e atualizar dropdowns
                    if (typeof window.carregarDadosMestresAPI === 'function') {
                        window.carregarDadosMestresAPI();
                    }
                    if (typeof window.popularDropdowns === 'function') {
                        window.popularDropdowns();
                    }
                } else {
                    alert('Erro ao salvar dados mestres: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao salvar dados mestres: ' + error.message);
            }
        };

        // ==================== FUNÇÕES DE EDIÇÃO (PUT) ====================

        // Editar Prova
        window.editarProva = async function(id) {
            if (!id) return;
            
            // Buscar dados atuais da prova
            try {
                const response = await fetch('/api/provas/' + encodeURIComponent(id));
                if (!response.ok) {
                    alert('Erro ao carregar dados da prova.');
                    return;
                }
                
                const prova = await response.json();
                
                // Preencher formulário com dados existentes
                document.getElementById('prova-titulo').value = prova.title || '';
                document.getElementById('prova-banca').value = prova.examBoard || '';
                document.getElementById('prova-data').value = prova.date || '';
                document.getElementById('prova-questoes').value = prova.questionCount || 0;
                
                // Abrir modal em modo de edição
                openModal('novaProva');
                
                // Modificar botão de salvar para atualizar
                const saveBtn = document.querySelector('#modal-novaProva .modal-footer .btn-primary');
                if (saveBtn) {
                    saveBtn.innerHTML = '<i class="fas fa-save"></i> Atualizar Prova';
                    saveBtn.onclick = function() {
                        window.atualizarProva(id);
                    };
                }
            } catch (error) {
                console.error('Erro ao carregar prova:', error);
                alert('Erro ao carregar prova para edição.');
            }
        };

        // Atualizar Prova (PUT)
        window.atualizarProva = async function(id) {
            if (!id) return;
            
            const provaData = {
                title: document.getElementById('prova-titulo').value,
                examBoard: document.getElementById('prova-banca').value,
                date: document.getElementById('prova-data').value,
                questionCount: parseInt(document.getElementById('prova-questoes').value) || 0,
                updatedAt: new Date().toISOString()
            };
            
            try {
                const response = await fetch('/api/provas/' + encodeURIComponent(id), {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(provaData)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    alert('Prova atualizada com sucesso!');
                    AdminPanel.closeModal('novaProva');
                    
                    // Restaurar botão original
                    const saveBtn = document.querySelector('#modal-novaProva .modal-footer .btn-primary');
                    if (saveBtn) {
                        saveBtn.innerHTML = '<i class="fas fa-save"></i> Salvar Prova';
                        saveBtn.onclick = window.salvarProva;
                    }
                    
                    if (typeof carregarProvas === 'function') {
                        carregarProvas();
                    }
                } else {
                    alert('Erro ao atualizar prova: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao atualizar prova: ' + error.message);
            }
        };

        // Editar Concurso
        window.editarConcurso = async function(id) {
            if (!id) return;
            
            try {
                const response = await fetch('/api/concursos/' + encodeURIComponent(id));
                if (!response.ok) {
                    alert('Erro ao carregar dados do concurso.');
                    return;
                }
                
                const concurso = await response.json();
                
                // Preencher formulário
                document.getElementById('concurso-titulo').value = concurso.name || '';
                document.getElementById('concurso-orgao').value = concurso.institution || '';
                document.getElementById('concurso-estado').value = concurso.state || '';
                document.getElementById('concurso-cidade').value = concurso.city || '';
                document.getElementById('concurso-banca').value = concurso.examBoard || '';
                document.getElementById('concurso-data-prova').value = concurso.examDate || '';
                document.getElementById('concurso-inscricao-inicio').value = concurso.registrationStart || '';
                document.getElementById('concurso-inscricao-fim').value = concurso.registrationEnd || '';
                document.getElementById('concurso-cargos').value = concurso.positions || '';
                document.getElementById('concurso-salario').value = concurso.salary || '';
                document.getElementById('concurso-tipo').value = concurso.examType || '';
                document.getElementById('concurso-status').value = concurso.status || 'rascunho';
                
                openModal('novoConcurso');
                
                const saveBtn = document.querySelector('#modal-novoConcurso .modal-footer .btn-primary');
                if (saveBtn) {
                    saveBtn.innerHTML = '<i class="fas fa-save"></i> Atualizar Concurso';
                    saveBtn.onclick = function() {
                        window.atualizarConcurso(id);
                    };
                }
            } catch (error) {
                console.error('Erro ao carregar concurso:', error);
            }
        };

        // Atualizar Concurso (PUT)
        window.atualizarConcurso = async function(id) {
            if (!id) return;
            
            const concursoData = {
                name: document.getElementById('concurso-titulo').value,
                institution: document.getElementById('concurso-orgao').value,
                state: document.getElementById('concurso-estado').value,
                city: document.getElementById('concurso-cidade').value,
                examBoard: document.getElementById('concurso-banca').value,
                examDate: document.getElementById('concurso-data-prova').value,
                registrationStart: document.getElementById('concurso-inscricao-inicio').value,
                registrationEnd: document.getElementById('concurso-inscricao-fim').value,
                positions: document.getElementById('concurso-cargos').value,
                salary: document.getElementById('concurso-salario').value,
                examType: document.getElementById('concurso-tipo').value,
                status: document.getElementById('concurso-status').value,
                updatedAt: new Date().toISOString()
            };
            
            try {
                const response = await fetch('/api/concursos/' + encodeURIComponent(id), {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(concursoData)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    alert('Concurso atualizado com sucesso!');
                    AdminPanel.closeModal('novoConcurso');
                    
                    const saveBtn = document.querySelector('#modal-novoConcurso .modal-footer .btn-primary');
                    if (saveBtn) {
                        saveBtn.innerHTML = '<i class="fas fa-save"></i> Salvar Concurso';
                        saveBtn.onclick = window.salvarConcurso;
                    }
                    
                    if (typeof carregarConcursos === 'function') {
                        carregarConcursos();
                    }
                } else {
                    alert('Erro ao atualizar concurso: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao atualizar concurso: ' + error.message);
            }
        };

        // Editar Questão
        window.editarQuestao = async function(id) {
            if (!id) return;
            
            try {
                const response = await fetch('/api/questoes/' + encodeURIComponent(id));
                if (!response.ok) {
                    alert('Erro ao carregar dados da questão.');
                    return;
                }
                
                const questao = await response.json();
                
                // Preencher formulário
                document.getElementById('questao-texto').value = questao.question || '';
                document.getElementById('questao-topico').value = questao.topic || '';
                document.getElementById('questao-dificuldade').value = questao.difficulty || '';
                document.getElementById('questao-explicacao').value = questao.explanation || '';
                document.getElementById('questao-tipo-prova').value = questao.examType || '';
                document.getElementById('questao-orgao').value = questao.institution || '';
                document.getElementById('questao-ano').value = questao.year || '';
                document.getElementById('questao-tags').value = questao.tags || '';
                
                // Preencher alternativas (simplificado)
                // Em uma implementação completa, você recriaria as alternativas dinamicamente
                
                openModal('novaQuestao');
                
                const saveBtn = document.querySelector('#modal-novaQuestao .modal-footer .btn-primary');
                if (saveBtn) {
                    saveBtn.innerHTML = '<i class="fas fa-save"></i> Atualizar Questão';
                    saveBtn.onclick = function() {
                        window.atualizarQuestao(id);
                    };
                }
            } catch (error) {
                console.error('Erro ao carregar questão:', error);
            }
        };

        // Atualizar Questão (PUT)
        window.atualizarQuestao = async function(id) {
            if (!id) return;
            
            const alternativas = [];
            const alternativaInputs = document.querySelectorAll('#alternativas-container .alternativa-item');
            alternativaInputs.forEach(function(item) {
                const texto = item.querySelector('.alternativa-texto').value;
                const correta = item.querySelector('input[type="radio"]').checked;
                alternativas.push({ text: texto, correct: correta });
            });
            
            const questaoData = {
                question: document.getElementById('questao-texto').value,
                topic: document.getElementById('questao-topico').value,
                difficulty: document.getElementById('questao-dificuldade').value,
                answers: alternativas,
                explanation: document.getElementById('questao-explicacao').value,
                examType: document.getElementById('questao-tipo-prova').value,
                institution: document.getElementById('questao-orgao').value,
                year: document.getElementById('questao-ano').value,
                tags: document.getElementById('questao-tags').value,
                updatedAt: new Date().toISOString()
            };
            
            try {
                const response = await fetch('/api/questoes/' + encodeURIComponent(id), {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(questaoData)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    alert('Questão atualizada com sucesso!');
                    AdminPanel.closeModal('novaQuestao');
                    
                    const saveBtn = document.querySelector('#modal-novaQuestao .modal-footer .btn-primary');
                    if (saveBtn) {
                        saveBtn.innerHTML = '<i class="fas fa-save"></i> Salvar Questão';
                        saveBtn.onclick = window.salvarQuestao;
                    }
                    
                    if (typeof carregarQuestoes === 'function') {
                        carregarQuestoes();
                    }
                } else {
                    alert('Erro ao atualizar questão: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao atualizar questão: ' + error.message);
            }
        };

        // ==================== FIM FUNÇÕES DE EDIÇÃO ====================

        // ==================== FUNÇÕES DE API (CARREGAR E EXCLUIR) ====================

        // Carregar Provas da API
        window.carregarProvas = async function() {
            try {
                const response = await fetch('/api/provas');
                const provas = await response.json();
                console.log('Provas carregadas:', provas);

                // Buscar quantidade de questões vinculadas para cada prova
                const provasComQuestoes = await Promise.all(provas.map(async function(prova) {
                    try {
                        const vinculosResponse = await fetch('/api/provas-questoes?provaId=' + encodeURIComponent(prova.id));
                        if (vinculosResponse.ok) {
                            const vinculos = await vinculosResponse.json();
                            return { ...prova, linkedQuestionsCount: vinculos.length };
                        }
                    } catch (e) {
                        console.warn('Erro ao buscar vínculos para prova ' + prova.id, e);
                    }
                    return { ...prova, linkedQuestionsCount: 0 };
                }));

                // Renderizar provas no sidebar
                renderProvasSidebar(provasComQuestoes);

                // Atualizar contador
                if (document.getElementById('total-provas')) {
                    document.getElementById('total-provas').textContent = provas.length;
                }
            } catch (error) {
                console.error('Erro ao carregar provas:', error);
            }
        };

        // Renderizar provas no sidebar
        window.renderProvasSidebar = function(provas) {
            const sidebar = document.getElementById('provas-list');
            if (!sidebar) return;

            // Preservar a primeira opção (selecionar prova) se existir
            const firstChild = sidebar.firstElementChild;
            const hasEmptyOption = firstChild && firstChild.classList.contains('no-prova-selected');

            if (provas.length === 0) {
                sidebar.innerHTML = '<div class="no-prova-selected" style="padding: 20px;">' +
                    '<i class="fas fa-inbox"></i>' +
                    '<p>Nenhuma prova encontrada.</p>' +
                    '</div>';
                return;
            }

            let html = '';

            // Opção para mostrar todas as questões (opcional)
            html += '<div class="prova-item" onclick="selecionarProva(null)" data-prova-id="">' +
                '<div class="prova-item-header">' +
                '<div class="prova-item-title"><i class="fas fa-globe"></i> Todas as Questões</div>' +
                '</div>' +
                '<div class="prova-item-meta">' +
                '<span><i class="fas fa-layer-group"></i> Ver banco completo</span>' +
                '</div>' +
                '</div>';

            provas.forEach(function(prova) {
                // Determinar classe e texto do status
                let statusClass = 'status-draft';
                let statusText = 'Rascunho';

                if (prova.status === 'publicado') {
                    statusClass = 'status-published';
                    statusText = 'Publicado';
                } else if (prova.status === 'desabilitado') {
                    statusClass = 'status-pending';
                    statusText = 'Desabilitado';
                }

                const linkedCount = prova.linkedQuestionsCount || 0;
                const maxQuestions = prova.questionCount || 0;
                const questionsText = maxQuestions > 0 ? linkedCount + ' / ' + maxQuestions : linkedCount + '';

                html += '<div class="prova-item" onclick="selecionarProva(\'' + (prova.id || '') + '\')" data-prova-id="' + (prova.id || '') + '">' +
                    '<div class="prova-item-header">' +
                    '<div class="prova-item-title">' + (prova.title || 'Sem título') + '</div>' +
                    '<span class="prova-item-status ' + statusClass + '">' + statusText + '</span>' +
                    '</div>' +
                    '<div class="prova-item-meta">' +
                    '<span><i class="fas fa-question-circle"></i> ' + questionsText + ' questões</span>' +
                    '</div>' +
                    '</div>';
            });

            sidebar.innerHTML = html;
        };

        // Selecionar uma prova e mostrar suas questões
        window.selecionarProva = function(provaId) {
            // Atualizar visualização dos itens no sidebar
            const sidebar = document.getElementById('provas-list');
            if (sidebar) {
                sidebar.querySelectorAll('.prova-item').forEach(function(item) {
                    item.classList.remove('active');
                    if (item.getAttribute('data-prova-id') === (provaId || '')) {
                        item.classList.add('active');
                    }
                });
            }

            // Atualizar título e mostrar/esconder botão de nova questão
            const titleEl = document.getElementById('questoes-content-title');
            const btnEl = document.getElementById('btn-add-questao-sidebar');
            const noMessageEl = document.getElementById('no-prova-message');
            const tableEl = document.getElementById('questoes-sidebar-table');

            if (provaId) {
                // Prova específica selecionada
                // Buscar informações da prova
                fetch('/api/provas/' + encodeURIComponent(provaId))
                    .then(function(res) { return res.json(); })
                    .then(function(prova) {
                        titleEl.innerHTML = '<i class="fas fa-file-alt"></i><span>Questões: ' + (prova.title || provaId) + '</span>';
                    })
                    .catch(function() {
                        titleEl.innerHTML = '<i class="fas fa-file-alt"></i><span>Questões da Prova</span>';
                    });

                btnEl.style.display = 'flex';
                noMessageEl.style.display = 'none';
                tableEl.style.display = 'table';

                // Carregar questões da prova
                window.carregarQuestoesDaProva(provaId);
            } else {
                // Mostrar todas as questões
                titleEl.innerHTML = '<i class="fas fa-layer-group"></i><span>Todas as Questões</span>';
                btnEl.style.display = 'flex';
                noMessageEl.style.display = 'none';
                tableEl.style.display = 'table';

                // Carregar todas as questões
                window.carregarQuestoes();
            }
        };

        // Carregar questões de uma prova específica
        window.carregarQuestoesDaProva = function(provaId) {
            const tableBody = document.getElementById('questoes-sidebar-table-body');
            if (!tableBody) return;

            tableBody.innerHTML = '<tr><td colspan="6" style="text-align: center;"><i class="fas fa-spinner fa-spin"></i> Carregando...</td></tr>';

            fetch('/api/questoes?provaId=' + encodeURIComponent(provaId))
                .then(function(response) { return response.json(); })
                .then(function(questoes) {
                    tableBody.innerHTML = '';

                    if (questoes.length === 0) {
                        tableBody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: var(--text-secondary);">Nenhuma questão vinculada a esta prova.</td></tr>';
                        return;
                    }

                    questoes.forEach(function(questao) {
                        let statusClass = 'status-draft';
                        let statusText = 'Rascunho';

                        if (questao.status === 'publicado') {
                            statusClass = 'status-published';
                            statusText = 'Publicado';
                        }

                        const row = document.createElement('tr');
                        row.setAttribute('data-prova', provaId);
                        row.innerHTML = '<td>' + (questao.id || 'N/A') + '</td>' +
                            '<td>' + (questao.question ? questao.question.substring(0, 60) + '...' : 'Sem texto') + '</td>' +
                            '<td>' + (questao.topic || 'N/A') + '</td>' +
                            '<td><span class="status ' + statusClass + '">' + (questao.difficulty || 'N/A') + '</span></td>' +
                            '<td><span class="status ' + statusClass + '">' + statusText + '</span></td>' +
                            '<td>' +
                            '<button class="btn btn-sm btn-outline" onclick="editarQuestao(\'' + (questao.id || '') + '\')"><i class="fas fa-edit"></i></button> ' +
                            '<button class="btn btn-sm btn-danger" onclick="excluirQuestao(\'' + (questao.id || '') + '\')"><i class="fas fa-trash"></i></button>' +
                            '</td>';
                        tableBody.appendChild(row);
                    });
                })
                .catch(function(error) {
                    console.error('Erro ao carregar questões:', error);
                    tableBody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: var(--text-secondary);">Erro ao carregar questões.</td></tr>';
                });
        };

        // Alternar visibilidade do sidebar de provas
        window.toggleProvasSidebar = function() {
            const sidebar = document.getElementById('provas-sidebar');
            const icon = document.getElementById('sidebar-toggle-icon');

            if (sidebar && icon) {
                sidebar.classList.toggle('collapsed');
                icon.classList.toggle('fa-chevron-left');
                icon.classList.toggle('fa-chevron-right');
            }
        };

        // ==================== FUNÇÕES DE CONTEÚDOS ====================

        // Carregar Conteúdos da API
        window.carregarConteudos = async function() {
            try {
                const response = await fetch('/api/conteudos');
                const conteudos = await response.json();
                console.log('Conteúdos carregados:', conteudos);

                // Renderizar conteúdos no sidebar
                renderConteudosSidebar(conteudos);

                // Atualizar contador
                if (document.getElementById('total-conteudos')) {
                    document.getElementById('total-conteudos').textContent = conteudos.length;
                }
            } catch (error) {
                console.error('Erro ao carregar conteúdos:', error);
            }
        };

        // Renderizar conteúdos no sidebar
        window.renderConteudosSidebar = function(conteudos) {
            const sidebar = document.getElementById('conteudos-list');
            if (!sidebar) return;

            if (conteudos.length === 0) {
                sidebar.innerHTML = '<div class="no-item-selected" style="padding: 20px;">' +
                    '<i class="fas fa-inbox"></i>' +
                    '<p>Nenhum conteúdo encontrado.</p>' +
                    '</div>';
                return;
            }

            let html = '';

            conteudos.forEach(function(conteudo) {
                // Determinar classe e texto do status
                let statusClass = 'status-draft';
                let statusText = 'Rascunho';

                if (conteudo.status === 'publicado') {
                    statusClass = 'status-published';
                    statusText = 'Publicado';
                } else if (conteudo.status === 'desabilitado') {
                    statusClass = 'status-pending';
                    statusText = 'Desabilitado';
                }

                // Determinar tipo e ícone
                let typeClass = 'type-conteudo';
                let typeText = 'Conteúdo';
                let typeIcon = 'fa-book';

                if (conteudo.type === 'quiz') {
                    typeClass = 'type-quiz';
                    typeText = 'Quiz';
                    typeIcon = 'fa-question-circle';
                } else if (conteudo.type === 'biblioteca') {
                    typeClass = 'type-biblioteca';
                    typeText = 'Biblioteca';
                    typeIcon = 'fa-book-open';
                }

                html += '<div class="conteudo-item" onclick="selecionarConteudo(\'' + (conteudo.id || '') + '\')" data-conteudo-id="' + (conteudo.id || '') + '">' +
                    '<div class="conteudo-item-header">' +
                    '<div class="conteudo-item-title"><i class="fas ' + typeIcon + '"></i> ' + (conteudo.title || 'Sem título') + '</div>' +
                    '<span class="conteudo-type-badge ' + typeClass + '">' + typeText + '</span>' +
                    '</div>' +
                    '<div class="conteudo-item-meta">' +
                    '<span><i class="fas fa-tag"></i> ' + (conteudo.category || 'Sem categoria') + '</span>' +
                    '<span><i class="fas fa-eye"></i> ' + (conteudo.viewCount || 0) + ' views</span>' +
                    '<span class="conteudo-type-badge ' + statusClass + '">' + statusText + '</span>' +
                    '</div>' +
                    '</div>';
            });

            sidebar.innerHTML = html;
        };

        // Selecionar um conteúdo e mostrar seus detalhes
        window.selecionarConteudo = function(conteudoId) {
            // Atualizar visualização dos itens no sidebar
            const sidebar = document.getElementById('conteudos-list');
            if (sidebar) {
                sidebar.querySelectorAll('.conteudo-item').forEach(function(item) {
                    item.classList.remove('active');
                    if (item.getAttribute('data-conteudo-id') === conteudoId) {
                        item.classList.add('active');
                    }
                });
            }

            // Atualizar título e mostrar/esconder botão de novo conteúdo
            const titleEl = document.getElementById('conteudo-content-title');
            const btnEl = document.getElementById('btn-new-conteudo-sidebar');
            const noMessageEl = document.getElementById('no-conteudo-message');
            const detailViewEl = document.getElementById('conteudo-detail-view');
            const metaGridEl = document.getElementById('conteudo-meta-grid');
            const descTextEl = document.getElementById('conteudo-description-text');
            const actionsEl = document.getElementById('conurso-actions');

            if (conteudoId) {
                // Buscar informações do conteúdo
                fetch('/api/conteudos/' + encodeURIComponent(conteudoId))
                    .then(function(res) { return res.json(); })
                    .then(function(conteudo) {
                        titleEl.innerHTML = '<i class="fas fa-book"></i><span>' + (conteudo.title || 'Conteúdo') + '</span>';

                        // Preencher metadados
                        let metaHtml = '';

                        // Tipo
                        let tipoTexto = 'Conteúdo';
                        let tipoIcon = 'fa-book';
                        if (conteudo.type === 'quiz') {
                            tipoTexto = 'Quiz';
                            tipoIcon = 'fa-question-circle';
                        } else if (conteudo.type === 'biblioteca') {
                            tipoTexto = 'Biblioteca';
                            tipoIcon = 'fa-book-open';
                        }

                        metaHtml += '<div class="detail-meta-item"><label>Tipo</label><span><i class="fas ' + tipoIcon + '"></i> ' + tipoTexto + '</span></div>';

                        // Categoria
                        if (conteudo.category) {
                            metaHtml += '<div class="detail-meta-item"><label>Categoria</label><span><i class="fas fa-tag"></i> ' + conteudo.category + '</span></div>';
                        }

                        // Visualizações
                        if (conteudo.viewCount !== undefined) {
                            metaHtml += '<div class="detail-meta-item"><label>Visualizações</label><span><i class="fas fa-eye"></i> ' + conteudo.viewCount + '</span></div>';
                        }

                        // Data de criação
                        if (conteudo.createdAt) {
                            const data = new Date(conteudo.createdAt).toLocaleDateString('pt-BR');
                            metaHtml += '<div class="detail-meta-item"><label>Criado em</label><span><i class="fas fa-calendar"></i> ' + data + '</span></div>';
                        }

                        // Slug
                        if (conteudo.slug) {
                            metaHtml += '<div class="detail-meta-item"><label>Slug</label><span>' + conteudo.slug + '</span></div>';
                        }

                        metaGridEl.innerHTML = metaHtml;

                        // Descrição
                        descTextEl.textContent = conteudo.description || 'Sem descrição disponível.';

                        // Botões de ação
                        const conteudoId = conteudo.id || '';
                        actionsEl.innerHTML =
                            '<button class="btn btn-sm btn-outline" onclick="editarConteudo(\'' + conteudoId + '\')"><i class="fas fa-edit"></i> Editar</button>' +
                            '<button class="btn btn-sm btn-warning" onclick="gerarHTMLConteudo(\'' + conteudoId + '\')"><i class="fas fa-file-code"></i> Gerar HTML</button>' +
                            '<button class="btn btn-sm btn-danger" onclick="excluirConteudo(\'' + conteudoId + '\')"><i class="fas fa-trash"></i> Excluir</button>';

                        btnEl.style.display = 'flex';
                        noMessageEl.style.display = 'none';
                        detailViewEl.style.display = 'block';
                    })
                    .catch(function() {
                        titleEl.innerHTML = '<i class="fas fa-book"></i><span>Erro ao carregar</span>';
                    });
            } else {
                titleEl.innerHTML = '<i class="fas fa-layer-group"></i><span>Todos os Conteúdos</span>';
                btnEl.style.display = 'flex';
                noMessageEl.style.display = 'flex';
                detailViewEl.style.display = 'none';
            }
        };

        // Alternar visibilidade do sidebar de conteúdos
        window.toggleConteudosSidebar = function() {
            const sidebar = document.getElementById('conteudos-sidebar');
            const icon = document.getElementById('conteudos-sidebar-toggle-icon');

            if (sidebar && icon) {
                sidebar.classList.toggle('collapsed');
                icon.classList.toggle('fa-chevron-left');
                icon.classList.toggle('fa-chevron-right');
            }
        };

        // ==================== FUNÇÕES DE CONCURSOS ====================

        // Carregar Concursos da API
        window.carregarConcursos = async function() {
            try {
                const response = await fetch('/api/concursos');
                const concursos = await response.json();
                console.log('Concursos carregados:', concursos);

                // Renderizar concursos no sidebar
                renderConcursosSidebar(concursos);

                // Atualizar contador
                if (document.getElementById('total-concursos')) {
                    document.getElementById('total-concursos').textContent = concursos.length;
                }
            } catch (error) {
                console.error('Erro ao carregar concursos:', error);
            }
        };

        // Renderizar concursos no sidebar
        window.renderConcursosSidebar = function(concursos) {
            const sidebar = document.getElementById('concursos-list');
            if (!sidebar) return;

            if (concursos.length === 0) {
                sidebar.innerHTML = '<div class="no-item-selected" style="padding: 20px;">' +
                    '<i class="fas fa-inbox"></i>' +
                    '<p>Nenhum concurso encontrado.</p>' +
                    '</div>';
                return;
            }

            let html = '';

            concursos.forEach(function(concurso) {
                // Determinar classe e texto do status
                let statusClass = 'status-draft';
                let statusText = 'Rascunho';

                if (concurso.status === 'publicado') {
                    statusClass = 'status-published';
                    statusText = 'Publicado';
                } else if (concurso.status === 'encerrado') {
                    statusClass = 'status-pending';
                    statusText = 'Encerrado';
                }

                // Data da prova
                const examDate = concurso.examDate ? new Date(concurso.examDate).toLocaleDateString('pt-BR') : 'Não definida';

                // Institución/Órgão
                const institution = concurso.institution || concurso.name || 'Sem órgão';

                html += '<div class="concurso-item" onclick="selecionarConcurso(\'' + (concurso.id || '') + '\')" data-concurso-id="' + (concurso.id || '') + '">' +
                    '<div class="concurso-item-header">' +
                    '<div class="concurso-item-title"><i class="fas fa-trophy"></i> ' + (concurso.name || 'Sem título') + '</div>' +
                    '<span class="conteudo-type-badge ' + statusClass + '">' + statusText + '</span>' +
                    '</div>' +
                    '<div class="concurso-item-meta">' +
                    '<span><i class="fas fa-building"></i> ' + institution + '</span>' +
                    '<span><i class="fas fa-calendar"></i> ' + examDate + '</span>' +
                    '</div>' +
                    '</div>';
            });

            sidebar.innerHTML = html;
        };

        // Selecionar um concurso e mostrar seus detalhes
        window.selecionarConcurso = function(concursoId) {
            // Atualizar visualização dos itens no sidebar
            const sidebar = document.getElementById('concursos-list');
            if (sidebar) {
                sidebar.querySelectorAll('.concurso-item').forEach(function(item) {
                    item.classList.remove('active');
                    if (item.getAttribute('data-concurso-id') === concursoId) {
                        item.classList.add('active');
                    }
                });
            }

            // Atualizar título e mostrar/esconder botão de novo concurso
            const titleEl = document.getElementById('concurso-content-title');
            const btnEl = document.getElementById('btn-new-concurso-sidebar');
            const noMessageEl = document.getElementById('no-concurso-message');
            const detailViewEl = document.getElementById('concurso-detail-view');
            const metaGridEl = document.getElementById('concurso-meta-grid');
            const descTextEl = document.getElementById('concurso-description-text');
            const actionsEl = document.getElementById('concurso-actions');

            if (concursoId) {
                // Buscar informações do concurso
                fetch('/api/concursos/' + encodeURIComponent(concursoId))
                    .then(function(res) { return res.json(); })
                    .then(function(concurso) {
                        titleEl.innerHTML = '<i class="fas fa-trophy"></i><span>' + (concurso.name || 'Concurso') + '</span>';

                        // Preencher metadados
                        let metaHtml = '';

                        // Órgão/Instituição
                        if (concurso.institution) {
                            metaHtml += '<div class="detail-meta-item"><label>Órgão</label><span><i class="fas fa-building"></i> ' + concurso.institution + '</span></div>';
                        }

                        // Estado
                        if (concurso.state) {
                            metaHtml += '<div class="detail-meta-item"><label>Estado</label><span><i class="fas fa-map-marker-alt"></i> ' + concurso.state + '</span></div>';
                        }

                        // Cidade
                        if (concurso.city) {
                            metaHtml += '<div class="detail-meta-item"><label>Cidade</label><span><i class="fas fa-city"></i> ' + concurso.city + '</span></div>';
                        }

                        // Banca
                        if (concurso.examBoard) {
                            metaHtml += '<div class="detail-meta-item"><label>Banca</label><span><i class="fas fa-gavel"></i> ' + concurso.examBoard + '</span></div>';
                        }

                        // Data da prova
                        if (concurso.examDate) {
                            const data = new Date(concurso.examDate).toLocaleDateString('pt-BR');
                            metaHtml += '<div class="detail-meta-item"><label>Data da Prova</label><span><i class="fas fa-calendar"></i> ' + data + '</span></div>';
                        }

                        // Vagas/Cargos
                        if (concurso.positions) {
                            metaHtml += '<div class="detail-meta-item"><label>Vagas</label><span><i class="fas fa-users"></i> ' + concurso.positions + '</span></div>';
                        }

                        // Salário
                        if (concurso.salary) {
                            metaHtml += '<div class="detail-meta-item"><label>Salário</label><span><i class="fas fa-money-bill"></i> ' + concurso.salary + '</span></div>';
                        }

                        metaGridEl.innerHTML = metaHtml;

                        // Descrição
                        descTextEl.textContent = concurso.description || 'Sem descrição disponível.';

                        // Botões de ação
                        const concursoId = concurso.id || '';
                        actionsEl.innerHTML =
                            '<button class="btn btn-sm btn-outline" onclick="editarConcurso(\'' + concursoId + '\')"><i class="fas fa-edit"></i> Editar</button>' +
                            '<button class="btn btn-sm btn-warning" onclick="gerarHTMLConcurso(\'' + concursoId + '\')"><i class="fas fa-file-code"></i> Gerar HTML</button>' +
                            '<button class="btn btn-sm btn-danger" onclick="excluirConcurso(\'' + concursoId + '\')"><i class="fas fa-trash"></i> Excluir</button>';

                        btnEl.style.display = 'flex';
                        noMessageEl.style.display = 'none';
                        detailViewEl.style.display = 'block';
                    })
                    .catch(function() {
                        titleEl.innerHTML = '<i class="fas fa-trophy"></i><span>Erro ao carregar</span>';
                    });
            } else {
                titleEl.innerHTML = '<i class="fas fa-layer-group"></i><span>Todos os Concursos</span>';
                btnEl.style.display = 'flex';
                noMessageEl.style.display = 'flex';
                detailViewEl.style.display = 'none';
            }
        };

        // Alternar visibilidade do sidebar de concursos
        window.toggleConcursosSidebar = function() {
            const sidebar = document.getElementById('concursos-sidebar');
            const icon = document.getElementById('concursos-sidebar-toggle-icon');

            if (sidebar && icon) {
                sidebar.classList.toggle('collapsed');
                icon.classList.toggle('fa-chevron-left');
                icon.classList.toggle('fa-chevron-right');
            }
        };

        // ==================== FIM FUNÇÕES INTEGRADAS ====================

        // Renderizar provas no grid (mantido para compatibilidade)
        function renderProvas(provas) {
            const grid = document.getElementById('provas-grid');
            if (!grid) return;

            grid.innerHTML = '';

            if (provas.length === 0) {
                grid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: var(--text-secondary);">Nenhuma prova encontrada.</p>';
                return;
            }

            provas.forEach(function(prova) {
                const card = document.createElement('div');
                card.className = 'resource-card';
                card.setAttribute('data-id', prova.id || prova.title);

                // Determinar classe e texto do status
                let statusClass = 'status-draft';
                let statusText = 'Rascunho';
                let statusIcon = 'fa-clock';

                if (prova.status === 'publicado') {
                    statusClass = 'status-published';
                    statusText = 'Publicado';
                    statusIcon = 'fa-check-circle';
                } else if (prova.status === 'desabilitado') {
                    statusClass = 'status-pending';
                    statusText = 'Desabilitado';
                    statusIcon = 'fa-ban';
                }

                const provaId = prova.id || '';
                const linkedCount = prova.linkedQuestionsCount || 0;
                const maxQuestions = prova.questionCount || 0;
                const canAddQuestion = maxQuestions === 0 || linkedCount < maxQuestions;
                const questionsProgress = maxQuestions > 0 ? linkedCount + ' / ' + maxQuestions : linkedCount + '';

                // Determinar disponibilidade do botão Add Questão
                const addButtonClass = canAddQuestion ? 'btn-secondary' : 'btn-outline';
                const addButtonDisabled = canAddQuestion ? '' : 'disabled style="opacity: 0.5; cursor: not-allowed;"';
                const addButtonTitle = canAddQuestion ? 'Adicionar questão à prova' : 'Limite de questões atingido';

                // Botão de habilitar/desabilitar
                const toggleStatusBtn = prova.status === 'desabilitado'
                    ? '<button class="btn btn-sm btn-success" onclick="habilitarProva(\'' + provaId + '\')" title="Habilitar prova"><i class="fas fa-check"></i> Habilitar</button>'
                    : '<button class="btn btn-sm btn-warning" onclick="desabilitarProva(\'' + provaId + '\')" title="Desabilitar prova"><i class="fas fa-ban"></i> Desabilitar</button>';

                card.innerHTML = '<span class="status ' + statusClass + '"><i class="fas ' + statusIcon + '"></i>' + statusText + '</span>' +
                    '<h3><i class="fas fa-file-alt"></i> ' + (prova.title || 'Sem título') + '</h3>' +
                    '<div class="meta">' +
                    '<span><i class="fas fa-calendar"></i> ' + (prova.year || 'N/A') + '</span>' +
                    '<span><i class="fas fa-hashtag"></i> ID: ' + (prova.id || 'N/A') + '</span>' +
                    '<span><i class="fas fa-question-circle"></i> ' + questionsProgress + ' questões</span>' +
                    '</div>' +
                    '<p>' + (prova.description || '') + '</p>' +
                    '<div class="actions">' +
                    '<button class="btn btn-sm btn-primary" onclick="visualizarQuestoesProva(\'' + provaId + '\')" title="Ver questões vinculadas"><i class="fas fa-eye"></i> Ver Questões</button>' +
                    '<button class="btn btn-sm ' + addButtonClass + '" onclick="abrirModalAdicionarQuestao(\'' + provaId + '\')" ' + addButtonTitle + ' ' + addButtonDisabled + '><i class="fas fa-plus"></i> Add Questão</button>' +
                    '<button class="btn btn-sm btn-warning" onclick="gerarHTMLProva(\'' + provaId + '\')" title="Gerar HTML"><i class="fas fa-file-code"></i> Gerar HTML</button>' +
                    '<button class="btn btn-sm btn-outline" onclick="editarProva(\'' + provaId + '\')" title="Editar prova"><i class="fas fa-edit"></i> Editar</button>' +
                    toggleStatusBtn +
                    '<button class="btn btn-sm btn-danger" onclick="excluirProva(\'' + provaId + '\')" title="Excluir prova"><i class="fas fa-trash"></i></button>' +
                    '</div>';

                grid.appendChild(card);
            });
        }

        // Excluir Prova
        window.excluirProva = async function(id) {
            if (!id) return;

            var confirmacao = confirm('Tem certeza que deseja excluir esta prova?\n\nTodas as questões vinculadas a esta prova também serão desvinculadas.\n\nEsta ação não pode ser desfeita.');
            if (!confirmacao) return;

            try {
                // Primeiro, buscar e excluir vínculos de questões
                const vinculosResponse = await fetch('/api/provas-questoes?provaId=' + encodeURIComponent(id));
                if (vinculosResponse.ok) {
                    const vinculos = await vinculosResponse.json();
                    for (const vinculo of vinculos) {
                        await fetch('/api/provas-questoes/' + encodeURIComponent(vinculo.id), {
                            method: 'DELETE'
                        });
                    }
                }

                // Depois, excluir a prova
                const response = await fetch('/api/provas/' + encodeURIComponent(id), {
                    method: 'DELETE'
                });

                const result = await response.json();
                console.log('Resposta do servidor:', result);

                if (response.ok) {
                    alert('Prova excluída com sucesso!');
                    if (typeof carregarProvas === 'function') {
                        carregarProvas();
                    }
                    if (typeof carregarQuestoes === 'function') {
                        carregarQuestoes();
                    }
                } else {
                    alert('Erro ao excluir prova: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao excluir prova: ' + error.message);
            }
        };

        // Desabilitar Prova
        window.desabilitarProva = async function(id) {
            if (!id) return;

            var confirmacao = confirm('Tem certeza que deseja desabilitar esta prova?\n\nA prova não estará mais disponível para uso.');
            if (!confirmacao) return;

            try {
                const response = await fetch('/api/provas/' + encodeURIComponent(id), {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        status: 'desabilitado',
                        updatedAt: new Date().toISOString()
                    })
                });

                const result = await response.json();

                if (response.ok) {
                    alert('Prova desabilitada com sucesso!');
                    if (typeof carregarProvas === 'function') {
                        carregarProvas();
                    }
                } else {
                    alert('Erro ao desabilitar prova: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao desabilitar prova: ' + error.message);
            }
        };

        // Habilitar Prova
        window.habilitarProva = async function(id) {
            if (!id) return;

            try {
                const response = await fetch('/api/provas/' + encodeURIComponent(id), {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        status: 'rascunho',
                        updatedAt: new Date().toISOString()
                    })
                });

                const result = await response.json();

                if (response.ok) {
                    alert('Prova habilitada com sucesso!');
                    if (typeof carregarProvas === 'function') {
                        carregarProvas();
                    }
                } else {
                    alert('Erro ao habilitar prova: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao habilitar prova: ' + error.message);
            }
        };

        // Carregar Concursos da API
        window.carregarConcursos = async function() {
            try {
                const response = await fetch('/api/concursos');
                const concursos = await response.json();
                console.log('Concursos carregados:', concursos);
                
                // Atualizar contador
                if (document.getElementById('total-concursos')) {
                    document.getElementById('total-concursos').textContent = concursos.length;
                }
            } catch (error) {
                console.error('Erro ao carregar concursos:', error);
            }
        };

        // Excluir Concurso
        window.excluirConcurso = async function(id) {
            if (!id) return;
            
            var confirmacao = confirm('Tem certeza que deseja excluir este concurso?\n\nEsta ação não pode ser desfeita.');
            if (!confirmacao) return;
            
            try {
                const response = await fetch('/api/concursos/' + encodeURIComponent(id), {
                    method: 'DELETE'
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    alert('Concurso excluído com sucesso!');
                    if (typeof carregarConcursos === 'function') {
                        carregarConcursos();
                    }
                } else {
                    alert('Erro ao excluir concurso: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao excluir concurso: ' + error.message);
            }
        };

        // Carregar Questões da API
        window.carregarQuestoes = async function() {
            try {
                const response = await fetch('/api/questoes');
                const questoes = await response.json();
                console.log('Questões carregadas:', questoes);

                // Renderizar questões na tabela com informação de prova vinculada
                renderizarTodasQuestoes(questoes);

                // Atualizar contador
                if (document.getElementById('total-questoes')) {
                    document.getElementById('total-questoes').textContent = questoes.length.toLocaleString('pt-BR');
                }
            } catch (error) {
                console.error('Erro ao carregar questões:', error);
            }
        };

        // Renderizar todas as questões na tabela com prova vinculada
        window.renderizarTodasQuestoes = function(questoes) {
            const tableBody = document.querySelector('#questoes-table tbody');
            if (!tableBody) return;

            tableBody.innerHTML = '';

            if (questoes.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="7" style="text-align: center;">Nenhuma questão encontrada.</td></tr>';
                return;
            }

            // Buscar informações de vínculos para cada questão
            Promise.all(questoes.map(async function(questao) {
                try {
                    const vinculosResponse = await fetch('/api/provas-questoes?questaoId=' + encodeURIComponent(questao.id));
                    if (vinculosResponse.ok) {
                        const vinculos = await vinculosResponse.json();
                        if (vinculos.length > 0) {
                            questao.linkedProvaId = vinculos[0].provaId;
                            questao.linkedProvaTitle = vinculos[0].provaTitle || vinculos[0].provaId;
                        }
                    }
                } catch (e) {
                    console.warn('Erro ao buscar vínculo para questão ' + questao.id, e);
                }
                return questao;
            })).then(function(questoesComVinculos) {
                questoesComVinculos.forEach(function(questao) {
                    const row = document.createElement('tr');
                    row.setAttribute('data-prova', questao.linkedProvaId || '');

                    // Determinar status da questão
                    let statusClass = 'status-draft';
                    let statusText = 'Rascunho';
                    if (questao.status === 'publicado') {
                        statusClass = 'status-published';
                        statusText = 'Publicado';
                    }

                    // Determinar texto da prova vinculada
                    const provaVinculada = questao.linkedProvaId
                        ? '<span class="status status-published"><i class="fas fa-link"></i> ' + (questao.linkedProvaTitle || 'Vinculada') + '</span>'
                        : '<span class="status status-draft"><i class="fas fa-unlink"></i> Não vinculada</span>';

                    row.innerHTML = '<td>' + (questao.id || 'N/A') + '</td>' +
                        '<td>' + (questao.question ? questao.question.substring(0, 50) + '...' : 'Sem texto') + '</td>' +
                        '<td>' + (questao.topic || 'N/A') + '</td>' +
                        '<td><span class="status ' + statusClass + '">' + (questao.difficulty || 'N/A') + '</span></td>' +
                        '<td>' + provaVinculada + '</td>' +
                        '<td><span class="status ' + statusClass + '">' + statusText + '</span></td>' +
                        '<td>' +
                        '<button class="btn btn-sm btn-outline" onclick="editarQuestao(\'' + (questao.id || '') + '\')"><i class="fas fa-edit"></i></button> ' +
                        '<button class="btn btn-sm btn-danger" onclick="excluirQuestao(\'' + (questao.id || '') + '\')"><i class="fas fa-trash"></i></button>' +
                        '</td>';

                    tableBody.appendChild(row);
                });
            });
        };

        // Excluir Questão
        window.excluirQuestao = async function(id) {
            if (!id) return;
            
            var confirmacao = confirm('Tem certeza que deseja excluir esta questão?\n\nEsta ação não pode ser desfeita.');
            if (!confirmacao) return;
            
            try {
                const response = await fetch('/api/questoes/' + encodeURIComponent(id), {
                    method: 'DELETE'
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    alert('Questão excluída com sucesso!');
                    if (typeof carregarQuestoes === 'function') {
                        carregarQuestoes();
                    }
                } else {
                    alert('Erro ao excluir questão: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao excluir questão: ' + error.message);
            }
        };

        // Carregar Conteúdos da API
        window.carregarConteudos = async function() {
            try {
                const response = await fetch('/api/conteudos');
                const conteudos = await response.json();
                console.log('Conteúdos carregados:', conteudos);

                // Renderizar conteúdos na UI
                renderConteudos(conteudos);

                // Atualizar contador
                if (document.getElementById('total-conteudos')) {
                    document.getElementById('total-conteudos').textContent = conteudos.length;
                }
            } catch (error) {
                console.error('Erro ao carregar conteúdos:', error);
            }
        };

        // Renderizar conteúdos no grid
        function renderConteudos(conteudos) {
            const grid = document.getElementById('conteudos-grid');
            if (!grid) return;

            // Remover cards de exemplo se existirem
            const exemplos = grid.querySelectorAll('.resource-card');
            exemplos.forEach(function(card) {
                if (!card.getAttribute('data-id')) {
                    card.remove();
                }
            });

            if (conteudos.length === 0) {
                grid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: var(--text-secondary);">Nenhum conteúdo encontrado.</p>';
                return;
            }

            conteudos.forEach(function(conteudo) {
                // Verificar se já existe card para este conteúdo
                const existingCard = grid.querySelector('[data-id="' + (conteudo.id || conteudo.title) + '"]');
                if (existingCard) return;

                const card = document.createElement('div');
                card.className = 'resource-card';
                card.setAttribute('data-id', conteudo.id || conteudo.title);

                const statusClass = conteudo.status === 'publicado' ? 'status-published' : 'status-draft';
                const statusText = conteudo.status === 'publicado' ? 'Publicado' : 'Rascunho';
                const conteudoId = conteudo.id || '';

                // Mapear tipo para ícone
                let typeIcon = 'fa-book';
                if (conteudo.type === 'quiz') typeIcon = 'fa-question-circle';
                else if (conteudo.type === 'biblioteca') typeIcon = 'fa-book-open';

                card.innerHTML = '<span class="status ' + statusClass + '"><i class="fas fa-check-circle"></i>' + statusText + '</span>' +
                    '<h3><i class="fas ' + typeIcon + '"></i> ' + (conteudo.title || 'Sem título') + '</h3>' +
                    '<div class="meta">' +
                    '<span><i class="fas fa-tag"></i> ' + (conteudo.category || 'Sem categoria') + '</span>' +
                    '<span><i class="fas fa-clock"></i> ' + (conteudo.readTime || 'N/A') + '</span>' +
                    '<span><i class="fas fa-eye"></i> ' + (conteudo.viewCount || 0) + ' views</span>' +
                    '</div>' +
                    '<p>' + (conteudo.description || '') + '</p>' +
                    '<div class="actions">' +
                    '<button class="btn btn-sm btn-outline" onclick="editarConteudo(\'' + conteudoId + '\')"><i class="fas fa-edit"></i> Editar</button>' +
                    '<button class="btn btn-sm btn-danger" onclick="excluirConteudo(\'' + conteudoId + '\')"><i class="fas fa-trash"></i></button>' +
                    '</div>';

                grid.appendChild(card);
            });
        }

        // Carregar Quiz da API
        window.carregarQuiz = async function() {
            try {
                const response = await fetch('/api/quiz');
                const quiz = await response.json();
                console.log('Quiz carregados:', quiz);
            } catch (error) {
                console.error('Erro ao carregar quiz:', error);
            }
        };

        // Carregar Recursos da API
        window.carregarRecursos = async function() {
            try {
                const response = await fetch('/api/conteudos?type=biblioteca');
                const recursos = await response.json();
                console.log('Recursos carregados:', recursos);
            } catch (error) {
                console.error('Erro ao carregar recursos:', error);
            }
        };

        // Carregar Dados Mestres da API
        window.carregarDadosMestresAPI = async function() {
            try {
                const response = await fetch('/api/dados-mestres');
                const dados = await response.json();
                console.log('Dados mestres carregados:', dados);
                return dados;
            } catch (error) {
                console.error('Erro ao carregar dados mestres:', error);
                return [];
            }
        };

        // Popular Dropdowns com Dados Mestres
        window.popularDropdowns = async function() {
            try {
                const dados = await window.carregarDadosMestresAPI();
                
                // Agrupar dados por tipo
                const porTipo = {};
                dados.forEach(function(item) {
                    if (!porTipo[item.type]) {
                        porTipo[item.type] = [];
                    }
                    porTipo[item.type].push(item);
                });
                
                // Popular selects baseados no ID do campo
                const selects = document.querySelectorAll('select[id*="-categoria"], select[id*="-tipo"], select[id*="-orgao"], select[id*="-banca"], select[id*="-topico"], select[id*="-dificuldade"], select[id*="-ano"]');
                
                selects.forEach(function(select) {
                    const selectId = select.id;
                    let tipoMapeado = null;
                    
                    // Mapear campo para tipo de dado mestre
                    if (selectId.includes('categoria')) tipoMapeado = 'categoria';
                    else if (selectId.includes('tipo') && !selectId.includes('tipo-prova')) tipoMapeado = 'tipoRecurso';
                    else if (selectId.includes('orgao')) tipoMapeado = 'orgao';
                    else if (selectId.includes('banca')) tipoMapeado = 'banca';
                    else if (selectId.includes('topico')) tipoMapeado = 'categoria';
                    else if (selectId.includes('dificuldade')) tipoMapeado = 'dificuldade';
                    else if (selectId.includes('ano')) tipoMapeado = 'ano';
                    
                    if (tipoMapeado && porTipo[tipoMapeado]) {
                        // Salvar opção selecionada atual
                        const valorAtual = select.value;
                        
                        // Limpar opções (exceto a primeira)
                        while (select.options.length > 1) {
                            select.remove(1);
                        }
                        
                        // Adicionar novas opções
                        porTipo[tipoMapeado].forEach(function(item) {
                            const option = document.createElement('option');
                            option.value = item.name;
                            option.textContent = item.name;
                            select.appendChild(option);
                        });
                        
                        // Restaurar valor selecionado se existir
                        if (valorAtual) {
                            select.value = valorAtual;
                        }
                    }
                });
                
                console.log('Dropdowns populados com dados mestres.');
            } catch (error) {
                console.error('Erro ao popular dropdowns:', error);
            }
        };

        // Aprovar Questão de Usuário
        window.aprovarQuestaoUsuario = async function(id) {
            if (!id) return;
            
            try {
                const response = await fetch('/api/questoes-usuario/' + encodeURIComponent(id) + '/aprovar', {
                    method: 'PUT'
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    alert('Questão aprovada com sucesso!');
                    if (typeof carregarQuestoesUsuario === 'function') {
                        carregarQuestoesUsuario();
                    }
                } else {
                    alert('Erro ao aprovar questão: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao aprovar questão: ' + error.message);
            }
        };

        // Rejeitar Questão de Usuário
        window.rejeitarQuestaoUsuario = async function(id) {
            if (!id) return;
            
            var confirmacao = confirm('Tem certeza que deseja rejeitar esta questão?\n\nEsta ação não pode ser desfeita.');
            if (!confirmacao) return;
            
            try {
                const response = await fetch('/api/questoes-usuario/' + encodeURIComponent(id) + '/rejeitar', {
                    method: 'PUT'
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    alert('Questão rejeitada com sucesso!');
                    if (typeof carregarQuestoesUsuario === 'function') {
                        carregarQuestoesUsuario();
                    }
                } else {
                    alert('Erro ao rejeitar questão: ' + (result.error || 'Erro desconhecido'));
                }
            } catch (error) {
                console.error('Erro na requisição:', error);
                alert('Erro ao rejeitar questão: ' + error.message);
            }
        };

        // Carregar Questões de Usuário
        window.carregarQuestoesUsuario = async function() {
            try {
                const response = await fetch('/api/questoes-usuario');
                const questoes = await response.json();
                console.log('Questões de usuário carregadas:', questoes);
                
                // Atualizar contador
                if (document.getElementById('total-enviados')) {
                    document.getElementById('total-enviados').textContent = questoes.length;
                }
            } catch (error) {
                console.error('Erro ao carregar questões de usuário:', error);
            }
        };

        // ==================== FIM FUNÇÕES DE API ====================

        // ==================== FUNÇÕES DE AÇÕES DOS CARDS ====================

        // Visualizar Questões de uma Prova
        window.visualizarQuestoesProva = function(provaId) {
            if (!provaId) {
                alert('ID da prova não especificado.');
                return;
            }
            
            // Carregar questões relacionadas à prova
            window.carregarQuestoesPorProva(provaId);
            
            // Mudar para aba de questões
            window.switchTab('questoes');
            
            // Filtrar questões pela prova
            setTimeout(function() {
                if (typeof window.filtrarQuestoesPorProva === 'function') {
                    window.filtrarQuestoesPorProva(provaId);
                }
            }, 100);
        };

        // Carregar questões filtradas por prova
        window.carregarQuestoesPorProva = async function(provaId) {
            try {
                const response = await fetch('/api/questoes?provaId=' + encodeURIComponent(provaId));
                const questoes = await response.json();
                console.log('Questões da prova carregadas:', questoes);
                
                // Renderizar questões filtradas
                if (typeof window.renderizarQuestoesFiltradas === 'function') {
                    window.renderizarQuestoesFiltradas(questoes);
                }
            } catch (error) {
                console.error('Erro ao carregar questões da prova:', error);
                // Fallback: mostrar todas as questões
                if (typeof window.carregarQuestoes === 'function') {
                    window.carregarQuestoes();
                }
            }
        };

        // Renderizar questões filtradas na tabela
        window.renderizarQuestoesFiltradas = function(questoes) {
            const tableBody = document.querySelector('#questoes-table tbody');
            if (!tableBody) return;

            tableBody.innerHTML = '';

            if (questoes.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="7" style="text-align: center;">Nenhuma questão encontrada para esta prova.</td></tr>';
                return;
            }

            questoes.forEach(function(questao) {
                const row = document.createElement('tr');
                row.setAttribute('data-prova', questao.provaId || '');

                // Determinar texto da prova vinculada
                const provaVinculada = questao.provaId
                    ? '<span class="status status-published"><i class="fas fa-link"></i> Vinculada</span>'
                    : '<span class="status status-draft"><i class="fas fa-unlink"></i> Não vinculada</span>';

                row.innerHTML = '<td>' + (questao.id || 'N/A') + '</td>' +
                    '<td>' + (questao.question ? questao.question.substring(0, 50) + '...' : 'Sem texto') + '</td>' +
                    '<td>' + (questao.topic || 'N/A') + '</td>' +
                    '<td>' + (questao.difficulty || 'N/A') + '</td>' +
                    '<td>' + provaVinculada + '</td>' +
                    '<td>' + (questao.examType || 'N/A') + '</td>' +
                    '<td>' +
                    '<button class="btn btn-sm btn-outline" onclick="editarQuestao(\'' + (questao.id || '') + '\')"><i class="fas fa-edit"></i></button> ' +
                    '<button class="btn btn-sm btn-danger" onclick="excluirQuestao(\'' + (questao.id || '') + '\')"><i class="fas fa-trash"></i></button>' +
                    '</td>';

                tableBody.appendChild(row);
            });
        };

        // Filtrar questões por prova (para uso no filtro)
        window.filtrarQuestoesPorProva = function(provaId) {
            const filterSelect = document.getElementById('filtro-prova');
            if (filterSelect) {
                filterSelect.value = provaId;
            }
        };

        // Gerar HTML para prova específica
        window.gerarHTMLProva = async function(provaId) {
            if (!provaId) {
                alert('ID da prova não especificado.');
                return;
            }
            
            try {
                // Buscar dados da prova
                const response = await fetch('/api/provas/' + encodeURIComponent(provaId));
                if (!response.ok) {
                    alert('Erro ao carregar dados da prova.');
                    return;
                }
                
                const prova = await response.json();
                
                // Confirmar geração
                var confirmacao = confirm('Deseja gerar o HTML para a prova "' + (prova.title || provaId) + '"?\n\nO arquivo será gerado e commitado no GitHub.');
                if (!confirmacao) return;
                
                // Chamar função de gerar HTML
                if (typeof window.gerarHTML === 'function') {
                    window.gerarHTML('prova', provaId, prova);
                } else {
                    alert('Função de geração de HTML não disponível.');
                }
            } catch (error) {
                console.error('Erro ao gerar HTML:', error);
                alert('Erro ao gerar HTML: ' + error.message);
            }
        };

        // Abrir modal de adicionar questão à prova
        window.abrirModalAdicionarQuestao = function(provaId) {
            // Carregar opções primeiro
            window.carregarOpcoesVinculo().then(function() {
                // Se veio um ID de prova, selecionar ela
                if (provaId) {
                    const provaSelect = document.getElementById('adicionar-prova-id');
                    if (provaSelect) {
                        provaSelect.value = provaId;
                    }
                }
                // Abrir modal
                openModal('adicionarQuestaoProva');
            });
        };

        // ==================== FIM FUNÇÕES DE AÇÕES DOS CARDS ====================

        // Inicialização com fallback de segurança
        function initializeApp() {
            ComponentLoader.init();
        }

        function forceHideLoader() {
            var loader = document.getElementById('loader-global');
            if (loader) {
                loader.classList.add('hidden');
                setTimeout(function() { loader.style.display = 'none'; }, 500);
            }
        }

        // Timeout de segurança: esconde o loader após 5 segundos无论如何
        setTimeout(forceHideLoader, 5000);
        
        // Fallback adicional: esconde loader após DOM estar pronto
        if (document.readyState === 'complete' || document.readyState === 'interactive') {
            setTimeout(forceHideLoader, 100);
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
    })();
    </script>
</body>
</html>
