<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mem√≥ria R√°pida | Simulados de Enfermagem</title>
    
    <!-- CSS do Site Externo -->
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/variables-v4.css">
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/header-v4.css">
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/footer-v4.css">
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/accessibility-v4.css">
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Nunito+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #1A3E74; --accent: #00bcd4; --success: #4caf50; --warning: #ff9800; --error: #f44336; --light: #f4f6f9; --dark: #1f2937; }
        body { font-family: 'Inter', sans-serif; background: var(--light); }
        main { min-height: calc(100vh - 200px); padding: 40px 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .page-header { margin-bottom: 40px; }
        .page-header h1 { font-family: 'Nunito Sans', sans-serif; font-size: 32px; font-weight: 700; margin-bottom: 8px; }
        .page-header p { font-size: 16px; color: #666; }
        
        .memory-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 16px; margin-bottom: 40px; }
        .memory-card { aspect-ratio: 1; background: white; border-radius: 12px; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s ease; font-weight: 700; font-size: 32px; }
        .memory-card:hover { transform: translateY(-4px); box-shadow: 0 8px 16px rgba(0,0,0,0.15); }
        .memory-card.flipped { background: var(--primary); color: white; }
        
        .controls { display: flex; gap: 12px; margin-bottom: 30px; flex-wrap: wrap; }
        .btn { padding: 12px 24px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; transition: all 0.3s ease; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: #152c4f; }
        .btn-secondary { background: white; color: var(--primary); border: 2px solid var(--primary); }
        .btn-secondary:hover { background: var(--light); }
        
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .stat-card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .stat-label { font-size: 14px; color: #666; margin-bottom: 8px; }
        .stat-value { font-size: 28px; font-weight: 700; color: var(--primary); }
        
        @media (max-width: 768px) { .memory-grid { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); } }
    </style>
</head>
<body>
    <a href="#main" class="skip-link" style="position: absolute; top: -40px; left: 0; background: var(--primary); color: white; padding: 8px; z-index: 100000;">Pular para conte√∫do principal</a>
    <div id="accessibility-container"></div>
    <header id="header-container"></header>
    <div id="nav-container"></div>
    <div id="breadcrumb-container"></div>
    
    <main id="main">
        <div class="container">
            <div class="page-header">
                <h1><i class="fas fa-bolt"></i> Mem√≥ria R√°pida</h1>
                <p>Teste sua mem√≥ria com quizzes r√°pidos e desafiadores</p>
            </div>

            <!-- Estat√≠sticas -->
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-label"><i class="fas fa-play"></i> Jogos Realizados</div>
                    <div class="stat-value" id="games-played">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label"><i class="fas fa-trophy"></i> Melhor Sequ√™ncia</div>
                    <div class="stat-value" id="best-streak">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label"><i class="fas fa-percent"></i> Taxa de Acerto</div>
                    <div class="stat-value" id="accuracy">0%</div>
                </div>
            </div>

            <!-- Controles -->
            <div class="controls">
                <button class="btn btn-primary" onclick="MemoriaRapida.iniciarJogo()">
                    <i class="fas fa-play"></i> Iniciar Novo Jogo
                </button>
                <button class="btn btn-secondary" onclick="MemoriaRapida.resetar()">
                    <i class="fas fa-redo"></i> Resetar
                </button>
                <select id="difficulty" class="btn btn-secondary" style="padding: 10px 16px;">
                    <option value="facil">F√°cil (4 pares)</option>
                    <option value="medio" selected>M√©dio (8 pares)</option>
                    <option value="dificil">Dif√≠cil (12 pares)</option>
                </select>
            </div>

            <!-- Grid de Mem√≥ria -->
            <div class="memory-grid" id="memory-grid"></div>

            <!-- Resultado -->
            <div id="result-message" style="display: none; background: white; padding: 30px; border-radius: 12px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <h2 id="result-title" style="font-size: 28px; margin-bottom: 16px;"></h2>
                <p id="result-text" style="font-size: 16px; color: #666; margin-bottom: 20px;"></p>
                <button class="btn btn-primary" onclick="MemoriaRapida.iniciarJogo()">
                    <i class="fas fa-play"></i> Jogar Novamente
                </button>
            </div>
        </div>
    </main>
    
    <footer id="footer-container"></footer>

    <script src="navigation.js"></script>
    <script>
        const MemoriaRapida = {
            cards: [],
            flipped: [],
            matched: 0,
            moves: 0,
            startTime: null,
            gameActive: false,

            iniciarJogo() {
                const difficulty = document.getElementById('difficulty').value;
                const pairCounts = { facil: 4, medio: 8, dificil: 12 };
                const pairs = pairCounts[difficulty];
                
                this.cards = [];
                for (let i = 1; i <= pairs; i++) {
                    this.cards.push(i, i);
                }
                this.cards.sort(() => Math.random() - 0.5);
                
                this.flipped = [];
                this.matched = 0;
                this.moves = 0;
                this.startTime = Date.now();
                this.gameActive = true;
                
                document.getElementById('result-message').style.display = 'none';
                this.renderCards();
            },

            renderCards() {
                const grid = document.getElementById('memory-grid');
                grid.innerHTML = '';
                
                this.cards.forEach((card, index) => {
                    const cardEl = document.createElement('div');
                    cardEl.className = 'memory-card';
                    cardEl.textContent = this.flipped.includes(index) || this.isMatched(index) ? card : '?';
                    cardEl.onclick = () => this.flipCard(index);
                    grid.appendChild(cardEl);
                });
            },

            flipCard(index) {
                if (!this.gameActive || this.flipped.includes(index) || this.isMatched(index)) return;
                
                this.flipped.push(index);
                this.renderCards();
                
                if (this.flipped.length === 2) {
                    this.moves++;
                    const [first, second] = this.flipped;
                    
                    if (this.cards[first] === this.cards[second]) {
                        this.matched += 2;
                        this.flipped = [];
                        
                        if (this.matched === this.cards.length) {
                            this.finalizarJogo();
                        } else {
                            this.renderCards();
                        }
                    } else {
                        setTimeout(() => {
                            this.flipped = [];
                            this.renderCards();
                        }, 1000);
                    }
                }
            },

            isMatched(index) {
                return this.matched > 0 && this.cards.slice(0, this.matched).includes(this.cards[index]);
            },

            finalizarJogo() {
                this.gameActive = false;
                const time = Math.round((Date.now() - this.startTime) / 1000);
                
                document.getElementById('games-played').textContent = 
                    (parseInt(localStorage.getItem('memoria_jogos') || '0') + 1);
                localStorage.setItem('memoria_jogos', document.getElementById('games-played').textContent);
                
                document.getElementById('result-message').style.display = 'block';
                document.getElementById('result-title').textContent = 'üéâ Parab√©ns!';
                document.getElementById('result-text').textContent = 
                    `Voc√™ completou em ${this.moves} movimentos e ${time} segundos!`;
            },

            resetar() {
                this.cards = [];
                this.flipped = [];
                this.matched = 0;
                this.moves = 0;
                document.getElementById('memory-grid').innerHTML = '';
                document.getElementById('result-message').style.display = 'none';
            }
        };

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                if (Navigation.init) Navigation.init();
            });
        } else {
            if (Navigation.init) Navigation.init();
        }
    </script>
</body>
</html>
