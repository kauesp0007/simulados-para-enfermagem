<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desafio Inverso | Simulados de Enfermagem</title>
    
    <!-- CSS do Site Externo -->
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/variables-v4.css">
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/header-v4.css">
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/footer-v4.css">
    <link rel="stylesheet" href="https://auditeduca.github.io/Calculadoras-de-Enfermagem/assets/css/accessibility-v4.css">
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Nunito+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #1A3E74; --accent: #00bcd4; --success: #4caf50; --warning: #ff9800; --error: #f44336; --light: #f4f6f9; --dark: #1f2937; }
        body { font-family: 'Inter', sans-serif; background: var(--light); }
        main { min-height: calc(100vh - 200px); padding: 40px 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        .page-header { margin-bottom: 40px; }
        .page-header h1 { font-family: 'Nunito Sans', sans-serif; font-size: 32px; font-weight: 700; margin-bottom: 8px; }
        .page-header p { font-size: 16px; color: #666; }
        
        .challenge-card { background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 30px; }
        .challenge-question { font-size: 18px; font-weight: 600; margin-bottom: 20px; color: var(--primary); }
        .answer-options { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px; }
        .answer-btn { padding: 16px; border-radius: 8px; border: 2px solid #e2e8f0; background: white; cursor: pointer; transition: all 0.3s ease; font-weight: 600; }
        .answer-btn:hover { border-color: var(--primary); background: var(--light); }
        .answer-btn.correct { background: var(--success); color: white; border-color: var(--success); }
        .answer-btn.incorrect { background: var(--error); color: white; border-color: var(--error); }
        
        .controls { display: flex; gap: 12px; margin-bottom: 30px; }
        .btn { padding: 12px 24px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; transition: all 0.3s ease; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: #152c4f; }
        
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .stat-label { font-size: 14px; color: #666; margin-bottom: 8px; }
        .stat-value { font-size: 28px; font-weight: 700; color: var(--primary); }
        
        @media (max-width: 768px) { .answer-options { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <a href="#main" class="skip-link" style="position: absolute; top: -40px; left: 0; background: var(--primary); color: white; padding: 8px; z-index: 100000;">Pular para conteúdo principal</a>
    <div id="accessibility-container"></div>
    <header id="header-container"></header>
    <div id="nav-container"></div>
    <div id="breadcrumb-container"></div>
    
    <main id="main">
        <div class="container">
            <div class="page-header">
                <h1><i class="fas fa-exchange-alt"></i> Desafio Inverso</h1>
                <p>Você vê a resposta e precisa encontrar a pergunta correta</p>
            </div>

            <!-- Estatísticas -->
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-label"><i class="fas fa-play"></i> Desafios Completados</div>
                    <div class="stat-value" id="challenges-completed">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label"><i class="fas fa-check"></i> Acertos</div>
                    <div class="stat-value" id="correct-answers">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label"><i class="fas fa-percent"></i> Taxa de Acerto</div>
                    <div class="stat-value" id="accuracy">0%</div>
                </div>
            </div>

            <!-- Controles -->
            <div class="controls">
                <button class="btn btn-primary" onclick="DesafioInverso.proximoDesafio()">
                    <i class="fas fa-play"></i> Próximo Desafio
                </button>
                <button class="btn btn-primary" onclick="DesafioInverso.resetar()">
                    <i class="fas fa-redo"></i> Resetar
                </button>
            </div>

            <!-- Desafio -->
            <div class="challenge-card" id="challenge-container" style="display: none;">
                <div class="challenge-question">
                    <strong>Resposta:</strong> <span id="challenge-answer"></span>
                </div>
                <div class="challenge-question" style="color: #666; font-size: 14px;">
                    Qual é a pergunta correta para esta resposta?
                </div>
                <div class="answer-options" id="answer-options"></div>
            </div>

            <!-- Mensagem Inicial -->
            <div class="challenge-card" id="initial-message">
                <p style="text-align: center; color: #666; font-size: 16px;">
                    <i class="fas fa-lightbulb"></i> Clique em "Próximo Desafio" para começar!
                </p>
            </div>
        </div>
    </main>
    
    <footer id="footer-container"></footer>

    <script src="navigation.js"></script>
    <script>
        const DesafioInverso = {
            challenges: [
                { answer: '60-100 bpm', options: ['Frequência cardíaca normal', 'Pressão arterial normal', 'Frequência respiratória', 'Temperatura corporal'] },
                { answer: '12-20 irpm', options: ['Frequência respiratória normal', 'Frequência cardíaca', 'Pressão arterial', 'Saturação de oxigênio'] },
                { answer: '36,5-37,5°C', options: ['Temperatura corporal normal', 'Febre', 'Hipotermia', 'Queimadura'] },
                { answer: '90-120 mmHg', options: ['Pressão arterial sistólica normal', 'Pressão diastólica', 'Frequência cardíaca', 'Glicemia'] },
                { answer: '95-100%', options: ['Saturação de oxigênio normal', 'Frequência cardíaca', 'Temperatura', 'Pressão arterial'] }
            ],
            currentChallenge: null,
            totalAttempts: 0,
            correctAnswers: 0,

            proximoDesafio() {
                this.currentChallenge = this.challenges[Math.floor(Math.random() * this.challenges.length)];
                const shuffled = [...this.currentChallenge.options].sort(() => Math.random() - 0.5);
                
                document.getElementById('initial-message').style.display = 'none';
                document.getElementById('challenge-container').style.display = 'block';
                document.getElementById('challenge-answer').textContent = this.currentChallenge.answer;
                
                const optionsContainer = document.getElementById('answer-options');
                optionsContainer.innerHTML = '';
                
                shuffled.forEach((option, index) => {
                    const btn = document.createElement('button');
                    btn.className = 'answer-btn';
                    btn.textContent = option;
                    btn.onclick = () => this.verificarResposta(option, btn);
                    optionsContainer.appendChild(btn);
                });
            },

            verificarResposta(selected, btn) {
                this.totalAttempts++;
                const isCorrect = selected === this.currentChallenge.options[0];
                
                if (isCorrect) {
                    this.correctAnswers++;
                    btn.classList.add('correct');
                } else {
                    btn.classList.add('incorrect');
                    document.querySelectorAll('.answer-btn').forEach(b => {
                        if (b.textContent === this.currentChallenge.options[0]) {
                            b.classList.add('correct');
                        }
                    });
                }
                
                this.atualizarEstatisticas();
                
                document.querySelectorAll('.answer-btn').forEach(b => b.onclick = null);
                setTimeout(() => this.proximoDesafio(), 2000);
            },

            atualizarEstatisticas() {
                document.getElementById('challenges-completed').textContent = this.totalAttempts;
                document.getElementById('correct-answers').textContent = this.correctAnswers;
                const accuracy = this.totalAttempts > 0 ? Math.round((this.correctAnswers / this.totalAttempts) * 100) : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
            },

            resetar() {
                this.currentChallenge = null;
                this.totalAttempts = 0;
                this.correctAnswers = 0;
                document.getElementById('challenge-container').style.display = 'none';
                document.getElementById('initial-message').style.display = 'block';
                this.atualizarEstatisticas();
            }
        };

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                if (Navigation.init) Navigation.init();
            });
        } else {
            if (Navigation.init) Navigation.init();
        }
    </script>
</body>
</html>
