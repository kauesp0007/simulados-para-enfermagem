<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="theme-color" content="#1A3E74">
    <meta name="description" content="Dashboard de progresso e desempenho - Simulados de Enfermagem">
    <title>Dashboard | Simulados de Enfermagem</title>

    <!-- Favicon -->
    <link rel="icon" type="image/webp" href="https://simulados-para-enfermagem.com.br/assets/images/logotipo-favicon.webp">
    <link rel="shortcut icon" type="image/webp" href="https://simulados-para-enfermagem.com.br/assets/images/logotipo-favicon.webp">

    <!-- Fontes Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Nunito+Sans:wght@600;700;800&display=swap" rel="stylesheet">

    <!-- Ícones FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- CSS dos Componentes Modularizados -->
    <link rel="stylesheet" href="https://simulados-para-enfermagem.com.br/assets/components/css/components.css">
    
    <!-- CSS do Cabeçalho -->
    <link rel="stylesheet" href="https://simulados-para-enfermagem.com.br/assets/components/css/header.css">
    
    <!-- CSS de Acessibilidade -->
    <link rel="stylesheet" href="https://simulados-para-enfermagem.com.br/assets/components/css/accessibility.css">
    
    <!-- CSS do Rodapé -->
    <link rel="stylesheet" href="https://simulados-para-enfermagem.com.br/assets/components/css/footer.css">

    <style>
        /* ============================================
           DASHBOARD SPECIFIC STYLES
           ============================================ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1A3E74;
            --accent: #00bcd4;
            --success: #4caf50;
            --warning: #ff9800;
            --error: #f44336;
            --light: #f4f6f9;
            --dark: #1f2937;
        }

        html {
            font-size: 100%;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--light);
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Nunito Sans', sans-serif;
        }

        /* Loader Global */
        #loader-global {
            position: fixed;
            inset: 0;
            background: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 200000;
            transition: opacity 0.5s ease;
            opacity: 1;
        }

        #loader-global.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loader-dots {
            display: flex;
            gap: 8px;
        }

        .loader-dot {
            width: 10px;
            height: 10px;
            background: var(--primary);
            border-radius: 50%;
            opacity: 0.3;
            animation: dotPulse 1.4s ease-in-out infinite;
        }

        .loader-dot:nth-child(1) { animation-delay: 0s; }
        .loader-dot:nth-child(2) { animation-delay: 0.2s; }
        .loader-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes dotPulse {
            0%, 80%, 100% { opacity: 0.3; transform: scale(0.8); }
            40% { opacity: 1; transform: scale(1); }
        }

        .page-wrapper {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
            min-height: calc(100vh - 300px);
            padding: 40px 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .dashboard-header, .page-header {
            margin-bottom: 40px;
        }

        .dashboard-header h1, .page-header h1 {
            font-family: 'Nunito Sans', sans-serif;
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .dashboard-header h1 i, .page-header h1 i {
            color: var(--primary);
        }

        .dashboard-header p, .page-header p {
            font-size: 16px;
            color: #666;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stat-label i {
            color: var(--primary);
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .stat-label-sub {
            font-size: 12px;
            color: #999;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .section-title {
            font-family: 'Nunito Sans', sans-serif;
            font-size: 20px;
            font-weight: 700;
            margin: 32px 0 20px 0;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-title i {
            color: var(--primary);
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .feature-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }

        .feature-card h3 {
            font-family: 'Nunito Sans', sans-serif;
            font-size: 20px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feature-card h3 i {
            color: var(--accent);
        }

        .feature-card p {
            color: #666;
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            font-size: 15px;
            font-family: 'Inter', sans-serif;
            background: var(--primary);
            color: white;
        }

        .btn:hover {
            background: #152c4f;
            transform: translateY(-2px);
        }

        .btn-secondary {
            display: inline-block;
            padding: 10px 20px;
            background: var(--warning);
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            font-size: 14px;
        }

        .btn-secondary:hover {
            background: #F57C00;
            transform: translateY(-2px);
        }

        .meta-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .meta-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .meta-label {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .meta-label i {
            color: var(--accent);
        }

        .meta-percentage {
            font-size: 14px;
            color: #666;
        }

        .meta-description {
            font-size: 13px;
            color: #666;
            margin-top: 8px;
        }

        .meta-section .progress-bar {
            margin-top: 0;
            margin-bottom: 8px;
        }

        .meta-section .progress-fill {
            background: linear-gradient(90deg, var(--warning), #FFB74D);
        }

        .notification-card {
            background: #FFF3E0;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            gap: 24px;
            align-items: flex-start;
        }

        .notification-icon {
            font-size: 32px;
            color: var(--warning);
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-size: 15px;
            color: #666;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .notification-main {
            font-size: 18px;
            font-weight: 700;
            color: #E65100;
            margin-bottom: 8px;
        }

        .notification-subtitle {
            font-size: 14px;
            color: #666;
            margin-bottom: 16px;
        }

        @media (max-width: 768px) {
            .page-wrapper {
                padding: 24px 16px;
            }

            .dashboard-header h1, .page-header h1 {
                font-size: 24px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .stat-card {
                padding: 20px;
            }

            .stat-value {
                font-size: 24px;
            }

            .cards-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .feature-card {
                padding: 20px;
            }

            .feature-card h3 {
                font-size: 18px;
            }

            .notification-card {
                flex-direction: column;
                gap: 16px;
                padding: 20px;
            }

            .notification-icon {
                font-size: 28px;
            }

            .notification-main {
                font-size: 16px;
            }

            .meta-section {
                padding: 20px;
            }
        }

        body.dark-mode {
            background: #1f2937;
            color: #f0f4f8;
        }

        body.dark-mode .stat-card,
        body.dark-mode .feature-card,
        body.dark-mode .meta-section,
        body.dark-mode .notification-card {
            background: #2d3748;
            color: #f0f4f8;
        }

        body.dark-mode .stat-label,
        body.dark-mode .feature-card p,
        body.dark-mode .meta-description,
        body.dark-mode .dashboard-header p,
        body.dark-mode .page-header p,
        body.dark-mode .notification-title,
        body.dark-mode .notification-subtitle {
            color: #cbd5e1;
        }

        body.dark-mode .stat-label i {
            color: var(--accent);
        }

        body.dark-mode .feature-card h3,
        body.dark-mode .stat-value,
        body.dark-mode .meta-label,
        body.dark-mode .section-title,
        body.dark-mode .dashboard-header h1,
        body.dark-mode .page-header h1 {
            color: #f0f4f8;
        }

        body.dark-mode .progress-bar {
            background: #4b5563;
        }

        body.dark-mode .notification-main {
            color: #FFB74D;
        }

        body[data-contrast="high"] .stat-card,
        body[data-contrast="high"] .feature-card,
        body[data-contrast="high"] .meta-section {
            border: 2px solid var(--primary);
        }

        body[data-contrast="high"] .notification-card {
            border: 2px solid var(--warning);
        }

        body.reduce-animations .stat-card,
        body.reduce-animations .feature-card,
        body.reduce-animations .btn,
        body.reduce-animations .notification-card,
        body.reduce-animations .meta-section {
            transition: none;
        }

        body.reduce-animations .loader-dot {
            animation: none;
        }

        body[data-reduce-motion="reduce"] .stat-card,
        body[data-reduce-motion="reduce"] .feature-card,
        body[data-reduce-motion="reduce"] .btn {
            transition: none;
            animation: none;
        }

        .footer-column.animate-in {
            opacity: 1 !important;
            transform: translateY(0) !important;
        }

        /* Error display styles */
        .component-error {
            padding: 20px;
            background: #FFF3E0;
            border: 2px solid #FF9800;
            border-radius: 8px;
            margin: 10px;
        }

        .component-error h4 {
            color: #E65100;
            margin: 0 0 10px 0;
        }

        .component-error p {
            margin: 5px 0;
            color: #333;
        }

        .component-error code {
            background: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <!-- LOADER -->
    <div id="loader-global">
        <div class="loader-dots">
            <div class="loader-dot"></div>
            <div class="loader-dot"></div>
            <div class="loader-dot"></div>
        </div>
    </div>

    <!-- CONTAINERS PARA COMPONENTES MODULARES -->
    <div id="accessibility-container"></div>
    <div id="header-container"></div>

    <!-- CONTEÚDO DO DASHBOARD -->
    <div class="page-wrapper">
        <main id="main-content">
            <div class="dashboard-header">
                <h1><i class="fas fa-hand-wave"></i> Bem-vindo de volta!</h1>
                <p>Aqui está seu progresso de hoje</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label"><i class="fas fa-check-circle"></i> Questões Respondidas</div>
                    <div class="stat-value" id="total-questions">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label"><i class="fas fa-bullseye"></i> Taxa de Acerto</div>
                    <div class="stat-value" id="accuracy-rate">0%</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="accuracy-progress" style="width: 0%"></div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label"><i class="fas fa-fire"></i> Dias Seguidos</div>
                    <div class="stat-value" id="consecutive-days">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label"><i class="fas fa-star"></i> XP Total</div>
                    <div class="stat-value" id="total-xp">0</div>
                </div>
            </div>

            <div class="meta-section">
                <div class="meta-header">
                    <span class="meta-label"><i class="fas fa-bullseye"></i> Meta Diária</span>
                    <span class="meta-percentage" id="daily-percentage">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="daily-progress" style="width: 0%"></div>
                </div>
                <p class="meta-description" id="daily-description">0 de 10 questões hoje</p>
            </div>

            <div class="notification-card">
                <div class="notification-icon"><i class="fas fa-calendar-alt"></i></div>
                <div class="notification-content">
                    <div class="notification-title">Próxima Prova</div>
                    <div class="notification-main" id="next-exam">Faltam dias!</div>
                    <div class="notification-subtitle">Inscreva-se agora e comece a estudar para esta oportunidade</div>
                    <button class="btn-secondary" onclick="window.location.href='concursospublicos.html'"><i class="fas fa-info-circle"></i> Ver Detalhes</button>
                </div>
            </div>

            <h2 class="section-title"><i class="fas fa-user"></i> Usuário</h2>
            <div class="cards-grid">
                <div class="feature-card">
                    <h3><i class="fas fa-chart-line"></i> Meu Desempenho</h3>
                    <p>Visualize suas estatísticas, gráficos e evolução do aprendizado.</p>
                    <button class="btn" onclick="window.location.href='meu-desempenho.html'"><i class="fas fa-eye"></i> Ver Desempenho</button>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-graduation-cap"></i> Meus Concursos</h3>
                    <p>Acompanhe seus concursos inscritos e prepare-se para as provas.</p>
                    <button class="btn" onclick="window.location.href='meusconcursos.html'"><i class="fas fa-list"></i> Ver Concursos</button>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-question-circle"></i> Minhas Questões</h3>
                    <p>Revise questões respondidas, erros e acertos para melhorar.</p>
                    <button class="btn" onclick="window.location.href='minhasquestoes.html'"><i class="fas fa-search"></i> Consultar</button>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-cog"></i> Minhas Preferências</h3>
                    <p>Configure seu perfil, preferências e configurações do sistema.</p>
                    <button class="btn" onclick="window.location.href='settings.html'"><i class="fas fa-sliders-h"></i> Configurar</button>
                </div>
            </div>

            <h2 class="section-title"><i class="fas fa-book"></i> Modos de Estudo</h2>
            <div class="cards-grid">
                <div class="feature-card">
                    <h3><i class="fas fa-edit"></i> Estudo Personalizado</h3>
                    <p>Monte seu quiz com seus tópicos e número de questões preferidos.</p>
                    <button class="btn" onclick="window.location.href='estudopersonalizado.html'"><i class="fas fa-play"></i> Começar</button>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-list-alt"></i> Provas Completas</h3>
                    <p>Resolva provas de concursos anteriores na íntegra por banca e cargo.</p>
                    <button class="btn" onclick="window.location.href='provascompletas.html'"><i class="fas fa-play"></i> Começar</button>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-stopwatch"></i> Simulado Real</h3>
                    <p>Teste seus conhecimentos em um ambiente de prova real com cronômetro.</p>
                    <button class="btn" onclick="window.location.href='simuladoreal.html'"><i class="fas fa-play"></i> Começar</button>
                </div>
            </div>

            <h2 class="section-title"><i class="fas fa-trophy"></i> Desafios e Recursos</h2>
            <div class="cards-grid">
                <div class="feature-card">
                    <h3><i class="fas fa-calendar-check"></i> Concursos Públicos</h3>
                    <p>Descubra oportunidades, editais e datas de inscrições para concursos.</p>
                    <button class="btn" onclick="window.location.href='concursospublicos.html'"><i class="fas fa-search"></i> Explorar</button>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-book-open"></i> Biblioteca</h3>
                    <p>Acesse mapas mentais, resumos e recursos de estudo exclusivos.</p>
                    <button class="btn" onclick="window.location.href='biblioteca.html'"><i class="fas fa-compass"></i> Explorar</button>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-bolt"></i> Memória Rápida</h3>
                    <p>Responda o máximo de questões em 15 minutos! Teste sua velocidade.</p>
                    <button class="btn" onclick="window.location.href='memoriarapida.html'"><i class="fas fa-crosshairs"></i> Desafiar</button>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-clock"></i> Timer Pomodoro</h3>
                    <p>Organize seu tempo de estudo com a técnica Pomodoro.</p>
                    <button class="btn" onclick="window.location.href='timerpomodoro.html'"><i class="fas fa-hourglass-start"></i> Iniciar</button>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-spa"></i> Modo Anti-Stress</h3>
                    <p>Reduza a ansiedade com exercícios de meditação e respiração.</p>
                    <button class="btn" onclick="window.location.href='modoantiestresse.html'"><i class="fas fa-heart"></i> Relaxar</button>
                </div>
                <div class="feature-card">
                    <h3><i class="fas fa-mobile-alt"></i> Estudo Offline</h3>
                    <p>Baixe questões e estude sem conexão com a internet.</p>
                    <button class="btn" onclick="window.location.href='estudooffline.html'"><i class="fas fa-download"></i> Baixar</button>
                </div>
            </div>
        </main>
    </div>

    <!-- FOOTER -->
    <div id="footer-container"></div>

    <!-- SCRIPT DO DASHBOARD -->
    <script>
    (function() {
        'use strict';

        // ========================================
        // CONFIGURAÇÃO DE CAMINHOS
        // ========================================
        const Config = {
            // URL base para os arquivos HTML dos componentes
            htmlPath: 'https://simulados-para-enfermagem.com.br/assets/components/html/',
            
            // Componentes a carregar
            components: [
                { 
                    id: 'accessibility-container', 
                    file: 'accessibility.html',
                    name: 'Painel de Acessibilidade'
                },
                { 
                    id: 'header-container', 
                    file: 'header.html',
                    name: 'Cabeçalho'
                },
                { 
                    id: 'footer-container', 
                    file: 'footer.html',
                    name: 'Rodapé'
                }
            ]
        };

        // ========================================
        // CARREGADOR DE COMPONENTES
        // ========================================
        const ComponentLoader = {
            async loadComponent(comp) {
                const container = document.getElementById(comp.id);
                
                if (!container) {
                    console.error('[ERRO] Container não encontrado: #' + comp.id);
                    return false;
                }

                const fullPath = Config.htmlPath + comp.file;
                console.log('[INFO] Carregando: ' + comp.name + ' (' + fullPath + ')');

                try {
                    const response = await fetch(fullPath);
                    
                    if (!response.ok) {
                        throw new Error('HTTP ' + response.status + ': ' + response.statusText);
                    }

                    const html = await response.text();
                    
                    if (!html || html.trim() === '') {
                        throw new Error('Arquivo vazio');
                    }

                    container.innerHTML = html;
                    console.log('[SUCESSO] ' + comp.name + ' carregado');
                    return true;

                } catch (error) {
                    console.error('[ERRO] ' + comp.name + ':', error.message);
                    
                    container.innerHTML = '<div class="component-error">' +
                        '<h4>⚠️ Erro ao carregar: ' + comp.name + '</h4>' +
                        '<p><strong>Arquivo:</strong> ' + comp.file + '</p>' +
                        '<p><strong>Caminho:</strong> <code>' + fullPath + '</code></p>' +
                        '<p><strong>Erro:</strong> ' + error.message + '</p>' +
                        '<p style="font-size: 12px; color: #666; margin-top: 10px;">' +
                        'Verifique se os arquivos estão na pasta correta.</p>' +
                        '</div>';
                    
                    return false;
                }
            },

            async init() {
                console.log('========================================');
                console.log('CARREGANDO COMPONENTES');
                console.log('========================================');
                
                let allLoaded = true;
                
                for (const comp of Config.components) {
                    const success = await this.loadComponent(comp);
                    if (!success) allLoaded = false;
                }

                console.log('========================================');
                
                if (allLoaded) {
                    console.log('[OK] Todos os componentes carregados!');
                } else {
                    console.log('[AVISO] Alguns componentes não carregaram.');
                }
                console.log('========================================');

                // Inicializar dashboard
                DashboardManager.init();
            }
        };

        // ========================================
        // DASHBOARD MANAGER
        // ========================================
        const DashboardManager = {
            init() {
                console.log('[INFO] Inicializando Dashboard Manager...');
                this.loadStats();
                this.loadDailyGoal();
                this.hideLoader();
            },

            loadStats() {
                try {
                    const historico = JSON.parse(localStorage.getItem('user_historico_quizzes') || '[]');
                    
                    // Total de questões
                    const totalQuestions = document.getElementById('total-questions');
                    if (totalQuestions) totalQuestions.textContent = historico.length;
                    
                    // Taxa de acerto
                    const accuracyProgress = document.getElementById('accuracy-progress');
                    const accuracyRate = document.getElementById('accuracy-rate');
                    if (historico.length > 0) {
                        const mediaAcertos = Math.round(historico.reduce(function(sum, q) { return sum + (q.percentual || 0); }, 0) / historico.length);
                        if (accuracyRate) accuracyRate.textContent = mediaAcertos + '%';
                        if (accuracyProgress) accuracyProgress.style.width = mediaAcertos + '%';
                    } else {
                        if (accuracyProgress) accuracyProgress.style.width = '0%';
                    }
                    
                    // Dias consecutivos
                    const consecutiveDays = this.calculateConsecutiveDays(historico);
                    const consecutiveElement = document.getElementById('consecutive-days');
                    if (consecutiveElement) consecutiveElement.textContent = consecutiveDays;
                    
                    // XP Total
                    const totalXP = historico.reduce(function(sum, q) { return sum + (q.xp || 0); }, 0);
                    const xpElement = document.getElementById('total-xp');
                    if (xpElement) xpElement.textContent = totalXP.toLocaleString('pt-BR');
                    
                    console.log('[INFO] Estatísticas carregadas');
                    
                } catch (error) {
                    console.error('[ERRO] Erro ao carregar estatísticas:', error);
                }
            },

            loadDailyGoal() {
                try {
                    const today = new Date().toDateString();
                    const historico = JSON.parse(localStorage.getItem('user_historico_quizzes') || '[]');
                    const todayQuestions = historico.filter(function(q) { return new Date(q.dataFinal).toDateString() === today; }).length;
                    const dailyGoal = 10;
                    const percentage = Math.min(Math.round((todayQuestions / dailyGoal) * 100), 100);
                    
                    const dailyPercentage = document.getElementById('daily-percentage');
                    const dailyProgress = document.getElementById('daily-progress');
                    const dailyDescription = document.getElementById('daily-description');
                    
                    if (dailyPercentage) dailyPercentage.textContent = percentage + '%';
                    if (dailyProgress) dailyProgress.style.width = percentage + '%';
                    if (dailyDescription) dailyDescription.textContent = todayQuestions + ' de ' + dailyGoal + ' questões hoje';
                    
                } catch (error) {
                    console.error('[ERRO] Erro ao carregar meta diária:', error);
                }
            },

            calculateConsecutiveDays(historico) {
                if (historico.length === 0) return 0;
                
                var hoje = new Date().toDateString();
                var dias = 0;
                var dataAtual = new Date();
                
                for (var i = 0; i < 365; i++) {
                    var dataStr = dataAtual.toDateString();
                    var temAtividade = historico.some(function(q) { return new Date(q.dataFinal).toDateString() === dataStr; });
                    
                    if (temAtividade) {
                        dias++;
                    } else if (dataStr !== hoje) {
                        break;
                    }
                    
                    dataAtual.setDate(dataAtual.getDate() - 1);
                }
                
                return dias;
            },

            hideLoader() {
                setTimeout(function() {
                    var loader = document.getElementById('loader-global');
                    if (loader) {
                        loader.classList.add('hidden');
                        setTimeout(function() { loader.style.display = 'none'; }, 500);
                    }
                }, 800);
            }
        };

        // ========================================
        // INICIALIZAÇÃO
        // ========================================
        function init() {
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    ComponentLoader.init();
                });
            } else {
                ComponentLoader.init();
            }
        }

        init();

    })();
    </script>
    
    <!-- JavaScript dos Componentes -->
    <script src="https://simulados-para-enfermagem.com.br/assets/components/js/header.js"></script>
    <script src="https://simulados-para-enfermagem.com.br/assets/components/js/accessibility.js"></script>
    <script src="https://simulados-para-enfermagem.com.br/assets/components/js/footer.js"></script>
</body>
</html>
